---
phase: 03-tool-enhancement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/tools/disambiguation.md
  - docs/tools/choosing.md
  - mkdocs.yml
autonomous: true

must_haves:
  truths:
    - "User asking 'What is my revenue?' gets clear tool recommendation"
    - "User asking 'Siapa pelanggan terbesar saya?' gets clear tool recommendation"
    - "User understands when to use invoice_list_sales vs financial_sales_summary"
    - "User understands when to use contact_get_transactions vs invoice_list_sales with contact_id"
    - "AI agent can determine tool confidence (Definitive vs Context-dependent)"
  artifacts:
    - path: "docs/tools/disambiguation.md"
      provides: "Business question to tool mapping matrix"
      contains: "What is my revenue"
    - path: "docs/tools/choosing.md"
      provides: "Tool overlap explanations with choosing guides"
      contains: "invoice_list_sales vs financial_sales_summary"
    - path: "mkdocs.yml"
      provides: "Navigation updated with new pages"
      contains: "disambiguation.md"
  key_links:
    - from: "docs/tools/disambiguation.md"
      to: "docs/tools/choosing.md"
      via: "Cross-reference links"
      pattern: "choosing\\.md"
    - from: "docs/tools/index.md"
      to: "docs/tools/disambiguation.md"
      via: "Navigation link"
      pattern: "disambiguation"
---

<objective>
Create tool disambiguation documentation that helps users and AI agents select the correct tool for their business questions.

Purpose: Requirements TOOL-01 and TOOL-02 - make the 23 existing tools easier to discover and choose correctly
Output: Two markdown documentation pages (disambiguation matrix + choosing guide) integrated into MkDocs
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-tool-enhancement/03-CONTEXT.md

# Tool documentation for reference
@docs/tools/index.md
@docs/tools/sales/invoices.md
@docs/tools/finance/reports.md
@docs/tools/crm/contacts.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create disambiguation matrix</name>
  <files>docs/tools/disambiguation.md</files>
  <action>
Create `docs/tools/disambiguation.md` with a business question to tool mapping matrix.

**Structure:**
1. Header explaining purpose (help users find the right tool)
2. How to read the matrix (columns explained)
3. Matrix table organized by question category

**Matrix columns:**
- Business Question (natural language, bilingual EN/ID in same cell)
- Recommended Tool (primary tool to use)
- Confidence (Definitive | Context-dependent)
- Parameters Needed (brief hint like "date_from, date_to")
- Alternative (if any, with note when to use)

**Question categories (from CONTEXT.md):**

Reporting Queries (~4 questions):
- "What is my revenue?" / "Berapa pendapatan saya?"
- "What are my expenses?" / "Berapa pengeluaran saya?"
- "Show my sales trends" / "Tunjukkan tren penjualan"
- "What's my cash balance?" / "Berapa saldo kas saya?"

Data Lookup Queries (~4 questions):
- "Show invoice #123" / "Tampilkan faktur #123"
- "Find customer X" / "Cari pelanggan X"
- "What's the price of product Y?" / "Berapa harga produk Y?"
- "Show order details" / "Tampilkan detail pesanan"

Analytical Queries (~4 questions):
- "Who are my top customers?" / "Siapa pelanggan terbesar saya?"
- "What are my best selling products?" / (no direct tool - note this)
- "How much do I owe vendor X?" / "Berapa hutang saya ke vendor X?"
- "What's customer X's transaction history?" / "Apa riwayat transaksi pelanggan X?"

Status/Health Queries (~3 questions):
- "Any overdue invoices?" / "Ada faktur jatuh tempo?"
- "Pending deliveries?" / "Pengiriman yang tertunda?"
- "Total outstanding receivables?" / "Total piutang?"

**Confidence guidelines:**
- Definitive: Only one tool makes sense (e.g., "Show invoice #123" -> invoice_get_detail)
- Context-dependent: Need more info (e.g., "What are my sales?" could be list or summary)

**Format each row like:**
```
| What is my revenue? / Berapa pendapatan saya? | financial_sales_summary | Definitive | date_from, date_to | invoice_get_totals (if need outstanding/paid breakdown) |
```
  </action>
  <verify>
File exists at docs/tools/disambiguation.md with:
- At least 12 business questions
- Both English and Indonesian phrasings
- Confidence column with Definitive/Context-dependent values
- Parameter hints in each row
  </verify>
  <done>Business question matrix covers all 4 question categories with bilingual support and confidence indicators</done>
</task>

<task type="auto">
  <name>Task 2: Create tool choosing guide</name>
  <files>docs/tools/choosing.md, mkdocs.yml</files>
  <action>
Create `docs/tools/choosing.md` with detailed overlap explanations.

**Structure:**
1. Header explaining when to read this page
2. One section per overlap pair/group

**Overlap sections to document:**

## Choosing Between Sales Tools

### invoice_list_sales vs financial_sales_summary
- invoice_list_sales: Individual invoice records, filter by customer/status/date
- financial_sales_summary: Aggregated totals by customer, ranked by revenue
- **Use invoice_list_sales when:** You need specific invoice details, want to see unpaid invoices, filter by status
- **Use financial_sales_summary when:** You want top customers ranked, need total sales figure, comparing customer performance

### invoice_list_sales vs invoice_get_totals
- invoice_list_sales: Individual records
- invoice_get_totals: Summary totals (count, total, paid, outstanding, overdue)
- **Use invoice_list_sales when:** You need to see specific invoices
- **Use invoice_get_totals when:** You only need aggregate numbers

## Choosing Between Contact Tools

### contact_list vs financial_sales_summary (for customer questions)
- contact_list: Search contacts by name/email, get contact info
- financial_sales_summary: Get customers ranked by sales volume
- **Use contact_list when:** Looking up customer info, searching by name
- **Use financial_sales_summary when:** Want to know top customers by revenue

### contact_get_transactions vs invoice_list_sales with contact_id
- contact_get_transactions: All transaction types for a contact
- invoice_list_sales with contact_id: Only invoices for that customer
- **Use contact_get_transactions when:** Want full history (invoices, payments, credits)
- **Use invoice_list_sales when:** Only interested in sales invoices

## Choosing Between Product Tools

### product_list vs product_search_by_sku
- product_list: Browse/search products by name, optional inventory
- product_search_by_sku: Direct lookup by exact SKU
- **Use product_list when:** Browsing products, searching by name/description
- **Use product_search_by_sku when:** You have the exact SKU and want quick lookup

## Choosing Between Order and Invoice Tools

### order_list_sales vs invoice_list_sales
- Orders are pre-invoice (quotations, confirmed orders before billing)
- Invoices are post-billing (actual bills sent to customers)
- **Use order_list_sales when:** Looking at confirmed orders not yet invoiced
- **Use invoice_list_sales when:** Looking at billed transactions

**Update mkdocs.yml:**
Add both new pages to the Tools navigation section, before or after the domain pages:
```yaml
- Tools:
  - Overview: tools/index.md
  - Find the Right Tool: tools/disambiguation.md
  - Choosing Between Tools: tools/choosing.md
  - Sales:
    ...
```
  </action>
  <verify>
- File exists at docs/tools/choosing.md with at least 5 overlap comparisons
- Each comparison has "Use X when" and "Use Y when" guidance
- mkdocs.yml updated with both new pages in Tools section
- `cd /Users/kevinzakaria/developers/kledo-api-mcp && mkdocs build` succeeds
  </verify>
  <done>Tool overlap documentation explains all major tool choice decisions with clear guidance</done>
</task>

</tasks>

<verification>
1. `cat docs/tools/disambiguation.md | grep -c "Definitive\|Context-dependent"` returns >= 12 (confidence markers)
2. `cat docs/tools/choosing.md | grep -c "Use.*when"` returns >= 10 (guidance phrases)
3. `grep -q "disambiguation.md" mkdocs.yml && echo "nav updated"` succeeds
4. `cd /Users/kevinzakaria/developers/kledo-api-mcp && mkdocs build` completes without errors
</verification>

<success_criteria>
- Disambiguation matrix has 12-15 bilingual business questions mapped to tools
- Each question has confidence indicator (Definitive/Context-dependent)
- Choosing guide covers 5+ tool overlap scenarios with clear "Use X when" guidance
- Both pages integrated into MkDocs navigation
- Documentation builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/03-tool-enhancement/03-01-SUMMARY.md`
</output>
