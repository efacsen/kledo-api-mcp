---
phase: 02-documentation-layer
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/extract_tools.py
  - docs/tools/index.md
  - docs/tools/sales/invoices.md
  - docs/tools/sales/orders.md
  - docs/tools/purchases/invoices.md
  - docs/tools/purchases/orders.md
  - docs/tools/inventory/products.md
  - docs/tools/inventory/deliveries.md
  - docs/tools/finance/reports.md
  - docs/tools/crm/contacts.md
  - docs/tools/system/utilities.md
autonomous: true

must_haves:
  truths:
    - "Tool catalog shows all 20 MCP tools with endpoint mapping"
    - "Tools organized by business domain (Sales, Purchases, Inventory, Finance, CRM, System)"
    - "Each tool has name, description, parameters, and example documented"
  artifacts:
    - path: "scripts/extract_tools.py"
      provides: "Tool introspection from code"
      contains: "get_tools()"
    - path: "docs/tools/index.md"
      provides: "API endpoint catalog"
      contains: "invoice_list_sales"
    - path: "docs/tools/sales/invoices.md"
      provides: "Sales invoice tool documentation"
      contains: "invoice_get_detail"
  key_links:
    - from: "scripts/extract_tools.py"
      to: "src/tools/*.py"
      via: "importlib"
      pattern: "TOOL_MODULES"
    - from: "docs/tools/index.md"
      to: "docs/tools/*/*.md"
      via: "navigation links"
      pattern: "tools/"
---

<objective>
Create tool catalog and domain-organized tool documentation pages from existing MCP tool definitions.

Purpose: Fulfill DOCS-01 (API endpoint catalog mapping each endpoint to its operation and entity).
Output: Complete tool documentation organized by business domain with introspection script for maintenance.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-documentation-layer/02-CONTEXT.md
@.planning/phases/02-documentation-layer/02-RESEARCH.md

Source files:
@src/tools/invoices.py
@src/tools/contacts.py
@src/tools/products.py
@src/tools/orders.py
@src/tools/deliveries.py
@src/tools/financial.py
@src/tools/utilities.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create tool extraction script</name>
  <files>scripts/extract_tools.py</files>
  <action>
Create scripts/extract_tools.py that:

1. Imports all tool modules:
   - src.tools.invoices
   - src.tools.contacts
   - src.tools.products
   - src.tools.orders
   - src.tools.deliveries
   - src.tools.financial
   - src.tools.utilities

2. Extracts tool metadata by calling each module's get_tools() function:
   - name: tool name (e.g., "invoice_list_sales")
   - description: tool description
   - parameters: inputSchema.properties
   - required: inputSchema.required

3. Outputs JSON or prints formatted catalog:
   ```python
   def extract_tool_catalog() -> list[dict]:
       """Extract all tools from tool modules."""
       tools = []
       for module_path in TOOL_MODULES:
           module = importlib.import_module(module_path)
           for tool in module.get_tools():
               tools.append({
                   "name": tool.name,
                   "description": tool.description,
                   "module": module_path.split(".")[-1],
                   "parameters": tool.inputSchema.get("properties", {}),
                   "required": tool.inputSchema.get("required", []),
               })
       return tools
   ```

4. Add CLI entry point:
   ```python
   if __name__ == "__main__":
       import json
       catalog = extract_tool_catalog()
       print(json.dumps(catalog, indent=2))
   ```

Use RESEARCH.md "Extract Tool Catalog from Code" pattern as reference.
  </action>
  <verify>
    - python scripts/extract_tools.py outputs JSON with all tools
    - Each tool has name, description, module, parameters, required
    - Count should be ~20 tools across 7 modules
  </verify>
  <done>Tool extraction script produces complete catalog from code introspection</done>
</task>

<task type="auto">
  <name>Task 2: Create tool documentation pages by domain</name>
  <files>docs/tools/index.md, docs/tools/sales/invoices.md, docs/tools/sales/orders.md, docs/tools/purchases/invoices.md, docs/tools/purchases/orders.md, docs/tools/inventory/products.md, docs/tools/inventory/deliveries.md, docs/tools/finance/reports.md, docs/tools/crm/contacts.md, docs/tools/system/utilities.md</files>
  <action>
1. Create docs/tools/index.md (API Endpoint Catalog):
   - Title: "Tool Catalog"
   - Description: Overview of all MCP tools available
   - Summary table of all tools:
     | Tool | Domain | Description | Entity |
     |------|--------|-------------|--------|
     | invoice_list_sales | Sales | List sales invoices | Invoice |
     | ... | ... | ... | ... |
   - Links to domain pages

2. Create domain directories and pages:

   **docs/tools/sales/invoices.md:**
   - invoice_list_sales: List sales invoices with filtering
   - invoice_get_detail: Get invoice details with line items
   - invoice_get_totals: Get invoice summary totals

   **docs/tools/sales/orders.md:**
   - order_list_sales: List sales orders
   - order_get_detail: Get order details

   **docs/tools/purchases/invoices.md:**
   - invoice_list_purchase: List purchase invoices (vendor bills)

   **docs/tools/purchases/orders.md:**
   - order_list_purchase: List purchase orders

   **docs/tools/inventory/products.md:**
   - product_list: List products with prices
   - product_get_detail: Get product details
   - product_search_by_sku: Find product by SKU (if exists)

   **docs/tools/inventory/deliveries.md:**
   - delivery_list: List deliveries
   - delivery_get_detail: Get delivery details
   - delivery_get_pending: Get pending deliveries (if exists)

   **docs/tools/finance/reports.md:**
   - financial_activity_team_report: Team activity report
   - financial_sales_summary: Sales by customer
   - financial_purchase_summary: Purchases by vendor
   - financial_bank_balances: Bank account balances

   **docs/tools/crm/contacts.md:**
   - contact_list: List customers and vendors
   - contact_get_detail: Get contact details
   - contact_get_transactions: Get contact transaction history

   **docs/tools/system/utilities.md:**
   - utility_clear_cache: Clear cached data
   - utility_get_cache_stats: Cache performance metrics
   - utility_test_connection: Test API connection

3. For each tool, document:
   - **Tool name** (as heading with anchor)
   - **Description**: From tool.description
   - **Parameters**: Table with name, type, required, description
   - **Example**: One request/response example (per CONTEXT.md decision)
   - **Related Entity**: Link to entity page

   Format example:
   ```markdown
   ## invoice_list_sales

   List sales invoices with optional filtering by customer, status, date range, or search term.

   ### Parameters

   | Parameter | Type | Required | Description |
   |-----------|------|----------|-------------|
   | search | string | No | Search term for invoice number |
   | contact_id | integer | No | Filter by customer ID |
   | status_id | integer | No | Filter by status (1=Draft, 2=Pending, 3=Paid) |
   | date_from | string | No | Start date (YYYY-MM-DD) |
   | date_to | string | No | End date (YYYY-MM-DD) |
   | per_page | integer | No | Results per page (default: 50) |

   ### Example

   **Request:**
   ```json
   {"contact_id": 123, "status_id": 2}
   ```

   **Response:** List of invoices with total amount, paid amount, and status.

   **Related Entity:** [Invoice](../../entities/invoice.md)
   ```

4. Update mkdocs.yml nav to include Tools section (if 02-01 runs first, otherwise create placeholder):
   - Tools:
     - Catalog: tools/index.md
     - Sales:
       - Invoices: tools/sales/invoices.md
       - Orders: tools/sales/orders.md
     - Purchases:
       - Invoices: tools/purchases/invoices.md
       - Orders: tools/purchases/orders.md
     - Inventory:
       - Products: tools/inventory/products.md
       - Deliveries: tools/inventory/deliveries.md
     - Finance:
       - Reports: tools/finance/reports.md
     - CRM:
       - Contacts: tools/crm/contacts.md
     - System:
       - Utilities: tools/system/utilities.md
  </action>
  <verify>
    - docs/tools/index.md lists all tools in summary table
    - All domain pages exist with tool documentation
    - Each tool has parameters table and example
    - Links between tools and entities work (if 02-01 complete)
  </verify>
  <done>Tool catalog and domain pages document all MCP tools with parameters and examples</done>
</task>

</tasks>

<verification>
After all tasks:
1. `python scripts/extract_tools.py` outputs all tools as JSON
2. docs/tools/index.md shows complete tool catalog table
3. All 6 domain directories have tool documentation pages
4. Each tool has name, description, parameters table, example
5. Navigation to tool pages works in MkDocs (when combined with 02-01)
</verification>

<success_criteria>
- Tool extraction script works and is maintainable
- API endpoint catalog complete (DOCS-01)
- Tools organized by business domain per CONTEXT.md
- Each tool documented with one example per CONTEXT.md
</success_criteria>

<output>
After completion, create `.planning/phases/02-documentation-layer/02-02-SUMMARY.md`
</output>
