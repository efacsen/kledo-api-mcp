{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Kledo MCP Server Documentation","text":"<p>MCP Server for Kledo accounting software API, enabling AI agents to query business data.</p>"},{"location":"#overview","title":"Overview","text":"<p>This MCP (Model Context Protocol) server provides AI agents with structured access to Kledo accounting data including:</p> <ul> <li>Contacts - Customers and vendors</li> <li>Products - Product catalog with inventory tracking</li> <li>Invoices - Sales and purchase invoices</li> <li>Orders - Sales and purchase orders</li> <li>Deliveries - Shipment tracking</li> <li>Accounts - Bank and cash accounts</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#using-with-claude-desktop","title":"Using with Claude Desktop","text":"<p>Add the server to your Claude Desktop configuration:</p> <pre><code>{\n  \"mcpServers\": {\n    \"kledo\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"src.main\"],\n      \"env\": {\n        \"KLEDO_API_URL\": \"https://api.kledo.com\",\n        \"KLEDO_API_KEY\": \"your-api-key\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"#documentation-sections","title":"Documentation Sections","text":"<ul> <li>Entity Registry - Business entity models and relationships</li> <li>Tools Catalog - Available MCP tools for querying data</li> </ul>"},{"location":"ERD_README/","title":"Entity Relationship Diagram","text":""},{"location":"ERD_README/#generating-the-erd","title":"Generating the ERD","text":"<p>The ERD diagram (<code>erd.png</code>) is generated from Pydantic entity models using <code>erdantic</code>.</p>"},{"location":"ERD_README/#prerequisites","title":"Prerequisites","text":"<ol> <li> <p>Install Graphviz (system binary required):    <pre><code># macOS\nbrew install graphviz\n\n# Ubuntu/Debian\nsudo apt install graphviz\n\n# Windows (via chocolatey)\nchoco install graphviz\n</code></pre></p> </li> <li> <p>Install erdantic (Python package):    <pre><code>pip install erdantic\n</code></pre></p> </li> </ol>"},{"location":"ERD_README/#generate-the-diagram","title":"Generate the Diagram","text":"<p>Run the generation script:</p> <pre><code>python scripts/generate_entity_docs.py\n</code></pre> <p>Or directly via Python:</p> <pre><code>import erdantic as erd\nfrom src.entities.models import Contact, Product, Invoice, Order, Delivery, Account\n\ndiagram = erd.create(Contact, Product, Invoice, Order, Delivery, Account)\ndiagram.draw(\"docs/erd.png\")\n</code></pre>"},{"location":"ERD_README/#entity-overview","title":"Entity Overview","text":"<p>The Kledo entity registry includes 6 main entities:</p> Entity Description Key Relationships Contact Customer or Vendor Referenced by invoices Product Inventory item Used in line items Invoice Sales/Purchase document Contains InvoiceItems Order Sales/Purchase order Contains OrderItems Delivery Shipment document Contains DeliveryItems Account Chart of accounts entry Used for GL posting"},{"location":"ERD_README/#embedded-types","title":"Embedded Types","text":"<ul> <li><code>Warehouse</code> - Storage location for products</li> <li><code>InvoiceItem</code> - Line item within an Invoice</li> <li><code>OrderItem</code> - Line item within an Order</li> <li><code>DeliveryItem</code> - Line item within a Delivery</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Quick start guide for using the Kledo MCP Server with AI agents.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11+</li> <li>Kledo API credentials</li> <li>Claude Desktop (or other MCP-compatible client)</li> </ul>"},{"location":"getting-started/#installation","title":"Installation","text":"<ol> <li> <p>Clone the repository:    <pre><code>git clone https://github.com/your-org/kledo-api-mcp.git\ncd kledo-api-mcp\n</code></pre></p> </li> <li> <p>Install dependencies:    <pre><code>pip install -r requirements.txt\n</code></pre></p> </li> <li> <p>Configure environment:    <pre><code>cp .env.example .env\n# Edit .env with your Kledo API credentials\n</code></pre></p> </li> </ol>"},{"location":"getting-started/#environment-variables","title":"Environment Variables","text":"Variable Description Required <code>KLEDO_API_URL</code> Your Kledo API base URL Yes <code>KLEDO_API_TOKEN</code> API authentication token Yes <code>KLEDO_COMPANY_ID</code> Your company ID in Kledo Yes"},{"location":"getting-started/#claude-desktop-configuration","title":"Claude Desktop Configuration","text":"<p>Add to your Claude Desktop config:</p> <p>macOS: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></p> <p>Windows: <code>%APPDATA%\\Claude\\claude_desktop_config.json</code></p> <pre><code>{\n  \"mcpServers\": {\n    \"kledo\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"src.server\"],\n      \"cwd\": \"/path/to/kledo-api-mcp\",\n      \"env\": {\n        \"KLEDO_API_URL\": \"https://api.kledo.com\",\n        \"KLEDO_API_TOKEN\": \"your-token-here\",\n        \"KLEDO_COMPANY_ID\": \"your-company-id\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/#quick-examples","title":"Quick Examples","text":""},{"location":"getting-started/#list-recent-invoices","title":"List recent invoices","text":"<p>Ask Claude: \"Show me the last 10 sales invoices\"</p>"},{"location":"getting-started/#find-a-customer","title":"Find a customer","text":"<p>Ask Claude: \"Find customer named 'Acme Corp'\"</p>"},{"location":"getting-started/#check-inventory","title":"Check inventory","text":"<p>Ask Claude: \"What's the stock level for product SKU ABC123?\"</p>"},{"location":"getting-started/#financial-summary","title":"Financial summary","text":"<p>Ask Claude: \"What's our total outstanding receivables?\"</p>"},{"location":"getting-started/#sales-report","title":"Sales report","text":"<p>Ask Claude: \"Show me sales by customer for this month\"</p>"},{"location":"getting-started/#pending-shipments","title":"Pending shipments","text":"<p>Ask Claude: \"What orders are waiting to be shipped?\"</p>"},{"location":"getting-started/#tool-discovery","title":"Tool Discovery","text":"<p>For AI agents: The <code>llms.txt</code> file in the project root provides AI-optimized tool discovery with natural language hints for each tool.</p> <p>For developers: Browse the Tool Catalog for complete API documentation.</p>"},{"location":"getting-started/#entity-reference","title":"Entity Reference","text":"<p>See Entity Registry for data model documentation and ERD diagrams.</p>"},{"location":"getting-started/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/#connection-issues","title":"Connection Issues","text":"<ol> <li> <p>Test the API connection:    Ask Claude: \"Test the Kledo API connection\"</p> </li> <li> <p>Check your credentials in <code>.env</code></p> </li> <li> <p>Verify your Kledo API token is active</p> </li> </ol>"},{"location":"getting-started/#stale-data","title":"Stale Data","text":"<p>If data seems outdated: Ask Claude: \"Clear the cache and refresh\"</p>"},{"location":"getting-started/#missing-data","title":"Missing Data","text":"<p>Ensure your Kledo user has appropriate permissions for the data you're querying.</p>"},{"location":"entities/","title":"Entity Registry","text":"<p>The Kledo MCP Server uses a typed entity registry built on Pydantic models. This provides:</p> <ul> <li>Type safety - All data validated against defined schemas</li> <li>JSON Schema generation - Automatic schema export for tool definitions</li> <li>Relationship metadata - Entity relationships documented via <code>json_schema_extra</code></li> </ul>"},{"location":"entities/#entity-overview","title":"Entity Overview","text":"Entity Description Key Relationships Contact Customers and vendors Referenced by Invoice, Order, Delivery Product Product catalog items Contains Warehouse (stock), referenced by line items Invoice Sales/purchase invoices References Contact, contains InvoiceItem Order Sales/purchase orders References Contact, contains OrderItem Delivery Shipment records References Contact, contains DeliveryItem Account Bank/cash accounts Used in financial reports"},{"location":"entities/#entity-relationship-diagram","title":"Entity Relationship Diagram","text":"<pre><code>classDiagram\n    class Contact {\n        +int id\n        +str name\n        +int type_id\n        +str email\n        +Decimal total_receivable\n        +Decimal total_payable\n    }\n    class Product {\n        +int id\n        +str name\n        +str code\n        +Decimal price\n        +Decimal buy_price\n        +Decimal qty\n        +list~Warehouse~ warehouses\n    }\n    class Warehouse {\n        +str name\n        +Decimal qty\n    }\n    class Invoice {\n        +int id\n        +str trans_number\n        +date trans_date\n        +int contact_id\n        +Decimal grand_total\n        +list~InvoiceItem~ detail\n    }\n    class InvoiceItem {\n        +int product_id\n        +str desc\n        +Decimal qty\n        +Decimal price\n        +Decimal amount\n    }\n    class Order {\n        +int id\n        +str trans_number\n        +date trans_date\n        +int contact_id\n        +Decimal grand_total\n        +list~OrderItem~ detail\n    }\n    class OrderItem {\n        +int product_id\n        +str desc\n        +Decimal qty\n        +Decimal price\n        +Decimal amount\n    }\n    class Delivery {\n        +int id\n        +str trans_number\n        +date trans_date\n        +int contact_id\n        +list~DeliveryItem~ detail\n    }\n    class DeliveryItem {\n        +int product_id\n        +str desc\n        +Decimal qty\n    }\n    class Account {\n        +int id\n        +str name\n        +str account_number\n        +Decimal balance\n        +str currency\n    }\n\n    Invoice --&gt; Contact : contact_id\n    Invoice *-- InvoiceItem : detail\n    Order --&gt; Contact : contact_id\n    Order *-- OrderItem : detail\n    Delivery --&gt; Contact : contact_id\n    Delivery *-- DeliveryItem : detail\n    InvoiceItem --&gt; Product : product_id\n    OrderItem --&gt; Product : product_id\n    DeliveryItem --&gt; Product : product_id\n    Product *-- Warehouse : warehouses</code></pre>"},{"location":"entities/#embedded-types","title":"Embedded Types","text":"<p>Some entities contain embedded types (nested models) rather than foreign key references:</p> Parent Embedded Type Description Invoice InvoiceItem Line items within an invoice Order OrderItem Line items within an order Delivery DeliveryItem Items being delivered Product Warehouse Stock quantity by warehouse location <p>These embedded types are documented on their parent entity pages.</p>"},{"location":"entities/#entity-registry-api","title":"Entity Registry API","text":"<p>Access entities programmatically via the loader module:</p> <pre><code>from src.entities.loader import (\n    get_entity_class,\n    get_all_entities,\n    get_entity_schema,\n    ENTITY_REGISTRY,\n    EMBEDDED_TYPES,\n)\n\n# Get entity class by name (case-insensitive)\nInvoice = get_entity_class(\"invoice\")\n\n# Get JSON schema for an entity\nschema = get_entity_schema(\"contact\")\n\n# List all registered entities\nfor name, cls in ENTITY_REGISTRY.items():\n    print(f\"{name}: {cls.__doc__}\")\n</code></pre>"},{"location":"entities/account/","title":"Account","text":"<p>Bank or cash account in the Kledo financial system.</p> <p>Accounts represent financial accounts used to track money - bank accounts, cash on hand, credit cards, etc. They are used in financial reports and transactions.</p>"},{"location":"entities/account/#relationships","title":"Relationships","text":"<pre><code>classDiagram\n    class Account {\n        +int id\n        +str name\n        +str account_number\n        +Decimal balance\n        +str currency\n        +str account_type\n        +bool is_active\n    }\n\n    note for Account \"Standalone entity used in\\nfinancial reports and transactions\"</code></pre>"},{"location":"entities/account/#fields","title":"Fields","text":"Field Type Description <code>id</code> int Unique identifier (from BaseEntity) <code>name</code> str Account name (e.g., 'BCA Checking') <code>account_number</code> str (optional) Bank account number <code>balance</code> Decimal Current balance <code>currency</code> str Currency code (ISO 4217), default: IDR <code>account_type</code> str (optional) Account type (e.g., 'bank', 'cash', 'credit_card') <code>is_active</code> bool Whether account is active"},{"location":"entities/account/#account-types","title":"Account Types","text":"account_type Description <code>bank</code> Bank checking/savings account <code>cash</code> Physical cash on hand <code>credit_card</code> Credit card account"},{"location":"entities/account/#related-tools","title":"Related Tools","text":"<ul> <li><code>financial_bank_balances</code> - Get all bank account balances</li> </ul>"},{"location":"entities/account/#example","title":"Example","text":"<pre><code>{\n  \"id\": 101,\n  \"name\": \"BCA Checking - Operations\",\n  \"account_number\": \"1234567890\",\n  \"balance\": \"50000000.00\",\n  \"currency\": \"IDR\",\n  \"account_type\": \"bank\",\n  \"is_active\": true\n}\n</code></pre>"},{"location":"entities/contact/","title":"Contact","text":"<p>Customer or Vendor contact in the Kledo system.</p> <p>Contacts represent the parties you do business with - customers who buy from you (receivables) and vendors you buy from (payables). A contact can be both a customer and vendor.</p>"},{"location":"entities/contact/#relationships","title":"Relationships","text":"<pre><code>classDiagram\n    class Contact {\n        +int id\n        +str name\n        +str company\n        +str email\n        +str phone\n        +str address\n        +int type_id\n        +Decimal total_receivable\n        +Decimal total_payable\n    }\n    class Invoice {\n        +int contact_id\n        +str trans_number\n    }\n    class Order {\n        +int contact_id\n        +str trans_number\n    }\n    class Delivery {\n        +int contact_id\n        +str trans_number\n    }\n\n    Invoice --&gt; Contact : contact_id\n    Order --&gt; Contact : contact_id\n    Delivery --&gt; Contact : contact_id</code></pre>"},{"location":"entities/contact/#fields","title":"Fields","text":"Field Type Description <code>id</code> int Unique identifier (from BaseEntity) <code>name</code> str Contact's full name <code>company</code> str (optional) Company/organization name <code>email</code> str (optional) Email address <code>phone</code> str (optional) Phone number <code>address</code> str (optional) Physical address <code>type_id</code> int Contact type: 1=Customer, 2=Vendor, 3=Both <code>type_name</code> str (optional) Denormalized type name <code>total_receivable</code> Decimal Amount owed by this contact <code>total_payable</code> Decimal Amount owed to this contact"},{"location":"entities/contact/#contact-types","title":"Contact Types","text":"type_id Name Description 1 Customer Buys from you, creates receivables 2 Vendor You buy from them, creates payables 3 Both Acts as both customer and vendor"},{"location":"entities/contact/#related-tools","title":"Related Tools","text":"<ul> <li><code>contact_list</code> - List customers and vendors with filtering</li> <li><code>contact_get_detail</code> - Get contact details by ID</li> <li><code>contact_get_transactions</code> - Get transaction history for a contact</li> </ul>"},{"location":"entities/contact/#example","title":"Example","text":"<pre><code>{\n  \"id\": 1234,\n  \"name\": \"PT Maju Bersama\",\n  \"company\": \"PT Maju Bersama\",\n  \"email\": \"info@majubersama.co.id\",\n  \"phone\": \"+62-21-555-1234\",\n  \"address\": \"Jl. Sudirman No. 123, Jakarta\",\n  \"type_id\": 1,\n  \"type_name\": \"Customer\",\n  \"total_receivable\": \"15000000.00\",\n  \"total_payable\": \"0.00\"\n}\n</code></pre>"},{"location":"entities/delivery/","title":"Delivery","text":"<p>Shipment/delivery record tracking the physical movement of goods.</p> <p>Deliveries document when products are shipped to customers or received from vendors. They link to orders and track shipping details like carrier and tracking number.</p>"},{"location":"entities/delivery/#relationships","title":"Relationships","text":"<pre><code>classDiagram\n    class Delivery {\n        +int id\n        +str trans_number\n        +date trans_date\n        +int contact_id\n        +str ref_number\n        +str tracking_number\n        +list~DeliveryItem~ detail\n    }\n    class DeliveryItem {\n        +int product_id\n        +str desc\n        +Decimal qty\n    }\n    class Contact {\n        +int id\n        +str name\n    }\n    class Product {\n        +int id\n        +str name\n    }\n    class Order {\n        +str trans_number\n    }\n\n    Delivery --&gt; Contact : contact_id\n    Delivery --&gt; Order : ref_number\n    Delivery *-- DeliveryItem : detail\n    DeliveryItem --&gt; Product : product_id</code></pre>"},{"location":"entities/delivery/#fields","title":"Fields","text":"Field Type Description <code>id</code> int Unique identifier (from BaseEntity) <code>trans_number</code> str Delivery number (e.g., DEL-2026-0001) <code>trans_date</code> date Delivery date <code>contact_id</code> int (optional) Customer receiving delivery <code>contact_name</code> str (optional) Denormalized contact name <code>status_id</code> int Delivery status ID <code>status_name</code> str (optional) Denormalized status name <code>shipping_company_name</code> str (optional) Carrier/shipping company <code>tracking_number</code> str (optional) Shipment tracking number <code>shipping_address</code> str (optional) Destination address <code>ref_number</code> str (optional) Reference to source order <code>detail</code> list[DeliveryItem] Items being delivered <code>memo</code> str (optional) Delivery notes"},{"location":"entities/delivery/#embedded-type-deliveryitem","title":"Embedded Type: DeliveryItem","text":"<p>Item being delivered. Embedded within Delivery.</p> Field Type Description <code>product_id</code> int (optional) Product reference <code>desc</code> str Item description <code>qty</code> Decimal Quantity being delivered"},{"location":"entities/delivery/#related-tools","title":"Related Tools","text":"<ul> <li><code>delivery_list</code> - List deliveries with filtering</li> <li><code>delivery_get_detail</code> - Get delivery details</li> <li><code>delivery_get_pending</code> - Get pending (unshipped) deliveries</li> </ul>"},{"location":"entities/delivery/#example","title":"Example","text":"<pre><code>{\n  \"id\": 7890,\n  \"trans_number\": \"DEL-2026-0023\",\n  \"trans_date\": \"2026-01-18\",\n  \"contact_id\": 1234,\n  \"contact_name\": \"PT Maju Bersama\",\n  \"status_id\": 2,\n  \"status_name\": \"Shipped\",\n  \"shipping_company_name\": \"JNE Express\",\n  \"tracking_number\": \"JNE1234567890\",\n  \"shipping_address\": \"Jl. Sudirman No. 123, Jakarta\",\n  \"ref_number\": \"SO-2026-0015\",\n  \"detail\": [\n    {\n      \"product_id\": 5678,\n      \"desc\": \"Widget Pro X100\",\n      \"qty\": \"3.00\"\n    }\n  ],\n  \"memo\": \"Handle with care\"\n}\n</code></pre>"},{"location":"entities/invoice/","title":"Invoice","text":"<p>Sales or Purchase invoice representing a financial transaction.</p> <p>Invoices record the sale of goods/services to customers (sales invoice) or purchases from vendors (purchase invoice). Each invoice contains line items detailing the products/services transacted.</p>"},{"location":"entities/invoice/#relationships","title":"Relationships","text":"<pre><code>classDiagram\n    class Invoice {\n        +int id\n        +str trans_number\n        +date trans_date\n        +date due_date\n        +int contact_id\n        +Decimal grand_total\n        +Decimal amount_paid\n        +list~InvoiceItem~ detail\n    }\n    class InvoiceItem {\n        +int product_id\n        +str desc\n        +Decimal qty\n        +Decimal price\n        +Decimal amount\n    }\n    class Contact {\n        +int id\n        +str name\n    }\n    class Product {\n        +int id\n        +str name\n    }\n\n    Invoice --&gt; Contact : contact_id\n    Invoice *-- InvoiceItem : detail\n    InvoiceItem --&gt; Product : product_id</code></pre>"},{"location":"entities/invoice/#fields","title":"Fields","text":"Field Type Description <code>id</code> int Unique identifier (from BaseEntity) <code>trans_number</code> str Invoice number (e.g., INV-2026-0001) <code>trans_date</code> date Invoice date <code>due_date</code> date (optional) Payment due date <code>contact_id</code> int Customer/vendor reference <code>contact_name</code> str (optional) Denormalized contact name <code>status_id</code> int Invoice status ID <code>status_name</code> str (optional) Denormalized status name <code>subtotal</code> Decimal Sum of line items before tax <code>tax_amount</code> Decimal Total tax amount <code>grand_total</code> Decimal Total including tax <code>amount_paid</code> Decimal Amount already paid <code>detail</code> list[InvoiceItem] Invoice line items <code>memo</code> str (optional) Internal notes"},{"location":"entities/invoice/#embedded-type-invoiceitem","title":"Embedded Type: InvoiceItem","text":"<p>Line item within an invoice. Embedded within Invoice.</p> Field Type Description <code>product_id</code> int (optional) Product reference <code>desc</code> str Item description <code>qty</code> Decimal Quantity <code>price</code> Decimal Unit price <code>amount</code> Decimal Line total (qty * price)"},{"location":"entities/invoice/#related-tools","title":"Related Tools","text":"<ul> <li><code>invoice_list_sales</code> - List sales invoices with filtering</li> <li><code>invoice_list_purchase</code> - List purchase invoices (vendor bills)</li> <li><code>invoice_get_detail</code> - Get invoice details with line items</li> <li><code>invoice_get_totals</code> - Get invoice summary totals</li> </ul>"},{"location":"entities/invoice/#example","title":"Example","text":"<pre><code>{\n  \"id\": 9012,\n  \"trans_number\": \"INV-2026-0042\",\n  \"trans_date\": \"2026-01-15\",\n  \"due_date\": \"2026-02-14\",\n  \"contact_id\": 1234,\n  \"contact_name\": \"PT Maju Bersama\",\n  \"status_id\": 2,\n  \"status_name\": \"Sent\",\n  \"subtotal\": \"500000.00\",\n  \"tax_amount\": \"55000.00\",\n  \"grand_total\": \"555000.00\",\n  \"amount_paid\": \"0.00\",\n  \"detail\": [\n    {\n      \"product_id\": 5678,\n      \"desc\": \"Widget Pro X100\",\n      \"qty\": \"2.00\",\n      \"price\": \"250000.00\",\n      \"amount\": \"500000.00\"\n    }\n  ],\n  \"memo\": \"Urgent order\"\n}\n</code></pre>"},{"location":"entities/order/","title":"Order","text":"<p>Sales or Purchase order representing a business commitment.</p> <p>Orders capture the intent to sell to a customer (sales order) or purchase from a vendor (purchase order). Orders typically precede invoices and deliveries.</p>"},{"location":"entities/order/#relationships","title":"Relationships","text":"<pre><code>classDiagram\n    class Order {\n        +int id\n        +str trans_number\n        +date trans_date\n        +int contact_id\n        +str order_type\n        +Decimal grand_total\n        +list~OrderItem~ detail\n    }\n    class OrderItem {\n        +int product_id\n        +str desc\n        +Decimal qty\n        +Decimal price\n        +Decimal amount\n    }\n    class Contact {\n        +int id\n        +str name\n    }\n    class Product {\n        +int id\n        +str name\n    }\n\n    Order --&gt; Contact : contact_id\n    Order *-- OrderItem : detail\n    OrderItem --&gt; Product : product_id</code></pre>"},{"location":"entities/order/#fields","title":"Fields","text":"Field Type Description <code>id</code> int Unique identifier (from BaseEntity) <code>trans_number</code> str Order number (e.g., SO-2026-0001) <code>trans_date</code> date Order date <code>contact_id</code> int Customer (sales) or Vendor (purchase) reference <code>contact_name</code> str (optional) Denormalized contact name <code>status_id</code> int Order status ID <code>status_name</code> str (optional) Denormalized status name <code>subtotal</code> Decimal Sum of line items <code>grand_total</code> Decimal Total including adjustments <code>detail</code> list[OrderItem] Order line items <code>order_type</code> str Order type: 'sales' or 'purchase'"},{"location":"entities/order/#embedded-type-orderitem","title":"Embedded Type: OrderItem","text":"<p>Line item within an order. Embedded within Order.</p> Field Type Description <code>product_id</code> int (optional) Product reference <code>desc</code> str Item description <code>qty</code> Decimal Quantity ordered <code>price</code> Decimal Unit price <code>amount</code> Decimal Line total"},{"location":"entities/order/#order-types","title":"Order Types","text":"order_type Description <code>sales</code> Sales order from customer <code>purchase</code> Purchase order to vendor"},{"location":"entities/order/#related-tools","title":"Related Tools","text":"<ul> <li><code>order_list_sales</code> - List sales orders with filtering</li> <li><code>order_list_purchase</code> - List purchase orders</li> <li><code>order_get_detail</code> - Get order details with line items</li> </ul>"},{"location":"entities/order/#example","title":"Example","text":"<pre><code>{\n  \"id\": 3456,\n  \"trans_number\": \"SO-2026-0015\",\n  \"trans_date\": \"2026-01-10\",\n  \"contact_id\": 1234,\n  \"contact_name\": \"PT Maju Bersama\",\n  \"status_id\": 1,\n  \"status_name\": \"Open\",\n  \"subtotal\": \"750000.00\",\n  \"grand_total\": \"750000.00\",\n  \"order_type\": \"sales\",\n  \"detail\": [\n    {\n      \"product_id\": 5678,\n      \"desc\": \"Widget Pro X100\",\n      \"qty\": \"3.00\",\n      \"price\": \"250000.00\",\n      \"amount\": \"750000.00\"\n    }\n  ]\n}\n</code></pre>"},{"location":"entities/product/","title":"Product","text":"<p>Product or service item in the Kledo inventory system.</p> <p>Products represent items you sell to customers or purchase from vendors. Each product tracks pricing, inventory quantities, and stock distribution across warehouses.</p>"},{"location":"entities/product/#relationships","title":"Relationships","text":"<pre><code>classDiagram\n    class Product {\n        +int id\n        +str name\n        +str code\n        +Decimal price\n        +Decimal buy_price\n        +Decimal qty\n        +list~Warehouse~ warehouses\n    }\n    class Warehouse {\n        +str name\n        +Decimal qty\n    }\n    class InvoiceItem {\n        +int product_id\n        +Decimal qty\n    }\n    class OrderItem {\n        +int product_id\n        +Decimal qty\n    }\n    class DeliveryItem {\n        +int product_id\n        +Decimal qty\n    }\n\n    Product *-- Warehouse : warehouses\n    InvoiceItem --&gt; Product : product_id\n    OrderItem --&gt; Product : product_id\n    DeliveryItem --&gt; Product : product_id</code></pre>"},{"location":"entities/product/#fields","title":"Fields","text":"Field Type Description <code>id</code> int Unique identifier (from BaseEntity) <code>name</code> str Product name <code>code</code> str (optional) SKU/product code <code>description</code> str (optional) Product description <code>price</code> Decimal Selling price <code>buy_price</code> Decimal Cost/purchase price <code>qty</code> Decimal Total stock quantity <code>category_id</code> int (optional) Product category reference <code>category_name</code> str (optional) Denormalized category name <code>warehouses</code> list[Warehouse] Stock by warehouse"},{"location":"entities/product/#embedded-type-warehouse","title":"Embedded Type: Warehouse","text":"<p>Stock location with quantity. Embedded within Product.</p> Field Type Description <code>name</code> str Warehouse name <code>qty</code> Decimal Stock quantity in this warehouse"},{"location":"entities/product/#related-tools","title":"Related Tools","text":"<ul> <li><code>product_list</code> - List products with prices and inventory</li> <li><code>product_get_detail</code> - Get product details by ID</li> <li><code>product_search_by_sku</code> - Find product by SKU code</li> </ul>"},{"location":"entities/product/#example","title":"Example","text":"<pre><code>{\n  \"id\": 5678,\n  \"name\": \"Widget Pro X100\",\n  \"code\": \"WPX-100\",\n  \"description\": \"Professional grade widget with enhanced features\",\n  \"price\": \"250000.00\",\n  \"buy_price\": \"175000.00\",\n  \"qty\": \"150.00\",\n  \"category_id\": 3,\n  \"category_name\": \"Electronics\",\n  \"warehouses\": [\n    {\"name\": \"Jakarta Warehouse\", \"qty\": \"100.00\"},\n    {\"name\": \"Surabaya Warehouse\", \"qty\": \"50.00\"}\n  ]\n}\n</code></pre>"},{"location":"technical/","title":"Technical Documentation Index","text":"<p>Internal technical documentation for Kledo API MCP Server development and architecture.</p> <p>Last Updated: January 24, 2026, 5:20 PM</p>"},{"location":"technical/#documentation-guide","title":"\ud83d\udcda Documentation Guide","text":""},{"location":"technical/#start-here-for-next-session","title":"\ud83d\udd25 START HERE (For Next Session)","text":"<ol> <li>QUICK_DECISIONS_SUMMARY.md \u26a1 2 min read</li> <li>Quick reference of all decisions</li> <li>Action items</li> <li> <p>Priority order</p> </li> <li> <p>SESSION_HANDOFF.md \ud83d\udccb 15 min read</p> </li> <li>Complete context for continuation</li> <li>All decisions with rationale</li> <li>Implementation roadmap</li> <li>Questions for next session</li> </ol>"},{"location":"technical/#reference-documentation","title":"\ud83d\udcd6 Reference Documentation","text":""},{"location":"technical/#architecture-design","title":"Architecture &amp; Design","text":"<p>FIELD_MAPPING_DECISION.md \ud83c\udfd7\ufe0f 10 min read - What: Convert Kledo fields \u2192 Domain model decision - Why: Architecture analysis &amp; cost-benefit - How: Implementation plan - Use: Reference when implementing mapper layer</p> <p>API_ARCHITECTURE.md \ud83d\udce1 20 min read - What: Complete API structure &amp; tool analysis - Content:   - 13 endpoint categories   - 75+ invoice fields   - Current 25-tool breakdown   - Token economics   - Consolidation plan - Use: API reference, understanding data structure</p>"},{"location":"technical/#analytics-capabilities","title":"Analytics &amp; Capabilities","text":"<p>ANALYTICS_CAPABILITY_MAP.md \ud83d\udcca 30 min read - What: Complete mapping of possible reports - Content:   - 60+ reports across 8 categories   - Sample outputs   - Formula examples   - Implementation priorities - Use: Planning what reports to build</p> <p>QUICK_REFERENCE.md \u26a1 5 min read - What: Developer cheat sheet - Content:   - Common queries   - Field definitions   - Code examples   - Performance tips - Use: Quick lookup during development</p>"},{"location":"technical/#file-organization","title":"\ud83d\uddc2\ufe0f File Organization","text":"<pre><code>docs/technical/\n\u251c\u2500\u2500 README.md                        \u2190 You are here\n\u2502\n\u251c\u2500\u2500 QUICK_DECISIONS_SUMMARY.md       \u2190 Quick reference (START HERE)\n\u251c\u2500\u2500 SESSION_HANDOFF.md               \u2190 Full context (START HERE)\n\u2502\n\u251c\u2500\u2500 FIELD_MAPPING_DECISION.md        \u2190 Architecture decision\n\u251c\u2500\u2500 API_ARCHITECTURE.md              \u2190 Complete API reference\n\u251c\u2500\u2500 ANALYTICS_CAPABILITY_MAP.md      \u2190 All possible reports\n\u2514\u2500\u2500 QUICK_REFERENCE.md               \u2190 Developer cheat sheet\n</code></pre>"},{"location":"technical/#use-cases","title":"\ud83c\udfaf Use Cases","text":""},{"location":"technical/#saya-mau-lanjut-coding-dari-sesi-kemarin","title":"\"Saya mau lanjut coding dari sesi kemarin\"","text":"<p>\u2192 Read: SESSION_HANDOFF.md</p>"},{"location":"technical/#saya-butuh-quick-reminder-keputusan-apa-aja","title":"\"Saya butuh quick reminder keputusan apa aja\"","text":"<p>\u2192 Read: QUICK_DECISIONS_SUMMARY.md</p>"},{"location":"technical/#kenapa-kita-convert-field-names","title":"\"Kenapa kita convert field names?\"","text":"<p>\u2192 Read: FIELD_MAPPING_DECISION.md</p>"},{"location":"technical/#apa-aja-laporan-yang-bisa-dibuat","title":"\"Apa aja laporan yang bisa dibuat?\"","text":"<p>\u2192 Read: ANALYTICS_CAPABILITY_MAP.md</p>"},{"location":"technical/#apa-field-x-itu-artinya-apa","title":"\"Apa field X itu artinya apa?\"","text":"<p>\u2192 Read: QUICK_REFERENCE.md or API_ARCHITECTURE.md</p>"},{"location":"technical/#gimana-cara-pakai-tool-y","title":"\"Gimana cara pakai tool Y?\"","text":"<p>\u2192 Read: QUICK_REFERENCE.md</p>"},{"location":"technical/#key-facts-quick-reference","title":"\ud83d\udcca Key Facts (Quick Reference)","text":""},{"location":"technical/#current-state","title":"Current State","text":"<ul> <li>\u2705 MCP server: Working</li> <li>\u2705 API: Validated &amp; healthy</li> <li>\u2705 Tools: 25 operational</li> <li>\u2705 Data: Complete &amp; accurate</li> <li>\u23f8\ufe0f PAUSED: Domain model implementation</li> </ul>"},{"location":"technical/#decisions-made","title":"Decisions Made","text":"<ol> <li>\u2705 Convert Kledo fields \u2192 Domain model</li> <li>\u2705 Consolidate 25 \u2192 6-9 tools</li> <li>\u2705 Documentation organized</li> </ol>"},{"location":"technical/#next-steps","title":"Next Steps","text":"<ol> <li>\ud83d\ude80 Phase 1: Domain model (8 hours)</li> <li>\ud83d\udcca Phase 2: Tool consolidation (1-2 weeks)</li> <li>\ud83d\udcc8 Phase 3: Core reports (2-3 weeks)</li> </ol>"},{"location":"technical/#token-economics","title":"Token Economics","text":"<pre><code>Current:  ~6,250 tokens/request (25 tools)\nTarget:   ~1,500 tokens/request (9 tools)\nSavings:  75% reduction\n</code></pre>"},{"location":"technical/#field-definitions-proven","title":"Field Definitions (PROVEN)","text":"<pre><code>subtotal         = Revenue BEFORE tax (Penjualan Neto)\ntotal_tax        = PPN collected (11%)\namount_after_tax = Revenue INCLUDING tax (Penjualan Bruto)\n\n# Proven with 5 invoices:\nsubtotal + total_tax = amount_after_tax \u2705\n</code></pre>"},{"location":"technical/#search-index","title":"\ud83d\udd0d Search Index","text":"<p>Looking for...</p> <p>\"Domain model\" \u2192 FIELD_MAPPING_DECISION.md, SESSION_HANDOFF.md</p> <p>\"Tool consolidation\" \u2192 API_ARCHITECTURE.md, SESSION_HANDOFF.md</p> <p>\"Field meanings\" \u2192 API_ARCHITECTURE.md, QUICK_REFERENCE.md</p> <p>\"Reports\" \u2192 ANALYTICS_CAPABILITY_MAP.md</p> <p>\"Commission\" \u2192 ANALYTICS_CAPABILITY_MAP.md Section 3.2</p> <p>\"DSO\" \u2192 ANALYTICS_CAPABILITY_MAP.md Section 5.1</p> <p>\"Token usage\" \u2192 API_ARCHITECTURE.md Section \"Token Economics\"</p> <p>\"Next actions\" \u2192 SESSION_HANDOFF.md Section \"Next Steps\"</p>"},{"location":"technical/#documentation-standards","title":"\ud83d\udcdd Documentation Standards","text":""},{"location":"technical/#complete","title":"\u2705 Complete","text":"<p>All major decisions documented with rationale</p>"},{"location":"technical/#validated","title":"\u2705 Validated","text":"<p>Field definitions proven with real data (5 invoices)</p>"},{"location":"technical/#actionable","title":"\u2705 Actionable","text":"<p>Clear next steps and implementation plans</p>"},{"location":"technical/#maintained","title":"\u2705 Maintained","text":"<p>Last updated: January 24, 2026</p>"},{"location":"technical/#important-notes","title":"\ud83d\ude4f Important Notes","text":""},{"location":"technical/#for-new-contributors","title":"For New Contributors","text":"<ol> <li>Start with QUICK_DECISIONS_SUMMARY.md</li> <li>Read SESSION_HANDOFF.md for full context</li> <li>Reference others as needed</li> </ol>"},{"location":"technical/#for-continuing-work","title":"For Continuing Work","text":"<ol> <li>Check SESSION_HANDOFF.md first</li> <li>Review \"Next Steps\" section</li> <li>Follow priority order</li> </ol>"},{"location":"technical/#for-architecture-decisions","title":"For Architecture Decisions","text":"<ol> <li>Read FIELD_MAPPING_DECISION.md</li> <li>Understand rationale before implementing</li> <li>Update docs if decisions change</li> </ol> <p>Status: Ready for Phase 1 Implementation Priority: Domain Model (HIGH) Estimated Time: 8 hours</p> <p>Questions? Check SESSION_HANDOFF.md Section \"Questions for Next Session\"</p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/","title":"Analytics Capability Map - Kledo API","text":"<p>Perspective: Finance Analyst + Data Analyst Date: January 24, 2026 Status: Comprehensive mapping of all possible reports and analytics</p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#executive-summary","title":"\ud83d\udcca Executive Summary","text":"<p>From the available Kledo API data, we can generate 60+ distinct financial reports and analytics across 8 major categories:</p> <ol> <li>Financial Reporting (13 reports)</li> <li>Revenue Analytics (9 reports)</li> <li>Sales Performance (12 reports)</li> <li>Customer Intelligence (11 reports)</li> <li>Cash Flow &amp; Receivables (8 reports)</li> <li>Operational Metrics (7 reports)</li> <li>Risk Management (5 reports)</li> <li>Predictive Analytics (5 reports)</li> </ol>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#data-assets-available","title":"\ud83c\udfaf Data Assets Available","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#primary-data-sources","title":"Primary Data Sources","text":"<pre><code>Invoice Data Fields (75+):\n\u251c\u2500\u2500 Financial: subtotal, total_tax, amount_after_tax, due, discount\n\u251c\u2500\u2500 Dates: trans_date, due_date, payment_date, paid_date\n\u251c\u2500\u2500 Status: status_id (unpaid/partial/paid), due_days\n\u251c\u2500\u2500 Relationships: contact, sales_person, warehouse, termin\n\u251c\u2500\u2500 Metadata: tags, memo, order_number, ref_number\n\u2514\u2500\u2500 Payment: payment_accounts, payment_type_id\n</code></pre>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#1-financial-reporting","title":"1\ufe0f\u20e3 FINANCIAL REPORTING","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#11-income-statement-analysis","title":"1.1 Income Statement Analysis","text":"<p>Data Available: \u2705 Complete (VALIDATED WITH 5 REAL INVOICES)</p> <pre><code># Revenue Recognition (PROVEN BY DATA)\n# Mathematical relationship: subtotal + total_tax = amount_after_tax \u2705\n\n- Penjualan Bruto / Gross Sales    = amount_after_tax\n  (Total yang dibayar customer, INCLUDING tax)\n\n- Dikurangi: PPN / VAT              = total_tax\n  (Tax collected, 11% of subtotal for taxable transactions)\n\n- Penjualan Neto / Net Sales        = subtotal\n  (Revenue BEFORE tax, yang jadi revenue perusahaan)\n\n- Discounts Given                   = discount_amount + additional_discount_amount\n- Shipping Revenue                  = shipping_cost\n</code></pre> <p>IMPORTANT: In Indonesian accounting context: - <code>amount_after_tax</code> = \"amount INCLUDING tax\" (bukan \"after deducting tax\") - This is the total transaction value customer pays - <code>subtotal</code> is the actual revenue retained by company (before remitting tax)</p> <p>Reports: - Monthly P&amp;L Summary   - Penjualan Bruto (Gross Sales) = amount_after_tax   - Dikurangi: PPN collected = total_tax   - Penjualan Neto (Net Sales) = subtotal   - Average transaction value   - YoY comparison</p> <ul> <li>Revenue by Tax Treatment</li> <li>Taxable transactions (with PPN 11%)</li> <li>Non-taxable transactions (PPN = 0)</li> <li>Tax compliance tracking</li> <li> <p>VAT/PPN analysis</p> </li> <li> <p>Discount Impact Analysis</p> </li> <li>Total discounts given</li> <li>Discount % of gross sales</li> <li>Discount trends over time</li> </ul> <p>Formula Example (VALIDATED): <pre><code># Proven with 5 invoices:\n# Invoice #1: 16,320,000 + 1,795,200 = 18,115,200 \u2705\n# Invoice #2:  4,410,000 +         0 =  4,410,000 \u2705\n# Invoice #3:  7,560,000 +   831,600 =  8,391,600 \u2705\n\n# For Indonesian Income Statement:\npenjualan_bruto = amount_after_tax  # Total paid by customer\nppn_collected = total_tax            # Tax (usually 11%)\npenjualan_neto = subtotal            # Revenue before tax\n\n# Verify relationship:\nassert subtotal + total_tax == amount_after_tax\n\n# Tax rate calculation:\ntax_rate = (total_tax / subtotal) * 100  # Usually 11% for taxable items\n\n# Net margin (simplified, without COGS):\nnet_margin_rate = (subtotal / amount_after_tax) * 100  # ~90% for 11% tax\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#12-tax-reporting","title":"1.2 Tax Reporting","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - PPN (VAT) Summary Report   - Total taxable revenue   - Total PPN collected   - PPN rate analysis   - Customer NPWP tracking</p> <ul> <li>Tax Compliance Dashboard</li> <li>Transactions with vs without tax</li> <li>NPWP coverage rate</li> <li>Tax reporting readiness</li> </ul> <p>Fields Used: <pre><code>tax: {\"1\": 1795200}  # Tax breakdown\ntotal_tax: 1795200   # Total tax amount\ncontact.npwp: \"509721197002000\"  # Customer tax ID\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#13-period-comparison-analysis","title":"1.3 Period Comparison Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Month-over-Month (MoM) Growth <pre><code>Jan 2026 vs Dec 2025\n- Revenue growth %\n- Invoice count change\n- Average invoice size change\n</code></pre></p> <ul> <li> <p>Year-over-Year (YoY) Analysis <pre><code>Jan 2026 vs Jan 2025\n- Annual growth rate\n- Seasonal patterns\n- Market share trends\n</code></pre></p> </li> <li> <p>Quarter-over-Quarter (QoQ) Trends <pre><code>Q4 2025 vs Q3 2025\n- Quarterly performance\n- Seasonal adjustments\n- Trend identification\n</code></pre></p> </li> </ul> <p>Calculation: <pre><code>mom_growth = ((current_month - last_month) / last_month) * 100\nyoy_growth = ((current_year - last_year) / last_year) * 100\ncagr = ((end_value / start_value) ** (1/years) - 1) * 100\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#2-revenue-analytics","title":"2\ufe0f\u20e3 REVENUE ANALYTICS","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#21-revenue-breakdown-analysis","title":"2.1 Revenue Breakdown Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Revenue by Warehouse <pre><code>warehouse.name: \"Coating dan Cat\"\n# Track which warehouses generate most revenue\n</code></pre></p> <ul> <li> <p>Revenue by Tag/Category <pre><code>tags: [{\"name\": \"Penjualan Material\"}]\n# Product line performance\n</code></pre></p> </li> <li> <p>Revenue by Payment Terms <pre><code>termin.name: \"Cash Before Delivery\"\n# Impact of payment terms on sales\n</code></pre></p> </li> <li> <p>Revenue by Invoice Type <pre><code>invoice_type_id, source, source_id\n# Channel analysis (POS, online, manual)\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#22-time-series-revenue-analysis","title":"2.2 Time-Series Revenue Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Daily Revenue Trends   - Revenue by day of week   - Peak sales days   - Weekend vs weekday patterns</p> <ul> <li>Weekly Revenue Patterns</li> <li>Week-over-week trends</li> <li>4-week moving average</li> <li> <p>Weekly volatility</p> </li> <li> <p>Monthly Revenue Seasonality</p> </li> <li>Best/worst performing months</li> <li>Seasonal indexes</li> <li> <p>Year-end patterns</p> </li> <li> <p>Hourly Analysis (if trans_date includes time)</p> </li> <li>Peak transaction hours</li> <li>Off-peak periods</li> <li>Staffing optimization insights</li> </ul> <p>Visualization: <pre><code>Line charts, heatmaps, seasonal decomposition\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#23-revenue-concentration-risk","title":"2.3 Revenue Concentration Risk","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Top Customer Concentration <pre><code>Top 10 customers = X% of revenue\nTop 20% customers = Y% of revenue (Pareto analysis)\n</code></pre></p> <ul> <li> <p>Single Customer Dependency <pre><code>Max customer revenue / Total revenue = Risk %\nAlert if any customer &gt; 20% of total revenue\n</code></pre></p> </li> <li> <p>Diversification Score <pre><code>Herfindahl-Hirschman Index (HHI)\nNumber of customers for 80% revenue\n</code></pre></p> </li> </ul> <p>Formula: <pre><code>customer_concentration = (top_10_revenue / total_revenue) * 100\nhhi = sum((customer_revenue / total_revenue) ** 2)\nrisk_level = \"High\" if max_customer_share &gt; 20 else \"Moderate\"\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#3-sales-performance-analytics","title":"3\ufe0f\u20e3 SALES PERFORMANCE ANALYTICS","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#31-sales-rep-performance","title":"3.1 Sales Rep Performance","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Individual Rep Performance <pre><code>sales_person.name: \"Ahmad Kurniawan\"\n- Total revenue\n- Invoice count\n- Average deal size\n- Win rate (if order data available)\n</code></pre></p> <ul> <li>Sales Rep Ranking</li> <li>Top performers by revenue</li> <li>Most deals closed</li> <li>Highest average deal size</li> <li> <p>Growth rate comparison</p> </li> <li> <p>Sales Rep Productivity <pre><code>Revenue per rep / Total revenue = Individual contribution %\nAverage invoices per rep per month\nRevenue per working day\n</code></pre></p> </li> <li> <p>Team Performance Metrics <pre><code>Total team revenue\nTeam average metrics\nTop vs bottom quartile analysis\nPerformance distribution\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#32-commission-calculations","title":"3.2 Commission Calculations","text":"<p>Data Available: \u2705 Partial (revenue ready, targets needed)</p> <p>Current Capability: <pre><code># AVAILABLE NOW\n- Revenue per sales rep (before &amp; after tax)\n- Number of deals closed\n- Average deal size\n- Time-based performance (monthly, quarterly)\n\n# NEEDED FOR FULL COMMISSION\n- Sales targets per rep\n- Commission percentage/tiers\n- Commission rules engine\n</code></pre></p> <p>Reports Ready to Build: - Commission Accrual Report <pre><code>Rep Name | Revenue | Commission Rate | Commission Amount\n---------------------------------------------------------\nRep A    | 100M    | 5%             | 5M (if rate known)\n</code></pre></p> <ul> <li> <p>Target vs Actual <pre><code>Rep Name | Target | Actual | Achievement % | Commission Tier\n</code></pre></p> </li> <li> <p>Commission Forecast <pre><code>Current month progress\nProjected commission based on trends\n</code></pre></p> </li> </ul> <p>Formula: <pre><code># Basic commission (when targets available)\nif achievement &gt;= 120:\n    commission_rate = 7.5%  # Top tier\nelif achievement &gt;= 100:\n    commission_rate = 5.0%  # Base tier\nelse:\n    commission_rate = 2.5%  # Below target\n\ncommission_amount = actual_revenue * commission_rate\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#33-sales-pipeline-analysis","title":"3.3 Sales Pipeline Analysis","text":"<p>Data Available: \u2705 Partial (paid invoices only)</p> <p>Reports: - Conversion Metrics <pre><code>Orders (if available) \u2192 Invoices \u2192 Payments\nConversion rate at each stage\nAverage time to convert\n</code></pre></p> <ul> <li> <p>Sales Velocity <pre><code>Average days from order to invoice\nAverage days from invoice to payment\nTotal sales cycle time\n</code></pre></p> </li> <li> <p>Win/Loss Analysis <pre><code>Number of invoices vs orders\nCancellation rate\nReasons for losses (if memo tracked)\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#34-deal-size-analysis","title":"3.4 Deal Size Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Deal Size Distribution <pre><code>Micro deals (&lt;1M)     : X invoices, Y%\nSmall deals (1-5M)    : X invoices, Y%\nMedium deals (5-20M)  : X invoices, Y%\nLarge deals (&gt;20M)    : X invoices, Y%\n</code></pre></p> <ul> <li> <p>Average Deal Size Trends <pre><code>Monthly average invoice value\nTrend direction (increasing/decreasing)\nDeal size by sales rep\nDeal size by customer segment\n</code></pre></p> </li> <li> <p>High-Value Deal Analysis <pre><code>Top 10 largest deals\nCharacteristics of big deals\nSales rep who close large deals\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#4-customer-intelligence","title":"4\ufe0f\u20e3 CUSTOMER INTELLIGENCE","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#41-customer-segmentation","title":"4.1 Customer Segmentation","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - RFM Analysis (Recency, Frequency, Monetary)   <pre><code>Recency: Days since last purchase (trans_date)\nFrequency: Number of invoices\nMonetary: Total revenue (amount_after_tax)\n\nSegments:\n- Champions: High F, High M, Low R\n- Loyal: High F, Medium M\n- At Risk: High M, High R\n- Lost: High R, Low F\n</code></pre></p> <ul> <li> <p>Customer Value Tiers <pre><code>VIP (Top 5%)      : &gt;100M annual\nPremium (Top 20%) : 50-100M annual\nStandard (50%)    : 10-50M annual\nSmall (&lt;30%)      : &lt;10M annual\n</code></pre></p> </li> <li> <p>Customer Lifetime Value (CLV) <pre><code>avg_invoice_value = total_revenue / invoice_count\npurchase_frequency = invoice_count / months_active\ncustomer_lifespan = months_since_first_purchase\n\nCLV = avg_invoice_value * purchase_frequency * customer_lifespan\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#42-customer-behavior-analysis","title":"4.2 Customer Behavior Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Purchase Patterns <pre><code>Average days between purchases\nPreferred purchase days (day of week)\nSeasonal buying patterns\nBulk vs frequent small purchases\n</code></pre></p> <ul> <li> <p>Payment Behavior Score <pre><code># Based on payment history\non_time_payment_rate = paid_on_time / total_invoices\navg_payment_delay = avg(paid_date - due_date)\n\nScore:\n- A: Always pays early/on-time\n- B: Occasional delays (&lt;7 days)\n- C: Frequent delays (7-30 days)\n- D: Chronic late payer (&gt;30 days)\n</code></pre></p> </li> <li> <p>Discount Sensitivity <pre><code>Customers who get most discounts\nDiscount impact on purchase volume\nPrice elasticity analysis\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#43-customer-retention-analysis","title":"4.3 Customer Retention Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Churn Analysis <pre><code>inactive_threshold = 90  # days\nlast_purchase = max(trans_date) for customer\ndays_since_purchase = today - last_purchase\n\nStatus:\n- Active: &lt;30 days\n- At Risk: 30-60 days\n- Churning: 60-90 days\n- Churned: &gt;90 days\n</code></pre></p> <ul> <li> <p>Retention Rate <pre><code>cohort_retention = (active_customers_end / active_customers_start) * 100\nmonthly_retention_rate = ...\nannual_retention_rate = ...\n</code></pre></p> </li> <li> <p>Reactivation Opportunities <pre><code>List of churned customers\nTheir historical value\nRecommended win-back offers\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#44-customer-profitability","title":"4.4 Customer Profitability","text":"<p>Data Available: \u2705 Good (costs not available)</p> <p>Reports: - Revenue per Customer <pre><code>Total revenue by customer\nAverage invoice value by customer\nGross margin by customer (if costs known)\n</code></pre></p> <ul> <li> <p>High-Maintenance Customers <pre><code>Customers with:\n- High discount rates\n- Frequent payment delays\n- Low average invoice value\n- High transaction count (low efficiency)\n</code></pre></p> </li> <li> <p>Customer Acquisition Cost (CAC) Analysis <pre><code>(Needs marketing spend data)\nCAC Payback Period = CAC / Monthly revenue per customer\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#5-cash-flow-receivables-management","title":"5\ufe0f\u20e3 CASH FLOW &amp; RECEIVABLES MANAGEMENT","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#51-accounts-receivable-ar-analysis","title":"5.1 Accounts Receivable (AR) Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - AR Aging Report <pre><code>Category           | Amount    | Count | %\n------------------------------------------------\nCurrent (0-30)     | Rp XXX    | XX    | XX%\n31-60 days         | Rp XXX    | XX    | XX%\n61-90 days         | Rp XXX    | XX    | XX%\n91-120 days        | Rp XXX    | XX    | XX%\n&gt;120 days (Bad)    | Rp XXX    | XX    | XX%\n------------------------------------------------\nTotal Outstanding  | Rp XXX    | XX    | 100%\n</code></pre></p> <p>Formula: <pre><code>aging_bucket = today - due_date\nif aging_bucket &lt;= 30: category = \"Current\"\nelif aging_bucket &lt;= 60: category = \"31-60 days\"\n# ... etc\n</code></pre></p> <ul> <li> <p>Days Sales Outstanding (DSO) <pre><code>DSO = (Total AR / Total Revenue) \u00d7 Days in Period\n\nExample:\nAR = Rp 50M\nRevenue (30 days) = Rp 100M\nDSO = (50/100) \u00d7 30 = 15 days\n\nBenchmark: &lt;30 days = excellent, 30-45 = good, &gt;45 = poor\n</code></pre></p> </li> <li> <p>Collection Effectiveness Index (CEI) <pre><code>CEI = (Collections in Period /\n       (Opening AR + Revenue in Period - Closing AR)) \u00d7 100\n\n&gt;80% = Excellent\n60-80% = Good\n&lt;60% = Needs improvement\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#52-cash-collection-analysis","title":"5.2 Cash Collection Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Payment Velocity <pre><code>avg_days_to_payment = avg(paid_date - trans_date)\n\nBy customer segment:\n- VIP customers: X days\n- Regular customers: Y days\n- New customers: Z days\n</code></pre></p> <ul> <li> <p>Collection Rate <pre><code>invoices_paid_on_time = status_id == 3 AND paid_date &lt;= due_date\non_time_rate = paid_on_time / total_invoices\n\nTarget: &gt;95% on-time payment\n</code></pre></p> </li> <li> <p>Overdue Invoice Management <pre><code>Total overdue amount (due &gt; 0)\nNumber of overdue invoices\nAverage days overdue\nTop 10 overdue customers\nOverdue % of total AR\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#53-working-capital-analysis","title":"5.3 Working Capital Analysis","text":"<p>Data Available: \u2705 Partial (AR only, AP needed)</p> <p>Current Reports: - Receivables Turnover Ratio <pre><code>AR_turnover = Annual Revenue / Average AR\n\nHigher = Better (faster collections)\n</code></pre></p> <ul> <li>Cash Conversion Cycle (partial)   <pre><code>DSO (calculated above)\n+ DIO (Days Inventory Outstanding) - NOT AVAILABLE\n- DPO (Days Payable Outstanding) - NOT AVAILABLE\n= CCC\n\nCurrent: Only DSO available\n</code></pre></li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#6-operational-metrics","title":"6\ufe0f\u20e3 OPERATIONAL METRICS","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#61-invoice-processing-metrics","title":"6.1 Invoice Processing Metrics","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Invoice Creation Rate <pre><code>Invoices per day/week/month\nPeak processing times\nBottleneck identification\n</code></pre></p> <ul> <li> <p>Invoice Value Distribution <pre><code>Average invoice value\nMedian invoice value\nStandard deviation\nMin/max invoice values\n</code></pre></p> </li> <li> <p>Invoice Cycle Time <pre><code>cycle_time = paid_date - trans_date\navg_cycle_time = mean(cycle_time)\n\nSegments:\n- Fast cycle (&lt;7 days)\n- Normal cycle (7-30 days)\n- Slow cycle (&gt;30 days)\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#62-payment-terms-analysis","title":"6.2 Payment Terms Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Terms Performance <pre><code>termin.name: \"Cash Before Delivery\", \"Net 30\", \"Net 60\"\n\nAnalysis:\n- Most used payment terms\n- Average payment delay by terms\n- Revenue impact of different terms\n</code></pre></p> <ul> <li>Terms vs Collection <pre><code>Net 30 terms \u2192 X% paid on time\nNet 60 terms \u2192 Y% paid on time\nCBD terms \u2192 Z% paid on time\n</code></pre></li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#63-transaction-volume-analysis","title":"6.3 Transaction Volume Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Transaction Count Trends <pre><code>Daily transaction volume\nWeekly patterns\nMonthly trends\nYoY transaction growth\n</code></pre></p> <ul> <li>Average Transaction Metrics <pre><code>qty: 24  # Items per transaction\n\nAverage items per invoice\nRevenue per item\nBulk transaction identification\n</code></pre></li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#7-risk-management","title":"7\ufe0f\u20e3 RISK MANAGEMENT","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#71-credit-risk-analysis","title":"7.1 Credit Risk Analysis","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Customer Credit Score <pre><code>credit_score = weighted_average([\n    payment_history_score * 0.4,\n    payment_speed_score * 0.3,\n    revenue_size_score * 0.2,\n    relationship_length_score * 0.1\n])\n\nGrade:\nA (90-100): Minimal risk\nB (80-89): Low risk\nC (70-79): Moderate risk\nD (60-69): High risk\nF (&lt;60): Very high risk\n</code></pre></p> <ul> <li> <p>Exposure by Customer <pre><code>Current AR per customer\n% of total AR per customer\nCredit limit utilization (if limits set)\n</code></pre></p> </li> <li> <p>Bad Debt Forecast <pre><code># Based on aging\nbad_debt_reserve = (\n    overdue_90_120 * 0.25 +\n    overdue_120_plus * 0.75\n)\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#72-concentration-risk","title":"7.2 Concentration Risk","text":"<p>Data Available: \u2705 Complete</p> <p>Reports: - Customer Concentration <pre><code>Top 1 customer: X% of revenue\nTop 5 customers: Y% of revenue\nTop 10 customers: Z% of revenue\n\nAlert if any customer &gt;15% (high risk)\n</code></pre></p> <ul> <li> <p>Warehouse Concentration <pre><code>Revenue by warehouse\nRisk if one warehouse dominates\n</code></pre></p> </li> <li> <p>Sales Rep Concentration <pre><code>Revenue dependency on key reps\nSuccession planning needs\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#8-predictive-analytics","title":"8\ufe0f\u20e3 PREDICTIVE ANALYTICS","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#81-revenue-forecasting","title":"8.1 Revenue Forecasting","text":"<p>Data Available: \u2705 Good (historical trends)</p> <p>Models: - Time Series Forecasting <pre><code># Using historical revenue data\n- Moving Average (3, 6, 12 months)\n- Exponential Smoothing\n- ARIMA modeling\n- Seasonal decomposition\n\nForecast next:\n- 1 month\n- 3 months (quarter)\n- 12 months (annual)\n</code></pre></p> <ul> <li>Growth Rate Projection <pre><code>CAGR = ((End Value / Start Value) ^ (1/years)) - 1\n\nProjected revenue = Current revenue * (1 + CAGR) ^ periods\n</code></pre></li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#82-customer-behavior-prediction","title":"8.2 Customer Behavior Prediction","text":"<p>Data Available: \u2705 Good</p> <p>Models: - Churn Prediction <pre><code>Features:\n- Days since last purchase\n- Purchase frequency decline\n- Average invoice value decline\n- Payment behavior changes\n\nOutput: Churn probability (0-100%)\n</code></pre></p> <ul> <li> <p>Next Purchase Prediction <pre><code>Based on:\n- Historical purchase intervals\n- Seasonal patterns\n- Customer lifecycle stage\n\nOutput: Predicted next purchase date\n</code></pre></p> </li> <li> <p>Customer Lifetime Value Prediction <pre><code>Predict future value based on:\n- Current transaction patterns\n- Growth trajectory\n- Retention probability\n</code></pre></p> </li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#83-cash-flow-forecasting","title":"8.3 Cash Flow Forecasting","text":"<p>Data Available: \u2705 Good</p> <p>Reports: - Expected Collections Forecast <pre><code># Based on:\n- Current AR aging\n- Historical payment patterns\n- Seasonal trends\n\nForecast collections for next:\n- 7 days\n- 30 days\n- 90 days\n</code></pre></p> <ul> <li>Revenue Run Rate <pre><code>monthly_run_rate = last_month_revenue\nannual_run_rate = monthly_run_rate * 12\n\nAdjusted for:\n- Seasonality\n- Growth trends\n- Known pipeline\n</code></pre></li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#dashboard-recommendations","title":"\ud83d\udcc8 DASHBOARD RECOMMENDATIONS","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#executive-dashboard-c-level","title":"Executive Dashboard (C-Level)","text":"<p>Real-time KPIs: <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TODAY'S SNAPSHOT                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Revenue (MTD)        Rp 101.5M  \u2191 12%  \u2502\n\u2502 Outstanding AR       Rp 45.2M   \u2193 5%   \u2502\n\u2502 Invoices Paid        85%        \u2191 3%   \u2502\n\u2502 DSO                  28 days    \u2193 2d   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nTRENDS (Last 30 Days)\n- Revenue: [Line chart]\n- Collections: [Line chart]\n- New Customers: 12 (\u2191 20%)\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#sales-manager-dashboard","title":"Sales Manager Dashboard","text":"<p>Team Performance: <pre><code>TOP PERFORMERS (This Month)\n1. Rep A - Rp 45M (9 deals)\n2. Rep B - Rp 38M (12 deals)\n3. Rep C - Rp 32M (7 deals)\n\nALERTS\n\u26a0\ufe0f Rep D - Behind target by 25%\n\u26a0\ufe0f Rep E - No deals closed this week\n\u2705 Team target: 95% achieved\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#finance-manager-dashboard","title":"Finance Manager Dashboard","text":"<p>Cash Flow &amp; AR: <pre><code>ACCOUNTS RECEIVABLE AGING\nCurrent (0-30d):    Rp 30M   (66%)  \ud83d\udfe2\n31-60 days:         Rp 10M   (22%)  \ud83d\udfe1\n61-90 days:         Rp 4M    (9%)   \ud83d\udfe0\n&gt;90 days:           Rp 1.2M  (3%)   \ud83d\udd34\n\nCOLLECTION METRICS\nDSO: 28 days (Target: &lt;30)  \u2705\nCEI: 82% (Target: &gt;80%)     \u2705\nOverdue Rate: 12%           \u26a0\ufe0f\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#customer-success-dashboard","title":"Customer Success Dashboard","text":"<p>Customer Health: <pre><code>CUSTOMER SEGMENTS\nChampions:     45 customers (Rp 120M)\nAt Risk:       12 customers (Rp 18M) \u26a0\ufe0f\nChurned:       8 customers (lost Rp 5M)\n\nRETENTION METRICS\nMonthly Retention:   95%  \u2705\nChurn Rate:         5%   \u26a0\ufe0f\nAvg CLV:            Rp 2.5M\n</code></pre></p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#priority-implementation-roadmap","title":"\ud83c\udfaf PRIORITY IMPLEMENTATION ROADMAP","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#phase-1-core-financial-reports-week-1-2","title":"Phase 1: Core Financial Reports (Week 1-2)","text":"<p>High Impact, Easy to Implement 1. \u2705 Revenue Summary (DONE - already working) 2. \u2705 Invoice Aging Report (DONE - data available) 3. \ud83d\udd28 DSO Calculation 4. \ud83d\udd28 Sales Rep Performance Report (DONE - needs enhancement) 5. \ud83d\udd28 Top Customers Report (DONE - needs enhancement)</p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#phase-2-operational-metrics-week-3-4","title":"Phase 2: Operational Metrics (Week 3-4)","text":"<p>Medium Impact, Moderate Complexity 6. \ud83d\udd28 Payment Behavior Scoring 7. \ud83d\udd28 Collection Effectiveness (CEI) 8. \ud83d\udd28 Revenue Breakdown (by warehouse, tag, terms) 9. \ud83d\udd28 Transaction Volume Analysis 10. \ud83d\udd28 Deal Size Distribution</p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#phase-3-advanced-analytics-month-2","title":"Phase 3: Advanced Analytics (Month 2)","text":"<p>High Value, Complex Implementation 11. \ud83d\udd28 Customer RFM Segmentation 12. \ud83d\udd28 Churn Prediction Model 13. \ud83d\udd28 Revenue Forecasting 14. \ud83d\udd28 Commission Calculator (needs targets) 15. \ud83d\udd28 Customer Lifetime Value</p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#phase-4-dashboards-automation-month-3","title":"Phase 4: Dashboards &amp; Automation (Month 3)","text":"<p>User Experience Enhancement 16. \ud83d\udd28 Executive Dashboard 17. \ud83d\udd28 Sales Manager Dashboard 18. \ud83d\udd28 Finance Manager Dashboard 19. \ud83d\udd28 Automated Alerts &amp; Notifications 20. \ud83d\udd28 Scheduled Report Generation</p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#technical-requirements","title":"\ud83d\udd27 TECHNICAL REQUIREMENTS","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#data-completeness-check","title":"Data Completeness Check","text":"Metric Available Quality Notes Revenue data \u2705 Excellent Complete financial fields Customer data \u2705 Good Name, company, NPWP Sales rep data \u2705 Good ID and name Date fields \u2705 Excellent Multiple date types Status tracking \u2705 Excellent Clear status IDs Payment data \u2705 Good Payment dates and accounts Tags/categories \u2705 Good Transaction categorization Discount data \u2705 Good Multiple discount types Sales targets \u274c Missing Needed for commissions Marketing data \u274c Missing Needed for CAC Cost data \u274c Missing Needed for profitability"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#additional-data-sources-recommended","title":"Additional Data Sources Recommended","text":"<p>For Enhanced Analytics: 1. Sales Targets Table <pre><code>sales_targets (\n    sales_id INT,\n    period DATE,\n    target_amount DECIMAL,\n    target_deals INT,\n    commission_rate DECIMAL\n)\n</code></pre></p> <ol> <li> <p>Customer Master Data <pre><code>customer_profile (\n    contact_id INT,\n    industry VARCHAR,\n    company_size VARCHAR,\n    credit_limit DECIMAL,\n    payment_terms_preference VARCHAR\n)\n</code></pre></p> </li> <li> <p>Product Costs (for profitability)    <pre><code>product_costs (\n    product_id INT,\n    cost_per_unit DECIMAL,\n    updated_at DATE\n)\n</code></pre></p> </li> </ol>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#sample-report-outputs","title":"\ud83d\udcca SAMPLE REPORT OUTPUTS","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#1-revenue-summary-report","title":"1. Revenue Summary Report","text":"<pre><code>=================================================\nREVENUE SUMMARY REPORT\nPeriod: January 2026\n=================================================\n\nFINANCIAL OVERVIEW\n\u251c\u2500 Gross Revenue (Before Tax)    Rp  92,823,250\n\u251c\u2500 Tax Collected (PPN)            Rp   8,678,450\n\u2514\u2500 Net Revenue (After Tax)        Rp 101,501,700\n\nTRANSACTION METRICS\n\u251c\u2500 Total Invoices Paid            16\n\u251c\u2500 Average Invoice Value          Rp   6,343,856\n\u2514\u2500 Median Invoice Value           Rp   5,200,000\n\nGROWTH METRICS\n\u251c\u2500 MoM Growth                     +12.5%\n\u251c\u2500 YoY Growth                     +18.2%\n\u2514\u2500 Target Achievement             95%\n\nTOP PRODUCTS/TAGS\n1. Penjualan Material             Rp  85M (84%)\n2. Penjualan Jasa                 Rp  16M (16%)\n=================================================\n</code></pre>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#2-ar-aging-report","title":"2. AR Aging Report","text":"<pre><code>=================================================\nACCOUNTS RECEIVABLE AGING REPORT\nAs of: January 24, 2026\n=================================================\n\nAGING SUMMARY\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Category     \u2502 Amount         \u2502 Count \u2502 %      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Current      \u2502 Rp  30,250,000 \u2502   12  \u2502  66.8% \u2502\n\u2502 1-30 days    \u2502 Rp  10,100,000 \u2502    4  \u2502  22.3% \u2502\n\u2502 31-60 days   \u2502 Rp   3,500,000 \u2502    2  \u2502   7.7% \u2502\n\u2502 61-90 days   \u2502 Rp   1,200,000 \u2502    1  \u2502   2.7% \u2502\n\u2502 &gt;90 days     \u2502 Rp     200,000 \u2502    1  \u2502   0.4% \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 TOTAL AR     \u2502 Rp  45,250,000 \u2502   20  \u2502 100.0% \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nKEY METRICS\n\u251c\u2500 DSO (Days Sales Outstanding)   28 days\n\u251c\u2500 Collection Effectiveness       82%\n\u2514\u2500 Overdue Amount                 Rp 4.9M (10.8%)\n\nTOP 5 OVERDUE CUSTOMERS\n1. PT XYZ - Rp 1.2M (45 days overdue)\n2. CV ABC - Rp 850K (38 days overdue)\n3. ...\n=================================================\n</code></pre>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#3-sales-rep-performance","title":"3. Sales Rep Performance","text":"<pre><code>=================================================\nSALES REP PERFORMANCE REPORT\nPeriod: January 2026\n=================================================\n\nREP RANKING (by Revenue)\n\u250c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 #  \u2502 Sales Rep               \u2502 Revenue     \u2502 Deals \u2502 Avg Deal    \u2502\n\u251c\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1  \u2502 Ahmad K.    \u2502 Rp 45.2M    \u2502   9   \u2502 Rp 5,022K   \u2502\n\u2502 2  \u2502 Budi                    \u2502 Rp 32.5M    \u2502  12   \u2502 Rp 2,708K   \u2502\n\u2502 3  \u2502 Sari                    \u2502 Rp 24.8M    \u2502   7   \u2502 Rp 3,543K   \u2502\n\u2502 4  \u2502 Dian                    \u2502 Rp 18.6M    \u2502   8   \u2502 Rp 2,325K   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nTEAM METRICS\n\u251c\u2500 Total Team Revenue             Rp 121.1M\n\u251c\u2500 Average per Rep               Rp 30.3M\n\u2514\u2500 Team Target Achievement       96%\n\nPERFORMANCE DISTRIBUTION\n\ud83c\udf1f Above Target (&gt;100%): 2 reps\n\u2705 On Target (90-100%):  1 rep\n\u26a0\ufe0f  Below Target (&lt;90%):  1 rep\n=================================================\n</code></pre>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#insights-recommendations","title":"\ud83d\udca1 INSIGHTS &amp; RECOMMENDATIONS","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#what-we-can-answer-now","title":"What We Can Answer NOW","text":"<p>\u2705 \"Berapa revenue bulan ini?\" \u2705 \"Siapa sales rep terbaik?\" \u2705 \"Customer mana yang belum bayar?\" \u2705 \"Berapa average invoice value?\" \u2705 \"Top 10 customer berdasarkan revenue?\" \u2705 \"DSO berapa hari?\" \u2705 \"Berapa tax yang harus dibayar?\" \u2705 \"Invoice mana yang overdue?\" \u2705 \"Revenue per warehouse?\" \u2705 \"Payment behavior customer X?\"</p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#what-we-cannot-answer-missing-data","title":"What We CANNOT Answer (Missing Data)","text":"<p>\u274c \"Berapa margin keuntungan?\" (need cost data) \u274c \"Commission berapa?\" (need sales targets) \u274c \"CAC berapa?\" (need marketing spend) \u274c \"Inventory turnover?\" (need inventory data) \u274c \"ROI campaign?\" (need marketing data)</p>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#quick-wins-implement-first","title":"Quick Wins (Implement First)","text":"<ol> <li>\u26a1 DSO Calculator - Critical for cash flow</li> <li>\u26a1 Payment Behavior Scoring - Identify risk customers</li> <li>\u26a1 Revenue Breakdown Dashboard - Business intelligence</li> <li>\u26a1 Sales Rep Leaderboard - Team motivation</li> <li>\u26a1 Overdue Invoice Alerts - Collection management</li> </ol>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#business-value","title":"\ud83c\udfaf BUSINESS VALUE","text":""},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#financial-impact","title":"Financial Impact","text":"<ul> <li>Better Cash Flow: DSO monitoring \u2192 Faster collections \u2192 Improved liquidity</li> <li>Risk Reduction: AR aging \u2192 Early warning \u2192 Prevent bad debt</li> <li>Revenue Growth: Sales analytics \u2192 Performance tracking \u2192 Target achievement</li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#operational-efficiency","title":"Operational Efficiency","text":"<ul> <li>Automated Reporting: 40+ hours/month saved on manual reports</li> <li>Real-time Insights: Dashboard vs end-of-month delays</li> <li>Data-Driven Decisions: Evidence-based vs gut feeling</li> </ul>"},{"location":"technical/ANALYTICS_CAPABILITY_MAP/#strategic-advantage","title":"Strategic Advantage","text":"<ul> <li>Customer Intelligence: Identify VIP vs risk customers</li> <li>Sales Optimization: Rep performance \u2192 Training needs</li> <li>Predictive Planning: Forecast revenue \u2192 Budget accurately</li> </ul> <p>Summary: Dari data API Kledo, kita bisa generate 60+ laporan finansial dan analitik yang mencakup hampir semua kebutuhan Finance Analyst dan Data Analyst. Yang masih missing hanya data cost, sales targets, dan marketing spend untuk analisis profitability dan commission yang lebih lengkap.</p> <p>Next Action: Prioritas implementasi dimulai dari Core Financial Reports (DSO, AR Aging, Payment Behavior) karena high impact dan data sudah lengkap.</p>"},{"location":"technical/API_ARCHITECTURE/","title":"Kledo API MCP Server - Architecture Documentation","text":"<p>Last Updated: January 24, 2026 Version: 1.0.0 Status: Production-Ready with Consolidation Opportunity</p>"},{"location":"technical/API_ARCHITECTURE/#executive-summary","title":"Executive Summary","text":""},{"location":"technical/API_ARCHITECTURE/#current-state","title":"Current State","text":"<ul> <li>Total Tools: 25 MCP tools</li> <li>Active Usage: 5 tools (20%) serve 100% of real business queries</li> <li>Token Cost: ~5,000-7,500 tokens per request</li> <li>API Health: \u2705 Working perfectly, full data available</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#key-finding","title":"Key Finding","text":"<p>80% of tools are unused in realistic business workflows, consuming tokens without providing value.</p>"},{"location":"technical/API_ARCHITECTURE/#tested-business-queries-all-successful","title":"Tested Business Queries (All Successful)","text":"<ol> <li>\u2705 Revenue analysis (monthly, weekly, daily)</li> <li>\u2705 Sales rep performance tracking</li> <li>\u2705 Invoice lifecycle monitoring (created, paid, outstanding)</li> <li>\u2705 Top customer identification</li> <li>\u2705 Commission calculation data retrieval</li> </ol>"},{"location":"technical/API_ARCHITECTURE/#api-endpoints-configuration","title":"API Endpoints Configuration","text":""},{"location":"technical/API_ARCHITECTURE/#base-url-structure","title":"Base URL Structure","text":"<pre><code>https://yourcompany.api.kledo.com/api/v1\n</code></pre>"},{"location":"technical/API_ARCHITECTURE/#authentication","title":"Authentication","text":"<pre><code># Recommended: API Key\nKLEDO_API_KEY=kledo_pat_xxx...\n\n# Legacy: Email/Password\nKLEDO_EMAIL=user@example.com\nKLEDO_PASSWORD=xxx\n</code></pre>"},{"location":"technical/API_ARCHITECTURE/#available-endpoint-categories-13-total","title":"Available Endpoint Categories (13 total)","text":"Category Endpoints Status Usage in Real Workflows invoices list, detail, totals \u2705 Active \ud83d\udd25 High (3\u00d7 in tests) reports activity_team, profit_loss, etc. \u2705 Ready \u274c Unused purchase_invoices list, detail, totals \u2705 Ready \u274c Unused orders list, detail, totals \u2705 Ready \u274c Unused purchase_orders list, detail, totals \u2705 Ready \u274c Unused products list, detail, suggestion \u2705 Ready \u274c Unused contacts list, detail, transactions \u2705 Ready \u26a0\ufe0f Low (1\u00d7 in tests) deliveries list, detail, totals \u2705 Ready \u274c Unused purchase_deliveries list, detail \u2705 Ready \u274c Unused bank transactions, balances \u2705 Ready \u274c Unused accounts list, detail \u2705 Ready \u274c Unused supporting units, tags, fees, warehouses \u2705 Ready \u274c Unused"},{"location":"technical/API_ARCHITECTURE/#data-structures","title":"Data Structures","text":""},{"location":"technical/API_ARCHITECTURE/#invoice-entity-primary","title":"Invoice Entity (Primary)","text":"<p>API Endpoint: <code>/finance/invoices</code></p>"},{"location":"technical/API_ARCHITECTURE/#complete-field-list-75-fields-available","title":"Complete Field List (75+ fields available)","text":"<pre><code>{\n  # Core Identification\n  'id': 13454,\n  'business_tran_id': 13448,\n  'ref_number': 'INV/26/JAN/01161',\n  'trans_type_id': 5,\n\n  # Dates\n  'trans_date': '2026-01-23',\n  'due_date': '2026-01-23',\n  'payment_date': '2026-01-23',\n  'paid_date': '2026-01-23',\n  'shipping_date': None,\n  'created_at': '2026-01-23',\n  'updated_at': '2026-01-23',\n\n  # Financial Amounts (IDR)\n  'subtotal': 16320000,              # Before tax\n  'total_tax': 1795200,               # Tax amount\n  'amount_after_tax': 18115200,       # After tax (subtotal + tax)\n  'amount': 16320000,                 # Base amount\n  'due': 0,                           # Outstanding amount\n  'discount_amount': 0,\n  'discount_percent': 0,\n  'additional_discount_amount': 0,\n  'additional_discount_percent': 0,\n  'shipping_cost': 0,\n  'witholding_amount': 0,\n  'witholding_percent': 0,\n\n  # Status &amp; Payment\n  'status_id': 3,                     # 1=Unpaid, 2=Partial, 3=Paid\n  'due_days': 0,                      # Days overdue\n  'pay_later': False,\n  'include_tax': False,\n\n  # Relationships (IDs)\n  'contact_id': 489,\n  'sales_id': 230701,                 # Sales rep ID (KEY for commissions!)\n  'owner_id': 218933,\n  'warehouse_id': 1,\n  'term_id': 5,                       # Payment terms\n\n  # Nested Objects (FULL DATA AVAILABLE)\n  'contact': {\n    'id': 489,\n    'name': 'Tahroni Arifin',\n    'company': 'PT. RANGKA RUANG INDONESIA',\n    'npwp': '509721197002000'         # Tax ID\n  },\n\n  'sales_person': {\n    'id': 230701,\n    'name': 'Ahmad Kurniawan'  # Sales rep name (KEY!)\n  },\n\n  'warehouse': {\n    'id': 1,\n    'name': 'Coating dan Cat'\n  },\n\n  'termin': {\n    'id': 5,\n    'name': 'Cash Before Delivery'    # Payment terms\n  },\n\n  'tags': [{\n    'id': 1,\n    'name': 'Penjualan Material',\n    'color': '#000000'\n  }],\n\n  # Additional Details\n  'memo': 'Stadion Wibawa Mukti Bekasi - 452',\n  'desc': '',\n  'order_number': 'SO/26/JAN/00838',\n  'qty': 24,\n  'print_status': 'Belum',\n  'attachment': [],\n  'attachment_exists': False,\n\n  # Currency (not typically used for IDR)\n  'currency_id': 0,\n  'currency_rate': 1,\n\n  # Payment Accounts\n  'payment_accounts': [{\n    'id': 1507,\n    'name': 'Mandiri Main 6667',\n    'name_id': 'Mandiri Main 6667'\n  }]\n}\n</code></pre>"},{"location":"technical/API_ARCHITECTURE/#key-fields-for-business-queries","title":"Key Fields for Business Queries","text":""},{"location":"technical/API_ARCHITECTURE/#revenue-calculation","title":"Revenue Calculation","text":"<pre><code># Revenue Before Tax\nrevenue_before_tax = sum(invoice['subtotal'] for invoice in invoices)\n\n# Tax Amount\ntotal_tax = sum(invoice['total_tax'] for invoice in invoices)\n\n# Revenue After Tax\nrevenue_after_tax = sum(invoice['amount_after_tax'] for invoice in invoices)\n</code></pre>"},{"location":"technical/API_ARCHITECTURE/#status-filtering","title":"Status Filtering","text":"<pre><code>status_mapping = {\n    1: \"Belum Dibayar / Unpaid\",\n    2: \"Dibayar Sebagian / Partially Paid\",\n    3: \"Lunas / Paid\"\n}\n\n# Get only paid invoices for revenue\npaid_invoices = [inv for inv in invoices if inv['status_id'] == 3]\n\n# Get outstanding (unpaid + partial)\noutstanding = [inv for inv in invoices if inv['status_id'] in [1, 2]]\n</code></pre>"},{"location":"technical/API_ARCHITECTURE/#sales-rep-performance","title":"Sales Rep Performance","text":"<pre><code># Group revenue by sales rep\nfrom collections import defaultdict\n\nrep_revenue = defaultdict(lambda: {\n    'total_before_tax': 0,\n    'total_after_tax': 0,\n    'invoice_count': 0,\n    'rep_name': ''\n})\n\nfor invoice in paid_invoices:\n    sales_id = invoice['sales_id']\n    rep_revenue[sales_id]['total_before_tax'] += invoice['subtotal']\n    rep_revenue[sales_id]['total_after_tax'] += invoice['amount_after_tax']\n    rep_revenue[sales_id]['invoice_count'] += 1\n    rep_revenue[sales_id]['rep_name'] = invoice['sales_person']['name']\n</code></pre>"},{"location":"technical/API_ARCHITECTURE/#customer-analysis","title":"Customer Analysis","text":"<pre><code># Top customers by revenue\ncustomer_revenue = defaultdict(lambda: {\n    'total_revenue': 0,\n    'invoice_count': 0,\n    'customer_name': '',\n    'company': ''\n})\n\nfor invoice in paid_invoices:\n    contact_id = invoice['contact_id']\n    customer_revenue[contact_id]['total_revenue'] += invoice['amount_after_tax']\n    customer_revenue[contact_id]['invoice_count'] += 1\n    customer_revenue[contact_id]['customer_name'] = invoice['contact']['name']\n    customer_revenue[contact_id]['company'] = invoice['contact'].get('company', '')\n\n# Sort by revenue\ntop_customers = sorted(\n    customer_revenue.items(),\n    key=lambda x: x[1]['total_revenue'],\n    reverse=True\n)[:10]\n</code></pre>"},{"location":"technical/API_ARCHITECTURE/#current-tool-architecture-25-tools","title":"Current Tool Architecture (25 Tools)","text":""},{"location":"technical/API_ARCHITECTURE/#1-financial-reports-4-tools-unused","title":"1. Financial Reports (4 tools) - \u274c UNUSED","text":"<pre><code>financial_activity_team_report(date_from, date_to)\nfinancial_sales_summary(date_from, date_to)\nfinancial_purchase_summary(date_from, date_to)\nfinancial_bank_balances()\n</code></pre> <p>Status: Implemented but not called in real workflows.</p>"},{"location":"technical/API_ARCHITECTURE/#2-products-3-tools-unused","title":"2. Products (3 tools) - \u274c UNUSED","text":"<pre><code>product_list(page=1, per_page=50, search=None)\nproduct_get_detail(product_id)\nproduct_search_by_sku(sku)\n</code></pre> <p>Status: Ready but not needed for current queries.</p>"},{"location":"technical/API_ARCHITECTURE/#3-utilities-3-tools-unused","title":"3. Utilities (3 tools) - \u274c UNUSED","text":"<pre><code>utility_clear_cache()\nutility_get_cache_stats()\nutility_test_connection()\n</code></pre> <p>Status: System tools, rarely needed in business workflows.</p>"},{"location":"technical/API_ARCHITECTURE/#4-contacts-3-tools-low-usage","title":"4. Contacts (3 tools) - \u26a0\ufe0f LOW USAGE","text":"<pre><code>contact_list(page=1, per_page=50, search=None)\ncontact_get_detail(contact_id)\ncontact_get_transactions(contact_id)  # \u2705 Used 1\u00d7 in tests\n</code></pre> <p>Usage: Only transactions endpoint used (customer analysis). Note: Contact info already embedded in invoice responses!</p>"},{"location":"technical/API_ARCHITECTURE/#5-deliveries-3-tools-unused","title":"5. Deliveries (3 tools) - \u274c UNUSED","text":"<pre><code>delivery_list(date_from=None, date_to=None, status_id=None)\ndelivery_get_detail(delivery_id)\ndelivery_get_pending()\n</code></pre> <p>Status: Not needed for current financial workflows.</p>"},{"location":"technical/API_ARCHITECTURE/#6-orders-3-tools-unused","title":"6. Orders (3 tools) - \u274c UNUSED","text":"<pre><code>order_list_sales(date_from=None, date_to=None)\norder_get_detail(order_id)\norder_list_purchase(date_from=None, date_to=None)\n</code></pre> <p>Status: Not queried in revenue/commission workflows.</p>"},{"location":"technical/API_ARCHITECTURE/#7-sales-analytics-2-tools-high-usage","title":"7. Sales Analytics (2 tools) - \ud83d\udd25 HIGH USAGE","text":"<pre><code>sales_rep_revenue_report(date_from, date_to)  # \u2705 Used 2\u00d7 in tests\nsales_rep_list()                               # \u2705 Used 1\u00d7 in tests\n</code></pre> <p>Status: CRITICAL for commission calculations. Fields Used: - <code>sales_rep_name</code> - <code>total_revenue</code> (before and after tax) - <code>invoice_count</code></p>"},{"location":"technical/API_ARCHITECTURE/#8-revenue-receivables-3-tools-high-usage","title":"8. Revenue &amp; Receivables (3 tools) - \ud83d\udd25 HIGH USAGE","text":"<pre><code>revenue_summary(date_from, date_to)                    # \u2705 Used 3\u00d7 in tests\noutstanding_receivables(status_id=None, min_amount=0)\ncustomer_revenue_ranking(date_from, date_to, top_n=10) # \u2705 Used 1\u00d7 in tests\n</code></pre> <p>Status: CORE tools for financial analysis. Test Results (Jan 2026 data): <pre><code>Revenue Before Tax: Rp 92,823,250.00\nTax (PPN): Rp 8,678,450.00\nRevenue After Tax: Rp 101,501,700.00\nPaid Invoices: 16\n</code></pre></p>"},{"location":"technical/API_ARCHITECTURE/#9-invoices-4-tools-high-usage","title":"9. Invoices (4 tools) - \ud83d\udd25 HIGH USAGE","text":"<pre><code>invoice_list_sales(date_from, date_to, status=None)  # \u2705 Used 3\u00d7 in tests\ninvoice_get_detail(invoice_id)\ninvoice_get_totals(date_from, date_to, status=None)\ninvoice_list_purchase(date_from, date_to, status=None)\n</code></pre> <p>Status: ESSENTIAL for all revenue and invoice queries. Most Used Tool: <code>invoice_list_sales</code> (3 calls for different status filters).</p>"},{"location":"technical/API_ARCHITECTURE/#tool-usage-analysis-from-testing","title":"Tool Usage Analysis (From Testing)","text":""},{"location":"technical/API_ARCHITECTURE/#test-date-january-24-2026","title":"Test Date: January 24, 2026","text":""},{"location":"technical/API_ARCHITECTURE/#test-queries-9-realistic-business-scenarios","title":"Test Queries: 9 realistic business scenarios","text":"Tool Name Call Count Purpose Status <code>revenue_summary</code> 3\u00d7 Monthly/weekly/daily revenue \u2705 CRITICAL <code>invoice_list_sales</code> 3\u00d7 Created/paid/outstanding invoices \u2705 CRITICAL <code>sales_rep_revenue_report</code> 2\u00d7 Commission calculations \u2705 CRITICAL <code>customer_revenue_ranking</code> 1\u00d7 Top customer identification \u2705 IMPORTANT <code>sales_rep_list</code> 1\u00d7 Sales rep enumeration \u2705 IMPORTANT All other tools (20) 0\u00d7 - \u274c UNUSED"},{"location":"technical/API_ARCHITECTURE/#coverage-statistics","title":"Coverage Statistics","text":"<ul> <li>Tools Used: 5 / 25 (20%)</li> <li>Tools Unused: 20 / 25 (80%)</li> <li>Token Overhead: ~4,000-6,000 tokens/request wasted on unused tool definitions</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#consolidation-recommendation","title":"Consolidation Recommendation","text":""},{"location":"technical/API_ARCHITECTURE/#proposed-architecture-25-6-tools","title":"Proposed Architecture: 25 \u2192 6 Tools","text":""},{"location":"technical/API_ARCHITECTURE/#tool-1-kledo_revenue-replaces-3-tools","title":"Tool 1: <code>kledo_revenue</code> (replaces 3 tools)","text":"<pre><code>kledo_revenue(\n    operation: \"summary\" | \"receivables\" | \"customer_ranking\",\n    date_from: str = None,\n    date_to: str = None,\n    filters: dict = {}\n)\n</code></pre> <p>Handles: - Revenue summaries (monthly, weekly, custom ranges) - Outstanding receivables tracking - Top customer rankings</p> <p>Token Savings: ~600-900 tokens/request</p>"},{"location":"technical/API_ARCHITECTURE/#tool-2-kledo_invoice-replaces-4-tools","title":"Tool 2: <code>kledo_invoice</code> (replaces 4 tools)","text":"<pre><code>kledo_invoice(\n    operation: \"list_sales\" | \"list_purchase\" | \"get_detail\" | \"get_totals\",\n    invoice_id: int = None,\n    date_from: str = None,\n    date_to: str = None,\n    status: str = None,  # \"paid\", \"unpaid\", \"partial\"\n    filters: dict = {}\n)\n</code></pre> <p>Handles: - Invoice listing (sales/purchase) - Invoice details - Invoice totals and summaries - Status-based filtering</p> <p>Token Savings: ~800-1,200 tokens/request</p>"},{"location":"technical/API_ARCHITECTURE/#tool-3-kledo_sales_analytics-replaces-2-tools","title":"Tool 3: <code>kledo_sales_analytics</code> (replaces 2 tools)","text":"<pre><code>kledo_sales_analytics(\n    operation: \"revenue_report\" | \"rep_list\" | \"commission_calc\",\n    date_from: str = None,\n    date_to: str = None,\n    sales_rep_id: int = None,\n    filters: dict = {}\n)\n</code></pre> <p>Handles: - Sales rep performance reports - Sales rep enumeration - Commission calculation support</p> <p>Token Savings: ~400-600 tokens/request</p>"},{"location":"technical/API_ARCHITECTURE/#tool-4-kledo_contact-consolidates-3-tools-keep-for-completeness","title":"Tool 4: <code>kledo_contact</code> (consolidates 3 tools, keep for completeness)","text":"<pre><code>kledo_contact(\n    operation: \"list\" | \"get_detail\" | \"get_transactions\",\n    contact_id: int = None,\n    filters: dict = {}\n)\n</code></pre> <p>Handles: - Customer/vendor listing - Contact details - Transaction history</p> <p>Usage: Low but may be needed for future queries.</p>"},{"location":"technical/API_ARCHITECTURE/#tool-5-kledo_product-consolidates-3-tools-defer","title":"Tool 5: <code>kledo_product</code> (consolidates 3 tools, defer)","text":"<pre><code>kledo_product(\n    operation: \"list\" | \"get_detail\" | \"search_sku\",\n    product_id: int = None,\n    sku: str = None,\n    filters: dict = {}\n)\n</code></pre> <p>Status: Not used in current workflows, but keep for completeness.</p>"},{"location":"technical/API_ARCHITECTURE/#tool-6-kledo_utility-keep-as-is-3-tools","title":"Tool 6: <code>kledo_utility</code> (keep as-is, 3 tools)","text":"<pre><code>kledo_utility(\n    operation: \"clear_cache\" | \"cache_stats\" | \"test_connection\"\n)\n</code></pre> <p>Status: System utilities, rarely called but useful for debugging.</p>"},{"location":"technical/API_ARCHITECTURE/#token-economics","title":"Token Economics","text":""},{"location":"technical/API_ARCHITECTURE/#current-architecture-25-tools","title":"Current Architecture (25 Tools)","text":"<pre><code>Average tool definition: 200-300 tokens\nTotal per request: 5,000-7,500 tokens\nOver 10-turn conversation: 50,000-75,000 tokens\n</code></pre>"},{"location":"technical/API_ARCHITECTURE/#proposed-architecture-6-tools","title":"Proposed Architecture (6 Tools)","text":"<pre><code>Average tool definition: 200-300 tokens\nTotal per request: 1,200-1,800 tokens\nOver 10-turn conversation: 12,000-18,000 tokens\n\nSAVINGS: ~62,000 tokens (75% reduction)\n</code></pre>"},{"location":"technical/API_ARCHITECTURE/#implementation-notes","title":"Implementation Notes","text":""},{"location":"technical/API_ARCHITECTURE/#parameter-standardization","title":"Parameter Standardization","text":"<p>Current Issue: Inconsistent parameter names across tools.</p> Tool Current Params Should Be <code>revenue_summary</code> <code>date_from</code>, <code>date_to</code> \u2705 Correct <code>sales_rep_revenue_report</code> <code>date_from</code>, <code>date_to</code> \u2705 Correct <code>invoice_list_sales</code> <code>date_from</code>, <code>date_to</code> \u2705 Correct <p>Good news: Already standardized! No changes needed.</p>"},{"location":"technical/API_ARCHITECTURE/#response-format","title":"Response Format","text":"<p>Current: Markdown-formatted text (\u2705 CORRECT for MCP)</p> <p>Example: <pre><code># Revenue Summary (PAID INVOICES ONLY)\n\n**Period**: 2026-01-01 to 2026-01-24\n**Paid Invoices**: 16\n\n## Revenue Calculation:\n**Revenue Before Tax**: Rp 92,823,250.00\n**Tax (PPN)**: Rp 8,678,450.00\n**Revenue After Tax**: Rp 101,501,700.00\n</code></pre></p> <p>Status: No changes needed. Markdown is the correct format for MCP tools.</p>"},{"location":"technical/API_ARCHITECTURE/#business-intelligence-capabilities","title":"Business Intelligence Capabilities","text":""},{"location":"technical/API_ARCHITECTURE/#currently-supported-queries","title":"Currently Supported Queries","text":""},{"location":"technical/API_ARCHITECTURE/#revenue-analysis","title":"\u2705 Revenue Analysis","text":"<ul> <li>\"What was revenue last month?\"</li> <li>\"Show revenue for last week\"</li> <li>\"Daily revenue for the past 2 days\"</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#sales-rep-performance_1","title":"\u2705 Sales Rep Performance","text":"<ul> <li>\"Who are our sales representatives?\"</li> <li>\"Show revenue by sales rep for this month\"</li> <li>\"Which sales rep has the highest revenue?\"</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#invoice-lifecycle","title":"\u2705 Invoice Lifecycle","text":"<ul> <li>\"How many invoices were created this month?\"</li> <li>\"How many invoices are paid?\"</li> <li>\"Show outstanding invoices\"</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#customer-analysis_1","title":"\u2705 Customer Analysis","text":"<ul> <li>\"Who is our biggest customer this month?\"</li> <li>\"Top 10 customers by revenue\"</li> <li>\"Show transaction history for customer X\"</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#commission-calculation-partial","title":"\u26a0\ufe0f Commission Calculation (Partial)","text":"<ul> <li>\u2705 Revenue data per sales rep</li> <li>\u274c Sales targets (not in API)</li> <li>\u274c Commission formula (not implemented)</li> </ul> <p>Next Steps for Commissions: 1. Add sales target tracking (manual input or separate table) 2. Implement commission formula logic 3. Create commission_calculator tool</p>"},{"location":"technical/API_ARCHITECTURE/#data-quality-completeness","title":"Data Quality &amp; Completeness","text":""},{"location":"technical/API_ARCHITECTURE/#excellent-data-coverage","title":"\u2705 Excellent Data Coverage","text":"<ul> <li>Invoice fields: 75+ fields available</li> <li>Nested relationships: Contact, sales_person, warehouse, payment terms</li> <li>Financial precision: Separate before-tax and after-tax amounts</li> <li>Date tracking: trans_date, due_date, payment_date, paid_date</li> <li>Status tracking: Clear status_id (1/2/3) for payment states</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#no-missing-critical-data","title":"\u2705 No Missing Critical Data","text":"<p>All fields needed for current business queries are present: - \u2705 Revenue amounts (subtotal, total_tax, amount_after_tax) - \u2705 Sales rep identification (sales_id, sales_person.name) - \u2705 Customer details (contact.name, contact.company) - \u2705 Payment status (status_id, due_days) - \u2705 Date ranges for filtering</p>"},{"location":"technical/API_ARCHITECTURE/#recommendations","title":"Recommendations","text":""},{"location":"technical/API_ARCHITECTURE/#immediate-actions-priority-order","title":"Immediate Actions (Priority Order)","text":"<ol> <li>\u2705 Complete: API is working, full data available</li> <li>Next: Refactor to 6 consolidated tools (75% token savings)</li> <li>Then: Build commission calculator with target tracking</li> <li>Finally: Add remaining entities (orders, deliveries) as needed</li> </ol>"},{"location":"technical/API_ARCHITECTURE/#tool-consolidation-benefits","title":"Tool Consolidation Benefits","text":"<ul> <li>Performance: 75% reduction in token overhead</li> <li>UX: Clearer tool selection (6 entities vs 25 operations)</li> <li>Maintenance: Simpler codebase, easier to extend</li> <li>Cost: Significant token cost savings at scale</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#when-to-add-more-tools","title":"When to Add More Tools","text":"<p>Only add new tools when: 1. Real business query cannot be satisfied by existing 6 tools 2. New tool serves a distinct business entity (not operation variant) 3. Usage justifies the token overhead (~200-300 tokens/request)</p>"},{"location":"technical/API_ARCHITECTURE/#appendix-full-endpoint-reference","title":"Appendix: Full Endpoint Reference","text":""},{"location":"technical/API_ARCHITECTURE/#invoices","title":"Invoices","text":"<ul> <li><code>GET /finance/invoices</code> - List sales invoices</li> <li><code>GET /finance/invoices/{id}</code> - Invoice details</li> <li><code>GET /finance/invoices/totals</code> - Invoice totals</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#reports","title":"Reports","text":"<ul> <li><code>GET /reportings/activity-team</code> - Activity team report</li> <li><code>GET /reportings/profit-loss</code> - Profit &amp; loss</li> <li><code>GET /reportings/sales-by-contact</code> - Sales by customer</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#products","title":"Products","text":"<ul> <li><code>GET /finance/products</code> - List products</li> <li><code>GET /finance/products/{id}</code> - Product details</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#contacts","title":"Contacts","text":"<ul> <li><code>GET /finance/contacts</code> - List contacts</li> <li><code>GET /finance/contacts/{id}</code> - Contact details</li> <li><code>GET /finance/contacts/{id}/transactions</code> - Contact transactions</li> </ul>"},{"location":"technical/API_ARCHITECTURE/#supporting-data","title":"Supporting Data","text":"<ul> <li><code>GET /finance/units</code> - Product units</li> <li><code>GET /finance/tags</code> - Transaction tags</li> <li><code>GET /warehouses</code> - Warehouse list</li> </ul> <p>Document Version: 1.0.0 Last Validated: January 24, 2026 with real API calls Status: Production-ready, consolidation recommended</p>"},{"location":"technical/FIELD_MAPPING_DECISION/","title":"Field Mapping Decision Analysis","text":"<p>Question: Should we convert Kledo API fields to our own naming system?</p> <p>Date: January 24, 2026 Decision Status: \ud83e\udd14 Analysis for Discussion</p>"},{"location":"technical/FIELD_MAPPING_DECISION/#the-problem","title":"\ud83c\udfaf The Problem","text":"<p>Kledo API uses field names that can be confusing:</p> <pre><code># Kledo API fields (actual data):\n{\n    \"subtotal\": 16320000,          # What subtotal? Of what?\n    \"total_tax\": 1795200,           # OK, clear\n    \"amount_after_tax\": 18115200    # Confusing! \"after\" suggests subtraction,\n                                    # but actually means \"including tax\"\n}\n</code></pre> <p>Confusion Points: 1. \u274c <code>amount_after_tax</code> sounds like tax was subtracted, but actually tax was ADDED 2. \u274c <code>subtotal</code> is vague - subtotal of what? 3. \u274c International developers will misinterpret these terms</p>"},{"location":"technical/FIELD_MAPPING_DECISION/#option-1-keep-kledo-fields-as-is-no-conversion","title":"\ud83d\udd04 Option 1: Keep Kledo Fields As-Is (No Conversion)","text":""},{"location":"technical/FIELD_MAPPING_DECISION/#approach","title":"Approach","text":"<p>Use Kledo field names directly throughout our system:</p> <pre><code># Example usage:\nrevenue_report = {\n    \"subtotal\": 16320000,\n    \"total_tax\": 1795200,\n    \"amount_after_tax\": 18115200\n}\n\n# In analytics:\ntotal_revenue_before_tax = sum(inv[\"subtotal\"] for inv in invoices)\ntotal_revenue_with_tax = sum(inv[\"amount_after_tax\"] for inv in invoices)\n</code></pre>"},{"location":"technical/FIELD_MAPPING_DECISION/#pros","title":"\u2705 Pros","text":"<ol> <li>Simple &amp; Direct</li> <li>No mapping layer needed</li> <li>One less thing to maintain</li> <li> <p>Direct passthrough from API to reports</p> </li> <li> <p>Performance</p> </li> <li>Zero conversion overhead</li> <li>No CPU cycles wasted on renaming</li> <li> <p>Smaller memory footprint</p> </li> <li> <p>API Alignment</p> </li> <li>Easy to debug (field names match API docs)</li> <li>Easy to trace data flow</li> <li> <p>Clear when looking at API responses</p> </li> <li> <p>Less Code</p> </li> <li>No mapping functions to write</li> <li>No conversion bugs possible</li> <li>Fewer lines of code</li> </ol>"},{"location":"technical/FIELD_MAPPING_DECISION/#cons","title":"\u274c Cons","text":"<ol> <li>Confusing Naming</li> <li><code>amount_after_tax</code> misleading for international teams</li> <li><code>subtotal</code> too vague</li> <li> <p>Need heavy documentation</p> </li> <li> <p>Tight Coupling</p> </li> <li>System depends on Kledo's naming choices</li> <li>If Kledo changes field names \u2192 we break</li> <li> <p>Hard to switch to different accounting system</p> </li> <li> <p>Domain Knowledge Required</p> </li> <li>Every developer needs to understand Kledo's naming</li> <li>Onboarding new devs takes longer</li> <li> <p>Risk of misuse (thinking \"after_tax\" means minus tax)</p> </li> <li> <p>Business Communication Gap</p> </li> <li>Finance team talks about \"Penjualan Bruto/Neto\"</li> <li>Code talks about \"subtotal/amount_after_tax\"</li> <li>Translation layer in conversations</li> </ol>"},{"location":"technical/FIELD_MAPPING_DECISION/#cost-analysis","title":"\ud83d\udcb0 Cost Analysis","text":"<ul> <li>Development Time: 0 hours (nothing to build)</li> <li>Maintenance: Low (no mapping to update)</li> <li>Onboarding: Medium (need to explain Kledo naming)</li> <li>Risk of Bugs: Low (no conversion = no conversion bugs)</li> </ul>"},{"location":"technical/FIELD_MAPPING_DECISION/#option-2-convert-to-clear-domain-names","title":"\ud83d\udd04 Option 2: Convert to Clear Domain Names","text":""},{"location":"technical/FIELD_MAPPING_DECISION/#approach_1","title":"Approach","text":"<p>Create a domain model with clear, unambiguous names:</p> <pre><code># Domain model (our names):\nclass InvoiceRevenue:\n    gross_sales: Decimal          # Total paid by customer (with tax)\n    tax_collected: Decimal        # PPN collected\n    net_sales: Decimal            # Revenue before tax\n\n# Conversion layer:\ndef from_kledo_invoice(kledo_data: dict) -&gt; InvoiceRevenue:\n    \"\"\"Convert Kledo API fields to our domain model.\"\"\"\n    return InvoiceRevenue(\n        gross_sales=Decimal(kledo_data[\"amount_after_tax\"]),\n        tax_collected=Decimal(kledo_data[\"total_tax\"]),\n        net_sales=Decimal(kledo_data[\"subtotal\"])\n    )\n\n# Usage in analytics:\nrevenue_report = {\n    \"gross_sales\": 18115200,      # Clear: total including tax\n    \"tax_collected\": 1795200,      # Clear: tax amount\n    \"net_sales\": 16320000          # Clear: revenue before tax\n}\n</code></pre>"},{"location":"technical/FIELD_MAPPING_DECISION/#pros_1","title":"\u2705 Pros","text":"<ol> <li>Crystal Clear Naming</li> <li><code>gross_sales</code> = obvious (total transaction)</li> <li><code>net_sales</code> = obvious (company's revenue)</li> <li><code>tax_collected</code> = obvious (PPN)</li> <li> <p>Zero ambiguity, international standard terms</p> </li> <li> <p>Business Alignment</p> </li> <li>Matches finance team terminology</li> <li>Matches accounting standards</li> <li> <p>Easier communication across teams</p> </li> <li> <p>Loose Coupling</p> </li> <li>System independent of Kledo's naming</li> <li>Easy to switch accounting systems</li> <li> <p>Changes in Kledo API only affect mapping layer</p> </li> <li> <p>Self-Documenting Code <pre><code># This is clear:\nif invoice.net_sales &gt; 10_000_000:\n    apply_volume_discount()\n\n# vs this (confusing):\nif invoice.subtotal &gt; 10_000_000:\n    apply_volume_discount()  # subtotal of what?\n</code></pre></p> </li> <li> <p>Type Safety</p> </li> <li>Can add validation in conversion</li> <li>Enforce business rules (net + tax = gross)</li> <li>Catch data inconsistencies early</li> </ol>"},{"location":"technical/FIELD_MAPPING_DECISION/#cons_1","title":"\u274c Cons","text":"<ol> <li>Extra Layer to Maintain</li> <li>Conversion functions need maintenance</li> <li>If Kledo adds fields \u2192 update mapping</li> <li> <p>More code = more potential bugs</p> </li> <li> <p>Performance Overhead (minimal)</p> </li> <li>Extra function calls</li> <li>Memory for duplicated data structures</li> <li> <p>(But negligible in practice)</p> </li> <li> <p>Development Time</p> </li> <li>Need to write conversion layer (~4-8 hours)</li> <li>Need to write tests for conversion</li> <li> <p>Need to update existing code</p> </li> <li> <p>Two Sources of Truth (if not careful)</p> </li> <li>Risk of using wrong model in wrong place</li> <li>Need clear boundaries: \"API layer uses Kledo, domain layer uses our model\"</li> </ol>"},{"location":"technical/FIELD_MAPPING_DECISION/#cost-analysis_1","title":"\ud83d\udcb0 Cost Analysis","text":"<ul> <li>Development Time: 4-8 hours initial setup</li> <li>Maintenance: Medium (update mapping when API changes)</li> <li>Onboarding: Low (clear names = easy to understand)</li> <li>Risk of Bugs: Medium (conversion bugs possible, but testable)</li> </ul>"},{"location":"technical/FIELD_MAPPING_DECISION/#recommended-architecture-hybrid-approach","title":"\ud83c\udfd7\ufe0f Recommended Architecture (Hybrid Approach)","text":""},{"location":"technical/FIELD_MAPPING_DECISION/#best-practice-separation-of-concerns","title":"Best Practice: Separation of Concerns","text":"<pre><code># Layer 1: API/Data Layer (Kledo fields)\nclass KledoInvoiceData:\n    \"\"\"Raw data from Kledo API - field names match API exactly.\"\"\"\n    subtotal: int\n    total_tax: int\n    amount_after_tax: int\n\n# Layer 2: Domain/Business Layer (Our names)\nclass InvoiceFinancials:\n    \"\"\"Business domain model - clear, unambiguous names.\"\"\"\n    net_sales: Decimal          # Revenue before tax\n    tax_collected: Decimal      # PPN collected\n    gross_sales: Decimal        # Total transaction value\n\n    @classmethod\n    def from_kledo(cls, data: KledoInvoiceData) -&gt; \"InvoiceFinancials\":\n        \"\"\"Convert Kledo data to domain model.\"\"\"\n        return cls(\n            net_sales=Decimal(data.subtotal),\n            tax_collected=Decimal(data.total_tax),\n            gross_sales=Decimal(data.amount_after_tax)\n        )\n\n    def validate(self):\n        \"\"\"Ensure data integrity.\"\"\"\n        assert self.net_sales + self.tax_collected == self.gross_sales\n\n# Layer 3: Presentation Layer (Reports)\ndef generate_revenue_report(invoices: List[InvoiceFinancials]) -&gt; dict:\n    \"\"\"Generate report using domain model.\"\"\"\n    return {\n        \"penjualan_bruto\": sum(inv.gross_sales for inv in invoices),\n        \"ppn_collected\": sum(inv.tax_collected for inv in invoices),\n        \"penjualan_neto\": sum(inv.net_sales for inv in invoices)\n    }\n</code></pre>"},{"location":"technical/FIELD_MAPPING_DECISION/#layer-boundaries","title":"Layer Boundaries","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 PRESENTATION LAYER                                  \u2502\n\u2502 - Dashboards, Reports, API responses                \u2502\n\u2502 - Uses: Domain model (InvoiceFinancials)            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 BUSINESS/DOMAIN LAYER                               \u2502\n\u2502 - Analytics, Calculations, Business Logic           \u2502\n\u2502 - Uses: Domain model (InvoiceFinancials)            \u2502\n\u2502 - Names: gross_sales, net_sales, tax_collected      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 CONVERSION LAYER (Adapter Pattern)                  \u2502\n\u2502 - from_kledo() mapping functions                    \u2502\n\u2502 - Validation &amp; data integrity checks                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 DATA/API LAYER                                      \u2502\n\u2502 - Kledo API client                                  \u2502\n\u2502 - Uses: Kledo field names (as-is)                   \u2502\n\u2502 - Names: subtotal, amount_after_tax, total_tax      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"technical/FIELD_MAPPING_DECISION/#decision-matrix","title":"\ud83d\udcca Decision Matrix","text":"Criteria No Conversion With Conversion Weight Code Clarity 3/10 (confusing) 9/10 (crystal clear) HIGH Maintenance 8/10 (simple) 6/10 (extra layer) MEDIUM Performance 10/10 (zero overhead) 9/10 (negligible) LOW Onboarding 5/10 (need docs) 9/10 (self-evident) HIGH Future-Proof 4/10 (tight coupling) 9/10 (loose coupling) HIGH Dev Time 10/10 (zero) 7/10 (4-8 hours) MEDIUM Bug Risk 9/10 (no conversion bugs) 7/10 (testable) MEDIUM <p>Weighted Score: - No Conversion: 5.8/10 - With Conversion: 8.2/10 \u2705</p>"},{"location":"technical/FIELD_MAPPING_DECISION/#my-recommendation-convert-option-2","title":"\ud83d\udca1 My Recommendation: Convert (Option 2)","text":""},{"location":"technical/FIELD_MAPPING_DECISION/#why-convert","title":"Why Convert?","text":"<ol> <li>Long-term Investment</li> <li>Yes, takes 4-8 hours now</li> <li>But saves 100+ hours over project lifetime</li> <li> <p>Every developer instantly understands code</p> </li> <li> <p>Professional Quality</p> </li> <li>Clear domain models = production-grade system</li> <li>Messy field names = prototype-grade</li> <li> <p>We're building analytics platform, not throwaway script</p> </li> <li> <p>Team Scalability</p> </li> <li>New developers productive immediately</li> <li>Finance team can read code directly</li> <li> <p>No \"Kledo naming translation\" needed</p> </li> <li> <p>Risk Mitigation</p> </li> <li>If Kledo changes API \u2192 only mapper breaks</li> <li>If we switch accounting systems \u2192 only mapper changes</li> <li>Business logic stays clean</li> </ol>"},{"location":"technical/FIELD_MAPPING_DECISION/#when-not-to-convert","title":"When NOT to Convert?","text":"<p>Only keep Kledo names if: - \u274c This is temporary/POC code (&lt; 3 months lifespan) - \u274c Only 1 developer will ever touch this - \u274c No plans to grow beyond basic reports - \u274c Time pressure is extreme (&lt; 1 week to ship)</p> <p>Otherwise: Convert to domain model</p>"},{"location":"technical/FIELD_MAPPING_DECISION/#implementation-plan-if-converting","title":"\ud83d\udd28 Implementation Plan (If Converting)","text":""},{"location":"technical/FIELD_MAPPING_DECISION/#phase-1-define-domain-model-1-hour","title":"Phase 1: Define Domain Model (1 hour)","text":"<pre><code># src/models/domain.py\nfrom decimal import Decimal\nfrom dataclasses import dataclass\n\n@dataclass\nclass InvoiceFinancials:\n    \"\"\"Financial data for a single invoice.\"\"\"\n    net_sales: Decimal          # Penjualan Neto (before tax)\n    tax_collected: Decimal      # PPN collected\n    gross_sales: Decimal        # Penjualan Bruto (with tax)\n\n    def __post_init__(self):\n        \"\"\"Validate data integrity.\"\"\"\n        expected_gross = self.net_sales + self.tax_collected\n        if abs(expected_gross - self.gross_sales) &gt; Decimal(\"0.01\"):\n            raise ValueError(\n                f\"Data integrity error: net_sales ({self.net_sales}) + \"\n                f\"tax_collected ({self.tax_collected}) != \"\n                f\"gross_sales ({self.gross_sales})\"\n            )\n</code></pre>"},{"location":"technical/FIELD_MAPPING_DECISION/#phase-2-create-mapper-2-hours","title":"Phase 2: Create Mapper (2 hours)","text":"<pre><code># src/mappers/kledo_mapper.py\n\ndef map_invoice_financials(kledo_invoice: dict) -&gt; InvoiceFinancials:\n    \"\"\"\n    Convert Kledo invoice to domain model.\n\n    Kledo API uses confusing names:\n    - \"amount_after_tax\" = gross sales (WITH tax)\n    - \"subtotal\" = net sales (BEFORE tax)\n    - \"total_tax\" = tax collected\n\n    We normalize to clear terms:\n    - gross_sales = total transaction (what customer pays)\n    - net_sales = revenue before tax (what company keeps)\n    - tax_collected = PPN that goes to government\n    \"\"\"\n    return InvoiceFinancials(\n        net_sales=Decimal(str(kledo_invoice[\"subtotal\"])),\n        tax_collected=Decimal(str(kledo_invoice[\"total_tax\"])),\n        gross_sales=Decimal(str(kledo_invoice[\"amount_after_tax\"]))\n    )\n</code></pre>"},{"location":"technical/FIELD_MAPPING_DECISION/#phase-3-update-tools-3-hours","title":"Phase 3: Update Tools (3 hours)","text":"<pre><code># src/tools/revenue.py (updated)\n\nasync def _revenue_summary(args: Dict[str, Any], client: KledoAPIClient) -&gt; str:\n    \"\"\"Get revenue summary using domain model.\"\"\"\n\n    # Fetch from API (Kledo fields)\n    kledo_data = await client.list_invoices(...)\n    invoices = kledo_data.get(\"data\", {}).get(\"data\", [])\n\n    # Convert to domain model\n    financial_data = [\n        map_invoice_financials(inv)\n        for inv in invoices\n    ]\n\n    # Calculate using clear names\n    total_gross_sales = sum(inv.gross_sales for inv in financial_data)\n    total_net_sales = sum(inv.net_sales for inv in financial_data)\n    total_tax = sum(inv.tax_collected for inv in financial_data)\n\n    # Report with business terminology\n    return f\"\"\"\n# Revenue Summary\n\n**Period**: {date_from} to {date_to}\n**Paid Invoices**: {len(financial_data)}\n\n## Financial Overview\n**Penjualan Bruto (Gross Sales)**: Rp {total_gross_sales:,.0f}\n**PPN Collected**: Rp {total_tax:,.0f}\n**Penjualan Neto (Net Sales)**: Rp {total_net_sales:,.0f}\n\"\"\"\n</code></pre>"},{"location":"technical/FIELD_MAPPING_DECISION/#phase-4-write-tests-2-hours","title":"Phase 4: Write Tests (2 hours)","text":"<pre><code># tests/test_kledo_mapper.py\n\ndef test_kledo_to_domain_conversion():\n    \"\"\"Test mapping from Kledo fields to domain model.\"\"\"\n    kledo_data = {\n        \"subtotal\": 16320000,\n        \"total_tax\": 1795200,\n        \"amount_after_tax\": 18115200\n    }\n\n    result = map_invoice_financials(kledo_data)\n\n    assert result.net_sales == Decimal(\"16320000\")\n    assert result.tax_collected == Decimal(\"1795200\")\n    assert result.gross_sales == Decimal(\"18115200\")\n\ndef test_data_integrity_validation():\n    \"\"\"Test that conversion validates data integrity.\"\"\"\n    bad_data = {\n        \"subtotal\": 16320000,\n        \"total_tax\": 1795200,\n        \"amount_after_tax\": 99999999  # Wrong!\n    }\n\n    with pytest.raises(ValueError, match=\"Data integrity error\"):\n        map_invoice_financials(bad_data)\n</code></pre>"},{"location":"technical/FIELD_MAPPING_DECISION/#long-term-benefits","title":"\ud83d\udcc8 Long-term Benefits","text":""},{"location":"technical/FIELD_MAPPING_DECISION/#scenario-1-new-developer-joins","title":"Scenario 1: New Developer Joins","text":"<p>Without Conversion: <pre><code># They see this and think:\nrevenue_before_tax = invoice[\"amount_after_tax\"]  # Wait, what??\n# Needs 30 minutes explanation + docs\n</code></pre></p> <p>With Conversion: <pre><code># They see this and understand immediately:\nrevenue_before_tax = invoice.net_sales  # Clear!\n# Zero explanation needed\n</code></pre></p> <p>Time Saved: 30 min \u00d7 every new developer = Hours saved</p>"},{"location":"technical/FIELD_MAPPING_DECISION/#scenario-2-switch-to-different-accounting-system","title":"Scenario 2: Switch to Different Accounting System","text":"<p>Without Conversion: <pre><code># Need to find and update 50+ places where \"subtotal\" is used\n# Risk: miss some, introduce bugs\n</code></pre></p> <p>With Conversion: <pre><code># Only update mapper.py (1 file, 10 lines)\n# All business logic stays the same\n</code></pre></p> <p>Time Saved: Days of refactoring avoided</p>"},{"location":"technical/FIELD_MAPPING_DECISION/#scenario-3-finance-team-reviews-code","title":"Scenario 3: Finance Team Reviews Code","text":"<p>Without Conversion: <pre><code>Finance: \"Where's Penjualan Bruto?\"\nDev: \"That's amount_after_tax\"\nFinance: \"But 'after tax' means minus tax?\"\nDev: \"No, in Kledo it means plus tax\"\nFinance: \"That's confusing...\"\n</code></pre></p> <p>With Conversion: <pre><code>Finance: \"I see gross_sales, net_sales - perfect!\"\nDev: \"Yep, matches your terminology exactly\"\nFinance: \"Easy to audit!\"\n</code></pre></p> <p>Benefit: Zero communication gap</p>"},{"location":"technical/FIELD_MAPPING_DECISION/#final-recommendation","title":"\ud83c\udfaf Final Recommendation","text":""},{"location":"technical/FIELD_MAPPING_DECISION/#for-your-kledo-mcp-project","title":"For Your Kledo MCP Project:","text":"<p>DO CONVERT because:</p> <ol> <li>\u2705 You're building analytics platform (long-term)</li> <li>\u2705 Finance team will use this (business alignment critical)</li> <li>\u2705 May add more features later (scalability matters)</li> <li>\u2705 Only 4-8 hours investment (minimal cost)</li> <li>\u2705 Reduces future confusion/bugs (ROI positive)</li> </ol>"},{"location":"technical/FIELD_MAPPING_DECISION/#implementation-strategy","title":"Implementation Strategy:","text":"<pre><code>Week 1:\n- Define domain model (InvoiceFinancials)\n- Create mapper (kledo_mapper.py)\n- Write tests\n\nWeek 2:\n- Update 3 most-used tools (revenue, invoice, sales_analytics)\n- Validate with real queries\n\nWeek 3:\n- Update remaining tools\n- Update documentation\n- Team review\n</code></pre> <p>Total Time: ~12 hours spread over 3 weeks Long-term Savings: 100+ hours over 1 year</p>"},{"location":"technical/FIELD_MAPPING_DECISION/#references","title":"\ud83d\udcda References","text":"<ul> <li>Domain-Driven Design (Eric Evans): Separate domain model from data model</li> <li>Clean Architecture (Robert Martin): Dependencies point inward, domain is independent</li> <li>Adapter Pattern: Convert external API to internal model</li> </ul> <p>Decision: Convert Kledo fields to clear domain names \u2705 Rationale: Long-term code quality &gt; short-term convenience Next Step: Implement domain model + mapper (4-8 hours)</p>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/","title":"Quick Decisions Summary","text":"<p>Session: January 24, 2026 Status: Ready for Implementation</p>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#key-decisions","title":"\u2705 Key Decisions","text":""},{"location":"technical/QUICK_DECISIONS_SUMMARY/#1-field-mapping-convert","title":"1. Field Mapping: CONVERT \u2705","text":"<p>Decision: Convert Kledo fields \u2192 Domain model</p> <p>Mapping: <pre><code>amount_after_tax  \u2192  gross_sales      (Penjualan Bruto)\nsubtotal          \u2192  net_sales        (Penjualan Neto)\ntotal_tax         \u2192  tax_collected    (PPN)\n</code></pre></p> <p>Why: Clear naming, professional code, easy onboarding Cost: 8 hours investment Return: 100+ hours saved long-term</p>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#2-tool-consolidation-approved","title":"2. Tool Consolidation: APPROVED \u2705","text":"<p>Decision: Reduce 25 \u2192 6-9 tools</p> <p>Current Waste: - Only 5/25 tools used (20%) - 80% token waste (~4-6K per request)</p> <p>After: - 6-9 consolidated tools - 75% token savings - Better UX</p> <p>Priority: Medium (after domain model)</p>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#3-documentation-organized","title":"3. Documentation: ORGANIZED \u2705","text":"<p>Structure: <pre><code>docs/technical/\n\u251c\u2500\u2500 API_ARCHITECTURE.md       (Complete API ref)\n\u251c\u2500\u2500 QUICK_REFERENCE.md        (Developer cheat sheet)\n\u251c\u2500\u2500 ANALYTICS_CAPABILITY_MAP.md (60+ reports mapped)\n\u251c\u2500\u2500 FIELD_MAPPING_DECISION.md (Architecture decision)\n\u251c\u2500\u2500 SESSION_HANDOFF.md        (Full context)\n\u2514\u2500\u2500 QUICK_DECISIONS_SUMMARY.md (This file)\n</code></pre></p>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#validated-data","title":"\ud83d\udcca Validated Data","text":""},{"location":"technical/QUICK_DECISIONS_SUMMARY/#field-definitions-proven-with-5-invoices","title":"Field Definitions (PROVEN with 5 invoices):","text":"<pre><code># Mathematical proof:\nsubtotal + total_tax = amount_after_tax \u2705\n\n# Example:\n16,320,000 + 1,795,200 = 18,115,200 \u2705\n\n# Correct meanings:\nsubtotal         = Revenue BEFORE tax (Penjualan Neto)\ntotal_tax        = PPN collected (11%)\namount_after_tax = Revenue INCLUDING tax (Penjualan Bruto)\n</code></pre>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#implementation-priority","title":"\ud83d\ude80 Implementation Priority","text":""},{"location":"technical/QUICK_DECISIONS_SUMMARY/#phase-1-domain-model-immediate-8-hours","title":"Phase 1: Domain Model (IMMEDIATE) \u23f1\ufe0f 8 hours","text":"<p>Tasks: 1. Create <code>InvoiceFinancials</code> class 2. Create mapper functions 3. Write tests 4. Update 3 core tools</p> <p>Files to Create: - <code>src/models/invoice_financials.py</code> - <code>src/mappers/kledo_mapper.py</code> - <code>tests/test_kledo_mapper.py</code></p>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#phase-2-tool-consolidation-next-1-2-weeks","title":"Phase 2: Tool Consolidation (NEXT) \u23f1\ufe0f 1-2 weeks","text":"<p>Tasks: 1. Design 6-9 consolidated tools 2. Implement new tools 3. Migrate from 25 old tools 4. Test &amp; validate</p>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#phase-3-core-reports-later-2-3-weeks","title":"Phase 3: Core Reports (LATER) \u23f1\ufe0f 2-3 weeks","text":"<p>Reports: 1. AR Aging Report 2. DSO Calculator 3. Payment Behavior Scoring 4. Revenue Breakdown Dashboard</p>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#quick-reference","title":"\ud83d\udcdd Quick Reference","text":""},{"location":"technical/QUICK_DECISIONS_SUMMARY/#most-used-tools-from-testing","title":"Most Used Tools (from testing):","text":"<ol> <li><code>revenue_summary</code> (3\u00d7 calls)</li> <li><code>invoice_list_sales</code> (3\u00d7 calls)</li> <li><code>sales_rep_revenue_report</code> (2\u00d7 calls)</li> </ol>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#missing-data-for-future","title":"Missing Data (for future):","text":"<ul> <li>\u274c Sales targets (for commissions)</li> <li>\u274c Product costs (for margins)</li> <li>\u274c Marketing spend (for CAC)</li> </ul>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#token-economics","title":"Token Economics:","text":"<pre><code>Current:  6,250 tokens/request (25 tools)\nTarget:   1,500 tokens/request (9 tools)\nSavings:  75% reduction\n</code></pre>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#next-session-action","title":"\ud83c\udfaf Next Session Action","text":"<p>Start Here: 1. Read <code>SESSION_HANDOFF.md</code> (full context) 2. Review <code>FIELD_MAPPING_DECISION.md</code> (architecture) 3. Run <code>tests/validate_invoice_fields.py</code> (refresh memory) 4. Create domain model (1 hour) 5. Create mapper (2 hours) 6. Write tests (2 hours) 7. Update one tool (1 hour)</p> <p>Success Criteria: - \u2705 Tests pass - \u2705 Code uses <code>gross_sales</code> not <code>amount_after_tax</code> - \u2705 Finance team can read code</p>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#important-notes","title":"\u26a0\ufe0f Important Notes","text":""},{"location":"technical/QUICK_DECISIONS_SUMMARY/#field-naming-confusion-fixed","title":"Field Naming Confusion (FIXED):","text":"<ul> <li>\u274c OLD: \"Gross Revenue = subtotal\"</li> <li>\u2705 NEW: \"Gross Sales = amount_after_tax\"</li> </ul>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#indonesian-terminology","title":"Indonesian Terminology:","text":"<ul> <li>\"amount_after_tax\" = INCLUDING tax (not minus tax)</li> <li>This is standard Indonesian accounting terminology</li> </ul>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#files-changed","title":"Files Changed:","text":"<ul> <li>\u2705 <code>ANALYTICS_CAPABILITY_MAP.md</code> (section 1.1 corrected)</li> <li>\u2705 All docs moved to <code>docs/technical/</code></li> </ul>"},{"location":"technical/QUICK_DECISIONS_SUMMARY/#questions-answered","title":"\ud83d\udcde Questions Answered","text":"<ol> <li> <p>Q: Field dari API atau buatan kita?    A: <code>amount_after_tax</code> adalah field asli dari Kledo API \u2705</p> </li> <li> <p>Q: Harus convert atau keep as-is?    A: CONVERT - 8 hours investment, 100+ hours ROI \u2705</p> </li> <li> <p>Q: Prioritas implementasi?    A: Domain model \u2192 Tool consolidation \u2192 Reports \u2705</p> </li> </ol> <p>Ready for Phase 1 Implementation \ud83d\ude80 Next: Create domain model (8 hours)</p>"},{"location":"technical/QUICK_REFERENCE/","title":"Kledo API - Quick Reference Guide","text":"<p>Quick lookup for common operations and data structures.</p>"},{"location":"technical/QUICK_REFERENCE/#most-used-tools-based-on-real-usage","title":"\ud83d\udd25 Most Used Tools (Based on Real Usage)","text":""},{"location":"technical/QUICK_REFERENCE/#revenue-summary","title":"Revenue Summary","text":"<pre><code># Get revenue for any period\nrevenue_summary(date_from=\"2026-01-01\", date_to=\"2026-01-31\")\n\n# Shortcuts available\nrevenue_summary(date_from=\"this_month\")\nrevenue_summary(date_from=\"last_month\")\nrevenue_summary(date_from=\"this_year\")\n</code></pre> <p>Returns: - Revenue Before Tax - Tax Amount (PPN) - Revenue After Tax - Number of paid invoices - Average invoice value</p>"},{"location":"technical/QUICK_REFERENCE/#invoice-listing","title":"Invoice Listing","text":"<pre><code># All invoices this month\ninvoice_list_sales(\n    date_from=\"2026-01-01\",\n    date_to=\"2026-01-31\"\n)\n\n# Only paid invoices\ninvoice_list_sales(\n    date_from=\"2026-01-01\",\n    date_to=\"2026-01-31\",\n    status=\"paid\"  # or \"unpaid\", \"partial\"\n)\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#sales-rep-performance","title":"Sales Rep Performance","text":"<pre><code># Get all sales reps\nsales_rep_list()\n\n# Revenue by sales rep\nsales_rep_revenue_report(\n    date_from=\"2026-01-01\",\n    date_to=\"2026-01-31\"\n)\n</code></pre> <p>Returns for each rep: - Sales rep name - Total revenue (before/after tax) - Number of invoices - Average invoice value</p>"},{"location":"technical/QUICK_REFERENCE/#top-customers","title":"Top Customers","text":"<pre><code># Get top 10 customers by revenue\ncustomer_revenue_ranking(\n    date_from=\"2026-01-01\",\n    date_to=\"2026-01-31\",\n    top_n=10\n)\n</code></pre> <p>Returns: - Customer name &amp; company - Total revenue - Number of invoices - Average invoice value</p>"},{"location":"technical/QUICK_REFERENCE/#invoice-data-structure","title":"\ud83d\udcca Invoice Data Structure","text":""},{"location":"technical/QUICK_REFERENCE/#key-financial-fields","title":"Key Financial Fields","text":"<pre><code>{\n    # Amounts (IDR)\n    'subtotal': 16320000,           # Before tax\n    'total_tax': 1795200,            # Tax amount\n    'amount_after_tax': 18115200,    # After tax\n\n    # Status\n    'status_id': 3,                  # 1=Unpaid, 2=Partial, 3=Paid\n    'due': 0,                        # Outstanding amount\n    'due_days': 0,                   # Days overdue\n\n    # Dates\n    'trans_date': '2026-01-23',\n    'due_date': '2026-01-23',\n    'paid_date': '2026-01-23',\n\n    # People\n    'sales_person': {\n        'id': 230701,\n        'name': 'Ahmad Kurniawan'\n    },\n    'contact': {\n        'id': 489,\n        'name': 'Tahroni Arifin',\n        'company': 'PT. RANGKA RUANG INDONESIA'\n    }\n}\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#common-calculations","title":"\ud83e\uddee Common Calculations","text":""},{"location":"technical/QUICK_REFERENCE/#total-revenue","title":"Total Revenue","text":"<pre><code># Revenue before tax\nrevenue_before_tax = sum(inv['subtotal'] for inv in invoices if inv['status_id'] == 3)\n\n# Revenue after tax\nrevenue_after_tax = sum(inv['amount_after_tax'] for inv in invoices if inv['status_id'] == 3)\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#group-by-sales-rep","title":"Group by Sales Rep","text":"<pre><code>from collections import defaultdict\n\nrep_revenue = defaultdict(lambda: {'total': 0, 'count': 0, 'name': ''})\n\nfor invoice in paid_invoices:\n    sales_id = invoice['sales_id']\n    rep_revenue[sales_id]['total'] += invoice['amount_after_tax']\n    rep_revenue[sales_id]['count'] += 1\n    rep_revenue[sales_id]['name'] = invoice['sales_person']['name']\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#group-by-customer","title":"Group by Customer","text":"<pre><code>customer_revenue = defaultdict(lambda: {'total': 0, 'count': 0, 'name': ''})\n\nfor invoice in paid_invoices:\n    contact_id = invoice['contact_id']\n    customer_revenue[contact_id]['total'] += invoice['amount_after_tax']\n    customer_revenue[contact_id]['count'] += 1\n    customer_revenue[contact_id]['name'] = invoice['contact']['name']\n\n# Sort by revenue\ntop_customers = sorted(customer_revenue.items(), key=lambda x: x[1]['total'], reverse=True)\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#status-codes","title":"\u26a1 Status Codes","text":""},{"location":"technical/QUICK_REFERENCE/#invoice-status","title":"Invoice Status","text":"<pre><code>STATUS_UNPAID = 1      # Belum Dibayar\nSTATUS_PARTIAL = 2     # Dibayar Sebagian\nSTATUS_PAID = 3        # Lunas\n\n# Get outstanding invoices\noutstanding = [inv for inv in invoices if inv['status_id'] in [STATUS_UNPAID, STATUS_PARTIAL]]\n\n# Get paid invoices only\npaid = [inv for inv in invoices if inv['status_id'] == STATUS_PAID]\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#date-shortcuts","title":"\ud83d\udcc5 Date Shortcuts","text":""},{"location":"technical/QUICK_REFERENCE/#supported-shortcuts","title":"Supported Shortcuts","text":"<pre><code>date_from=\"this_month\"    # Current month (Jan 1 - Jan 24)\ndate_from=\"last_month\"    # Previous month (Dec 1 - Dec 31)\ndate_from=\"this_year\"     # Current year (Jan 1 - today)\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#custom-date-ranges","title":"Custom Date Ranges","text":"<pre><code># Format: YYYY-MM-DD\ndate_from=\"2026-01-01\"\ndate_to=\"2026-01-31\"\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#filtering-search","title":"\ud83d\udd0d Filtering &amp; Search","text":""},{"location":"technical/QUICK_REFERENCE/#by-status","title":"By Status","text":"<pre><code># Paid only\ninvoice_list_sales(status=\"paid\")\n\n# Unpaid only\ninvoice_list_sales(status=\"unpaid\")\n\n# Partially paid\ninvoice_list_sales(status=\"partial\")\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#by-date-range","title":"By Date Range","text":"<pre><code>invoice_list_sales(\n    date_from=\"2026-01-01\",\n    date_to=\"2026-01-31\"\n)\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#by-customer","title":"By Customer","text":"<pre><code>invoice_list_sales(contact_id=489)\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#real-query-examples","title":"\ud83d\udca1 Real Query Examples","text":""},{"location":"technical/QUICK_REFERENCE/#what-was-revenue-last-month","title":"\"What was revenue last month?\"","text":"<pre><code>revenue_summary(date_from=\"last_month\")\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#show-unpaid-invoices","title":"\"Show unpaid invoices\"","text":"<pre><code>outstanding_receivables(status_id=1)  # 1 = Unpaid only\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#top-5-customers-this-month","title":"\"Top 5 customers this month\"","text":"<pre><code>customer_revenue_ranking(\n    date_from=\"this_month\",\n    top_n=5\n)\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#sales-rep-performance-this-month","title":"\"Sales rep performance this month\"","text":"<pre><code>sales_rep_revenue_report(date_from=\"this_month\")\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#how-many-invoices-were-paid-this-week","title":"\"How many invoices were paid this week?\"","text":"<pre><code>invoice_list_sales(\n    date_from=\"2026-01-17\",  # 7 days ago\n    date_to=\"2026-01-24\",     # today\n    status=\"paid\"\n)\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#commission-calculation-current-capability","title":"\ud83c\udfaf Commission Calculation (Current Capability)","text":""},{"location":"technical/QUICK_REFERENCE/#available-data","title":"Available Data","text":"<pre><code># Get revenue per sales rep\nsales_rep_revenue_report(date_from=\"this_month\")\n\n# Returns:\n{\n    'sales_rep_name': 'Ahmad Kurniawan',\n    'total_revenue_before_tax': 45000000,\n    'total_revenue_after_tax': 49500000,\n    'invoice_count': 8,\n    'average_invoice': 6187500\n}\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#missing-for-full-commission-calc","title":"Missing for Full Commission Calc","text":"<ul> <li>\u274c Sales targets per rep</li> <li>\u274c Commission percentage/tiers</li> <li>\u274c Target achievement percentage</li> </ul> <p>Next Steps: Implement target tracking + commission formula.</p>"},{"location":"technical/QUICK_REFERENCE/#performance-tips","title":"\ud83d\ude80 Performance Tips","text":""},{"location":"technical/QUICK_REFERENCE/#use-caching","title":"Use Caching","text":"<p>Cache is enabled by default (TTL: 30 minutes). To bypass: <pre><code>client.list_invoices(force_refresh=True)\n</code></pre></p>"},{"location":"technical/QUICK_REFERENCE/#pagination","title":"Pagination","text":"<pre><code># Get large datasets\ninvoice_list_sales(\n    per_page=100,  # Max items per page\n    page=1          # Page number\n)\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#filter-early","title":"Filter Early","text":"<p>Always filter by date range and status to reduce data transfer: <pre><code># Good - specific filters\ninvoice_list_sales(\n    date_from=\"2026-01-01\",\n    date_to=\"2026-01-31\",\n    status=\"paid\"\n)\n\n# Avoid - fetching everything\ninvoice_list_sales()  # Gets all invoices (slow!)\n</code></pre></p>"},{"location":"technical/QUICK_REFERENCE/#debugging","title":"\ud83d\udd27 Debugging","text":""},{"location":"technical/QUICK_REFERENCE/#test-connection","title":"Test Connection","text":"<pre><code>utility_test_connection()\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#check-cache-stats","title":"Check Cache Stats","text":"<pre><code>utility_get_cache_stats()\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#clear-cache","title":"Clear Cache","text":"<pre><code>utility_clear_cache()\n</code></pre>"},{"location":"technical/QUICK_REFERENCE/#token-usage-guide","title":"\ud83d\udcc8 Token Usage Guide","text":""},{"location":"technical/QUICK_REFERENCE/#current-25-tools","title":"Current (25 Tools)","text":"<ul> <li>~250 tokens per tool definition</li> <li>25 tools = ~6,250 tokens per request</li> <li>10-turn conversation = ~62,500 tokens</li> </ul>"},{"location":"technical/QUICK_REFERENCE/#after-consolidation-6-tools","title":"After Consolidation (6 Tools)","text":"<ul> <li>~250 tokens per tool definition</li> <li>6 tools = ~1,500 tokens per request</li> <li>10-turn conversation = ~15,000 tokens</li> </ul> <p>Savings: 47,500 tokens (76%) per 10-turn conversation</p> <p>Quick Tip: Start with <code>revenue_summary(date_from=\"this_month\")</code> - it's the most used query and returns comprehensive financial data!</p>"},{"location":"technical/SESSION_HANDOFF/","title":"Session Handoff - Implementation Decisions &amp; Progress","text":"<p>Session Date: January 24, 2026 Status: Analysis &amp; Documentation Complete, Ready for Implementation Next Session: Domain Model Implementation</p>"},{"location":"technical/SESSION_HANDOFF/#table-of-contents","title":"\ud83d\udccb Table of Contents","text":"<ol> <li>Executive Summary</li> <li>Key Decisions Made</li> <li>Work Completed</li> <li>Critical Findings</li> <li>Documentation Created</li> <li>Technical Debt Identified</li> <li>Next Steps (Priority Order)</li> <li>Implementation Roadmap</li> <li>Questions for Next Session</li> </ol>"},{"location":"technical/SESSION_HANDOFF/#executive-summary","title":"\ud83d\udcca Executive Summary","text":""},{"location":"technical/SESSION_HANDOFF/#what-we-accomplished-this-session","title":"What We Accomplished This Session","text":"<ol> <li>\u2705 Identified MCP tool consolidation opportunity</li> <li>Current: 25 tools</li> <li>Only 5 tools (20%) serve 100% of real business queries</li> <li> <p>80% waste in token usage (~4-6K tokens per request)</p> </li> <li> <p>\u2705 Validated API field definitions with real data</p> </li> <li>Tested 5 invoices</li> <li>Proven mathematical relationships</li> <li> <p>Corrected documentation errors</p> </li> <li> <p>\u2705 Mapped 60+ possible analytics reports</p> </li> <li>Comprehensive capability analysis</li> <li>Financial, revenue, sales, customer analytics</li> <li> <p>Risk management &amp; predictive analytics</p> </li> <li> <p>\u2705 Made architectural decision on field mapping</p> </li> <li>Decision: Convert Kledo fields to domain model</li> <li>Rationale: 8-hour investment, 100+ hours saved long-term</li> <li>Professional code quality vs technical debt</li> </ol>"},{"location":"technical/SESSION_HANDOFF/#current-state","title":"Current State","text":"<ul> <li>\u2705 MCP server working perfectly</li> <li>\u2705 API health validated</li> <li>\u2705 25 tools operational</li> <li>\u2705 Documentation organized</li> <li>\u23f8\ufe0f PAUSED: Ready for domain model implementation</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#key-decisions-made","title":"\ud83c\udfaf Key Decisions Made","text":""},{"location":"technical/SESSION_HANDOFF/#decision-1-mcp-tool-consolidation","title":"Decision 1: MCP Tool Consolidation","text":"<p>Problem: 25 tools, but only 5 actively used (20% coverage, 80% waste)</p> <p>Decision: Consolidate 25 \u2192 6-9 tools</p> <p>Rationale: - Token savings: 75% reduction (~47K tokens per 10-turn conversation) - Better UX: Clearer tool selection for LLM - Easier maintenance: Fewer tools to update</p> <p>Status: APPROVED - Not implemented yet</p> <p>Priority: Medium (after domain model)</p> <p>Implementation Time: 1-2 weeks</p>"},{"location":"technical/SESSION_HANDOFF/#decision-2-field-naming-strategy","title":"Decision 2: Field Naming Strategy","text":"<p>Problem: Kledo API uses confusing field names: - <code>amount_after_tax</code> = Including tax (not after deducting) - <code>subtotal</code> = Revenue before tax (unclear)</p> <p>Decision: CONVERT to domain model with clear names</p> <p>Rationale: | Aspect | Keep Kledo Names | Convert to Domain | Winner | |--------|------------------|-------------------|--------| | Initial Dev Time | 0 hours | 8 hours | Keep | | Long-term Maintenance | High confusion | Clear &amp; clean | Convert \u2705 | | Team Onboarding | 30 min/person | 0 min/person | Convert \u2705 | | Code Quality | Poor | Professional | Convert \u2705 | | Future Flexibility | Tight coupling | Loose coupling | Convert \u2705 |</p> <p>Mapping: <pre><code># Kledo API \u2192 Domain Model\namount_after_tax  \u2192  gross_sales      (Total with tax)\nsubtotal          \u2192  net_sales        (Revenue before tax)\ntotal_tax         \u2192  tax_collected    (PPN collected)\n</code></pre></p> <p>Status: APPROVED - Implementation pending</p> <p>Priority: HIGH - Do this first before other features</p> <p>Implementation Time: 8 hours (spread over 2-3 days)</p>"},{"location":"technical/SESSION_HANDOFF/#decision-3-documentation-organization","title":"Decision 3: Documentation Organization","text":"<p>Problem: Documentation mixed with user guides</p> <p>Decision: Separate technical docs into <code>docs/technical/</code> folder</p> <p>Structure: <pre><code>docs/\n\u251c\u2500\u2500 getting-started.md       (User guides)\n\u251c\u2500\u2500 entities/                (User reference)\n\u251c\u2500\u2500 tools/                   (User reference)\n\u2514\u2500\u2500 technical/               (Developer/internal)\n    \u251c\u2500\u2500 API_ARCHITECTURE.md\n    \u251c\u2500\u2500 QUICK_REFERENCE.md\n    \u251c\u2500\u2500 ANALYTICS_CAPABILITY_MAP.md\n    \u251c\u2500\u2500 FIELD_MAPPING_DECISION.md\n    \u2514\u2500\u2500 SESSION_HANDOFF.md (this file)\n</code></pre></p> <p>Status: COMPLETE \u2705</p>"},{"location":"technical/SESSION_HANDOFF/#work-completed","title":"\u2705 Work Completed","text":""},{"location":"technical/SESSION_HANDOFF/#1-api-field-validation-critical","title":"1. API Field Validation (CRITICAL)","text":"<p>What: Validated field meanings with 5 real invoices</p> <p>Method: Mathematical proof <pre><code>Invoice #1: 16,320,000 + 1,795,200 = 18,115,200 \u2705\nInvoice #2:  4,410,000 +         0 =  4,410,000 \u2705\nInvoice #3:  7,560,000 +   831,600 =  8,391,600 \u2705\nInvoice #4:  6,230,000 +   685,300 =  6,915,300 \u2705\nInvoice #5:  2,300,000 +   253,000 =  2,553,000 \u2705\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTOTAL:      36,820,000 + 3,565,100 = 40,385,100 \u2705\n</code></pre></p> <p>Proven: - <code>subtotal + total_tax = amount_after_tax</code> (100% confirmed) - <code>amount_after_tax</code> = field asli dari API (bukan buatan kita) - Tax rate = 11% PPN (standard Indonesian VAT)</p> <p>Impact: Fixed critical error in documentation</p> <p>Files: - Test script: <code>tests/validate_invoice_fields.py</code> - Validation: <code>tests/check_raw_api_field.py</code></p>"},{"location":"technical/SESSION_HANDOFF/#2-tool-usage-analysis","title":"2. Tool Usage Analysis","text":"<p>Method: Tested 5 realistic business queries: 1. Revenue analysis (monthly, weekly, daily) 2. Sales rep performance 3. Invoice lifecycle (created/paid/outstanding) 4. Top customer identification 5. Commission calculation data</p> <p>Results: <pre><code>Tools Actually Used:  5 / 25 (20%)\nTools Unused:        20 / 25 (80%)\n\nMost Used:\n1. revenue_summary (3\u00d7 calls)\n2. invoice_list_sales (3\u00d7 calls)\n3. sales_rep_revenue_report (2\u00d7 calls)\n4. customer_revenue_ranking (1\u00d7 call)\n5. sales_rep_list (1\u00d7 call)\n</code></pre></p> <p>Conclusion: 80% of tools are dead weight</p> <p>Files: - Test script: <code>tests/test_mcp_realistic_queries.py</code></p>"},{"location":"technical/SESSION_HANDOFF/#3-analytics-capability-mapping","title":"3. Analytics Capability Mapping","text":"<p>What: Mapped all possible reports from API data</p> <p>Output: 60+ distinct reports across 8 categories: 1. Financial Reporting (13 reports) 2. Revenue Analytics (9 reports) 3. Sales Performance (12 reports) 4. Customer Intelligence (11 reports) 5. Cash Flow &amp; Receivables (8 reports) 6. Operational Metrics (7 reports) 7. Risk Management (5 reports) 8. Predictive Analytics (5 reports)</p> <p>Key Insight: Data sangat lengkap untuk hampir semua analisis financial</p> <p>Missing Data (for future): - \u274c Sales targets (needed for commission calculations) - \u274c Product costs (needed for profit margins) - \u274c Marketing spend (needed for CAC/ROI)</p> <p>Files: - Full mapping: <code>docs/technical/ANALYTICS_CAPABILITY_MAP.md</code></p>"},{"location":"technical/SESSION_HANDOFF/#4-documentation-fixes","title":"4. Documentation Fixes","text":"<p>Critical Error Fixed: - Section 1.1 \"Income Statement Analysis\" had wrong field definitions - Corrected from assumptions to data-proven definitions - Added validation notes and mathematical proofs</p> <p>Before (WRONG): <pre><code>Gross Revenue = subtotal          \u274c\nNet Revenue = amount_after_tax    \u274c\n</code></pre></p> <p>After (CORRECT - proven with data): <pre><code>Gross Sales = amount_after_tax    \u2705\nNet Sales = subtotal              \u2705\nTax Collected = total_tax         \u2705\n</code></pre></p>"},{"location":"technical/SESSION_HANDOFF/#critical-findings","title":"\ud83d\udd0d Critical Findings","text":""},{"location":"technical/SESSION_HANDOFF/#finding-1-field-naming-confusion","title":"Finding 1: Field Naming Confusion","text":"<p>Issue: Kledo's <code>amount_after_tax</code> misleading</p> <p>Context: - In international accounting: \"after tax\" = minus tax - In Kledo API: \"after tax\" = INCLUDING tax (plus tax) - Indonesian terminology: \"after tax\" = \"setelah ditambah pajak\"</p> <p>Impact: HIGH - Can cause wrong calculations if misunderstood</p> <p>Resolution: Document clearly + convert to domain model</p>"},{"location":"technical/SESSION_HANDOFF/#finding-2-token-waste-in-mcp-tools","title":"Finding 2: Token Waste in MCP Tools","text":"<p>Issue: 80% of tools never used</p> <p>Numbers: <pre><code>Token Cost per Request:\n- Current (25 tools): ~6,250 tokens\n- Proposed (9 tools): ~1,500 tokens\n- Savings: 4,750 tokens (76% reduction)\n\nOver 10-turn conversation:\n- Current: 62,500 tokens\n- Proposed: 15,000 tokens\n- Savings: 47,500 tokens\n</code></pre></p> <p>Impact: MEDIUM - Affects performance and cost at scale</p> <p>Resolution: Consolidate tools (planned for Phase 2)</p>"},{"location":"technical/SESSION_HANDOFF/#finding-3-data-quality-excellent","title":"Finding 3: Data Quality Excellent","text":"<p>Issue: Actually not an issue - data is excellent!</p> <p>Findings: - \u2705 75+ fields per invoice - \u2705 Complete financial data - \u2705 Nested relationships (customer, sales rep, warehouse) - \u2705 Full transaction history - \u2705 Date tracking comprehensive</p> <p>Impact: POSITIVE - Can build sophisticated analytics</p>"},{"location":"technical/SESSION_HANDOFF/#documentation-created","title":"\ud83d\udcda Documentation Created","text":""},{"location":"technical/SESSION_HANDOFF/#1-docstechnicalapi_architecturemd-17-kb","title":"1. <code>/docs/technical/API_ARCHITECTURE.md</code> (17 KB)","text":"<p>Purpose: Comprehensive API reference</p> <p>Contents: - All 13 endpoint categories - Complete invoice data structure (75+ fields) - Current 25-tool architecture - Tool usage analysis - Consolidation recommendations - Token economics</p> <p>Audience: Developers, maintainers</p> <p>Status: \u2705 Complete (with corrections)</p>"},{"location":"technical/SESSION_HANDOFF/#2-docstechnicalquick_referencemd-7-kb","title":"2. <code>/docs/technical/QUICK_REFERENCE.md</code> (7 KB)","text":"<p>Purpose: Developer cheat sheet</p> <p>Contents: - Most-used tools with examples - Common calculations - Status codes &amp; shortcuts - Real query patterns - Performance tips</p> <p>Audience: Developers (quick lookup)</p> <p>Status: \u2705 Complete</p>"},{"location":"technical/SESSION_HANDOFF/#3-docstechnicalanalytics_capability_mapmd-30-kb","title":"3. <code>/docs/technical/ANALYTICS_CAPABILITY_MAP.md</code> (30+ KB)","text":"<p>Purpose: Complete analytics mapping</p> <p>Contents: - 60+ possible reports - 8 major categories - Sample outputs - Formula examples - Implementation roadmap - Priority recommendations</p> <p>Audience: Finance analyst, data analyst, product owner</p> <p>Status: \u2705 Complete (with field corrections)</p>"},{"location":"technical/SESSION_HANDOFF/#4-docstechnicalfield_mapping_decisionmd-18-kb","title":"4. <code>/docs/technical/FIELD_MAPPING_DECISION.md</code> (18 KB)","text":"<p>Purpose: Architectural decision record</p> <p>Contents: - Problem analysis - Option comparison (keep vs convert) - Cost-benefit analysis - Decision matrix - Implementation plan - Code examples</p> <p>Audience: Tech lead, architects, team</p> <p>Status: \u2705 Complete</p>"},{"location":"technical/SESSION_HANDOFF/#5-docstechnicalsession_handoffmd-this-file","title":"5. <code>/docs/technical/SESSION_HANDOFF.md</code> (this file)","text":"<p>Purpose: Context for next session</p> <p>Contents: Everything you're reading now</p> <p>Status: \u2705 Complete</p>"},{"location":"technical/SESSION_HANDOFF/#technical-debt-identified","title":"\u26a0\ufe0f Technical Debt Identified","text":""},{"location":"technical/SESSION_HANDOFF/#debt-1-confusing-field-names-high-priority","title":"Debt 1: Confusing Field Names (HIGH PRIORITY)","text":"<p>Issue: Using raw Kledo fields throughout codebase</p> <p>Impact: - New developers confused - Risk of misinterpretation - Communication gap with finance team</p> <p>Solution: Implement domain model (Decision 2)</p> <p>Effort: 8 hours</p> <p>Priority: HIGH - Do first</p>"},{"location":"technical/SESSION_HANDOFF/#debt-2-tool-bloat-medium-priority","title":"Debt 2: Tool Bloat (MEDIUM PRIORITY)","text":"<p>Issue: 25 tools, only 5 used</p> <p>Impact: - Token waste (~4-6K per request) - Cognitive overhead for LLM - Maintenance burden</p> <p>Solution: Consolidate to 6-9 tools</p> <p>Effort: 1-2 weeks</p> <p>Priority: MEDIUM - After domain model</p>"},{"location":"technical/SESSION_HANDOFF/#debt-3-missing-commission-feature-low-medium","title":"Debt 3: Missing Commission Feature (LOW-MEDIUM)","text":"<p>Issue: Can calculate revenue per rep, but can't calculate commission</p> <p>Missing: - Sales targets per rep - Commission rates/tiers - Achievement calculation</p> <p>Solution: Build commission calculator + target tracking</p> <p>Effort: 1-2 weeks</p> <p>Priority: LOW-MEDIUM - After consolidation</p>"},{"location":"technical/SESSION_HANDOFF/#next-steps-priority-order","title":"\ud83d\ude80 Next Steps (Priority Order)","text":""},{"location":"technical/SESSION_HANDOFF/#phase-1-domain-model-implementation-immediate","title":"Phase 1: Domain Model Implementation (IMMEDIATE)","text":"<p>Goal: Convert Kledo fields \u2192 clear domain names</p> <p>Tasks: 1. \u2705 Define domain model (<code>InvoiceFinancials</code> class) 2. \u2705 Create mapper layer (<code>kledo_mapper.py</code>) 3. \u2705 Write unit tests (mapper validation) 4. \u23f8\ufe0f Update 3 core tools (revenue, invoice, sales_analytics) 5. \u23f8\ufe0f Test with real queries 6. \u23f8\ufe0f Update documentation</p> <p>Time Estimate: 8 hours (2-3 days)</p> <p>Deliverables: - <code>src/models/invoice_financials.py</code> - <code>src/mappers/kledo_mapper.py</code> - <code>tests/test_kledo_mapper.py</code> - Updated tools using domain model</p> <p>Success Criteria: - All tests pass - Revenue report uses <code>gross_sales</code> not <code>amount_after_tax</code> - Code self-documenting</p>"},{"location":"technical/SESSION_HANDOFF/#phase-2-tool-consolidation-next","title":"Phase 2: Tool Consolidation (NEXT)","text":"<p>Goal: Reduce 25 \u2192 6-9 tools</p> <p>Approach: <pre><code>Current (25 tools):\n\u251c\u2500\u2500 invoice_list_sales\n\u251c\u2500\u2500 invoice_list_purchase\n\u251c\u2500\u2500 invoice_get_detail\n\u2514\u2500\u2500 invoice_get_totals\n\nConsolidated (1 tool):\n\u2514\u2500\u2500 kledo_invoice(operation=\"list_sales|list_purchase|detail|totals\")\n</code></pre></p> <p>Tasks: 1. Design consolidated tool interfaces 2. Implement 6-9 new tools 3. Migrate logic from 25 old tools 4. Update MCP server registration 5. Test all business queries still work 6. Update documentation</p> <p>Time Estimate: 1-2 weeks</p> <p>Success Criteria: - Token usage reduced by 70%+ - All existing queries still work - No breaking changes for users</p>"},{"location":"technical/SESSION_HANDOFF/#phase-3-core-analytics-reports-later","title":"Phase 3: Core Analytics Reports (LATER)","text":"<p>Goal: Build top-priority reports</p> <p>Reports to Build: 1. AR Aging Report (cash flow critical) 2. DSO Calculator (working capital) 3. Payment Behavior Scoring (risk management) 4. Revenue Breakdown Dashboard (business intelligence)</p> <p>Time Estimate: 2-3 weeks</p> <p>Depends On: Phase 1 (domain model)</p>"},{"location":"technical/SESSION_HANDOFF/#phase-4-advanced-features-future","title":"Phase 4: Advanced Features (FUTURE)","text":"<p>Features: 1. Commission calculator (with target tracking) 2. Customer RFM segmentation 3. Churn prediction model 4. Revenue forecasting 5. Automated dashboards</p> <p>Time Estimate: 1-2 months</p> <p>Depends On: Phases 1-3</p>"},{"location":"technical/SESSION_HANDOFF/#implementation-roadmap","title":"\ud83d\udcc5 Implementation Roadmap","text":"<pre><code>Week 1 (IMMEDIATE - Domain Model):\n\u251c\u2500 Day 1: Define InvoiceFinancials class (1 hour)\n\u251c\u2500 Day 1: Create mapper functions (2 hours)\n\u251c\u2500 Day 2: Write unit tests (2 hours)\n\u251c\u2500 Day 3: Update revenue tool (1 hour)\n\u251c\u2500 Day 3: Update invoice tool (1 hour)\n\u2514\u2500 Day 3: Update sales_analytics tool (1 hour)\n\nWeek 2-3 (Tool Consolidation):\n\u251c\u2500 Design consolidated interfaces (4 hours)\n\u251c\u2500 Implement kledo_invoice (6 hours)\n\u251c\u2500 Implement kledo_revenue (4 hours)\n\u251c\u2500 Implement kledo_sales_analytics (4 hours)\n\u251c\u2500 Implement kledo_contact (3 hours)\n\u251c\u2500 Migrate remaining tools (8 hours)\n\u251c\u2500 Test suite (6 hours)\n\u2514\u2500 Documentation (3 hours)\n\nWeek 4-6 (Core Reports):\n\u251c\u2500 AR Aging Report (8 hours)\n\u251c\u2500 DSO Calculator (4 hours)\n\u251c\u2500 Payment Behavior Scoring (8 hours)\n\u251c\u2500 Revenue Breakdown Dashboard (12 hours)\n\u2514\u2500 Testing &amp; refinement (8 hours)\n\nMonth 2-3 (Advanced Features):\n\u2514\u2500 Commission, RFM, Forecasting, Dashboards\n</code></pre>"},{"location":"technical/SESSION_HANDOFF/#questions-for-next-session","title":"\u2753 Questions for Next Session","text":"<p>Before starting implementation, clarify:</p>"},{"location":"technical/SESSION_HANDOFF/#1-timeline-priority","title":"1. Timeline &amp; Priority","text":"<ul> <li>Q: Berapa lama target untuk Phase 1 (domain model)?</li> <li>Recommended: 2-3 days (8 hours spread)</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#2-naming-conventions","title":"2. Naming Conventions","text":"<ul> <li>Q: Prefer English (<code>gross_sales</code>) or Indonesian (<code>penjualan_bruto</code>)?</li> <li>Recommended: English (international standard, easier for tools)</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#3-backward-compatibility","title":"3. Backward Compatibility","text":"<ul> <li>Q: Perlu support old field names temporarily?</li> <li>Recommended: No (fresh start, no legacy code depends on it)</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#4-testing-strategy","title":"4. Testing Strategy","text":"<ul> <li>Q: Manual testing atau automated tests dulu?</li> <li>Recommended: Automated tests first (prevent regressions)</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#5-tool-consolidation-timeline","title":"5. Tool Consolidation Timeline","text":"<ul> <li>Q: Phase 2 start kapan? Immediately after Phase 1?</li> <li>Recommended: 1 week after Phase 1 (stabilize first)</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#technical-context-for-next-session","title":"\ud83d\udd27 Technical Context for Next Session","text":""},{"location":"technical/SESSION_HANDOFF/#current-codebase-state","title":"Current Codebase State","text":"<p>Working: - \u2705 MCP server (<code>src/server.py</code>) - \u2705 25 tools in <code>src/tools/*.py</code> - \u2705 API client (<code>src/kledo_client.py</code>) - \u2705 Authentication (<code>src/auth.py</code>) - \u2705 Caching (<code>src/cache.py</code>)</p> <p>Need Updates: - \u23f8\ufe0f Tools still use raw Kledo fields - \u23f8\ufe0f No domain model layer yet - \u23f8\ufe0f No mapper functions yet</p> <p>Dependencies: <pre><code>pyproject.toml:\n\u251c\u2500\u2500 mcp &gt;= 0.9.0\n\u251c\u2500\u2500 httpx &gt;= 0.25.0\n\u251c\u2500\u2500 pydantic &gt;= 2.0.0\n\u251c\u2500\u2500 python-dotenv &gt;= 1.0.0\n\u2514\u2500\u2500 loguru &gt;= 0.7.0\n</code></pre></p> <p>Environment: <pre><code>Python: 3.11+\nVenv: /Users/.../kledo-api-mcp/venv\nAPI: Kledo Production (working)\nAuth: API Key (valid)\n</code></pre></p>"},{"location":"technical/SESSION_HANDOFF/#key-files-to-reference","title":"\ud83d\udcdd Key Files to Reference","text":""},{"location":"technical/SESSION_HANDOFF/#for-implementation","title":"For Implementation:","text":"<ol> <li>Field Validation:</li> <li><code>tests/validate_invoice_fields.py</code> (proven field meanings)</li> <li> <p><code>tests/check_raw_api_field.py</code> (API field verification)</p> </li> <li> <p>Current Tools:</p> </li> <li><code>src/tools/revenue.py</code> (needs domain model)</li> <li><code>src/tools/invoices.py</code> (needs domain model)</li> <li> <p><code>src/tools/sales_analytics.py</code> (needs domain model)</p> </li> <li> <p>API Client:</p> </li> <li> <p><code>src/kledo_client.py</code> (working, no changes needed)</p> </li> <li> <p>Decision Docs:</p> </li> <li><code>docs/technical/FIELD_MAPPING_DECISION.md</code> (architecture rationale)</li> <li><code>docs/technical/ANALYTICS_CAPABILITY_MAP.md</code> (what to build)</li> </ol>"},{"location":"technical/SESSION_HANDOFF/#immediate-next-actions","title":"\ud83c\udfaf Immediate Next Actions","text":"<p>When resuming, do this first:</p>"},{"location":"technical/SESSION_HANDOFF/#step-1-review-decisions-15-min","title":"Step 1: Review Decisions (15 min)","text":"<ul> <li>Read <code>FIELD_MAPPING_DECISION.md</code></li> <li>Confirm: Convert to domain model \u2705</li> <li>Confirm: Priority order \u2705</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#step-2-create-domain-model-1-hour","title":"Step 2: Create Domain Model (1 hour)","text":"<pre><code># File: src/models/invoice_financials.py\n@dataclass\nclass InvoiceFinancials:\n    net_sales: Decimal          # subtotal\n    tax_collected: Decimal      # total_tax\n    gross_sales: Decimal        # amount_after_tax\n</code></pre>"},{"location":"technical/SESSION_HANDOFF/#step-3-create-mapper-2-hours","title":"Step 3: Create Mapper (2 hours)","text":"<pre><code># File: src/mappers/kledo_mapper.py\ndef from_kledo_invoice(data: dict) -&gt; InvoiceFinancials:\n    return InvoiceFinancials(\n        net_sales=Decimal(str(data[\"subtotal\"])),\n        tax_collected=Decimal(str(data[\"total_tax\"])),\n        gross_sales=Decimal(str(data[\"amount_after_tax\"]))\n    )\n</code></pre>"},{"location":"technical/SESSION_HANDOFF/#step-4-write-tests-2-hours","title":"Step 4: Write Tests (2 hours)","text":"<pre><code># File: tests/test_kledo_mapper.py\ndef test_conversion():\n    result = from_kledo_invoice(sample_data)\n    assert result.net_sales == Decimal(\"16320000\")\n    assert result.gross_sales == Decimal(\"18115200\")\n</code></pre>"},{"location":"technical/SESSION_HANDOFF/#step-5-update-one-tool-1-hour","title":"Step 5: Update One Tool (1 hour)","text":"<ul> <li>Pick: <code>revenue.py</code> (most used)</li> <li>Replace raw Kledo fields with domain model</li> <li>Test with real query</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#step-6-validate-30-min","title":"Step 6: Validate (30 min)","text":"<ul> <li>Run: <code>python tests/test_kledo_mapper.py</code></li> <li>Run: <code>python tests/test_mcp_realistic_queries.py</code></li> <li>Verify: Revenue report shows clear names</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#success-metrics","title":"\ud83d\udcca Success Metrics","text":""},{"location":"technical/SESSION_HANDOFF/#phase-1-success-domain-model","title":"Phase 1 Success (Domain Model):","text":"<ul> <li>\u2705 All tests pass</li> <li>\u2705 Revenue tool uses <code>gross_sales</code> not <code>amount_after_tax</code></li> <li>\u2705 Code readable by finance team</li> <li>\u2705 Zero confusion in field meanings</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#overall-project-success","title":"Overall Project Success:","text":"<ul> <li>\u2705 Token usage &lt; 2,000 per request (currently 6,250)</li> <li>\u2705 All business queries &lt; 5 seconds response</li> <li>\u2705 Finance team can read code directly</li> <li>\u2705 New developer productive in &lt; 1 day</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#important-reminders","title":"\ud83d\ude4f Important Reminders","text":""},{"location":"technical/SESSION_HANDOFF/#for-next-session","title":"For Next Session:","text":"<ol> <li>Start Fresh: Review this handoff doc first</li> <li>Validate Context: Check if any API/dependencies changed</li> <li>Test First: Run existing tests before changes</li> <li>Incremental: One tool at a time, validate each step</li> <li>Document: Update docs as you implement</li> </ol>"},{"location":"technical/SESSION_HANDOFF/#red-flags-to-watch","title":"Red Flags to Watch:","text":"<ul> <li>\u26a0\ufe0f If tests fail after mapper \u2192 Check Decimal conversion</li> <li>\u26a0\ufe0f If revenue numbers different \u2192 Verify formula uses correct fields</li> <li>\u26a0\ufe0f If performance slow \u2192 Check if caching still works</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#continuation-checklist","title":"\ud83d\udcde Continuation Checklist","text":"<p>Before starting next session, ensure you have:</p> <ul> <li>\u2705 Read this handoff doc completely</li> <li>\u2705 Reviewed <code>FIELD_MAPPING_DECISION.md</code></li> <li>\u2705 Checked <code>tests/validate_invoice_fields.py</code> output</li> <li>\u2705 Verified environment still working (<code>python tests/test_simple_api_call.py</code>)</li> <li>\u2705 Have questions list ready</li> <li>\u2705 Blocked 8 hours for Phase 1 implementation</li> </ul>"},{"location":"technical/SESSION_HANDOFF/#final-summary","title":"\ud83c\udfaf Final Summary","text":"<p>Where We Are: - \u2705 Analysis complete - \u2705 Decisions made - \u2705 Documentation ready - \u23f8\ufe0f Ready for implementation</p> <p>What's Next: - \ud83d\ude80 Phase 1: Domain Model (8 hours) - \ud83d\udcca Phase 2: Tool Consolidation (1-2 weeks) - \ud83d\udcc8 Phase 3: Core Reports (2-3 weeks)</p> <p>Expected Outcome: - Professional-grade analytics platform - Clear, maintainable code - 75% token savings - Finance team alignment</p> <p>Time Investment vs Return: - Initial: 8 hours (domain model) - Saved: 100+ hours over project lifetime - ROI: 12.5\u00d7 return</p> <p>Status: Ready for Phase 1 Implementation Next Session: Create domain model + mapper layer Estimated Time: 8 hours (2-3 days) Priority: HIGH - Foundation for all future work</p> <p>Document Version: 1.0 Last Updated: January 24, 2026, 5:15 PM Author: Claude (with user validation) Next Review: When resuming implementation</p>"},{"location":"tools/","title":"Tool Catalog","text":"<p>This page provides a complete catalog of all MCP tools available in the Kledo MCP Server. Tools are organized by business domain for easy discovery.</p>"},{"location":"tools/#overview","title":"Overview","text":"<p>The Kledo MCP Server exposes 23 tools across 6 business domains:</p> Domain Tools Description Sales 5 Sales invoices and orders Purchases 2 Purchase invoices and orders Inventory 6 Products and deliveries Finance 4 Financial reports and bank balances CRM 3 Customer and vendor management System 3 Cache and connection utilities"},{"location":"tools/#complete-tool-list","title":"Complete Tool List","text":"Tool Domain Description Entity invoice_list_sales Sales List sales invoices with optional filtering Invoice invoice_get_detail Sales Get detailed information about a specific invoice Invoice invoice_get_totals Sales Get summary totals for sales invoices Invoice order_list_sales Sales List sales orders with optional filtering Order order_get_detail Sales Get detailed information about a specific sales order Order invoice_list_purchase Purchases List purchase invoices (bills from vendors) Invoice order_list_purchase Purchases List purchase orders with optional filtering Order product_list Inventory List products with prices and inventory Product product_get_detail Inventory Get detailed information about a specific product Product product_search_by_sku Inventory Search for a product by its SKU/code Product delivery_list Inventory List deliveries/shipments Delivery delivery_get_detail Inventory Get detailed information about a specific delivery Delivery delivery_get_pending Inventory Get list of pending/undelivered orders Delivery financial_activity_team_report Finance Get team activity report for a date range - financial_sales_summary Finance Get sales summary by contact for a period - financial_purchase_summary Finance Get purchase summary by vendor for a period - financial_bank_balances Finance Get current balances for all bank accounts Account contact_list CRM List customers and vendors Contact contact_get_detail CRM Get detailed information about a contact Contact contact_get_transactions CRM Get transaction history for a contact Contact utility_clear_cache System Clear all cached data - utility_get_cache_stats System Get cache statistics and performance metrics - utility_test_connection System Test connection to Kledo API -"},{"location":"tools/#domain-pages","title":"Domain Pages","text":""},{"location":"tools/#sales-domain","title":"Sales Domain","text":"<p>Tools for managing sales transactions:</p> <ul> <li>Sales Invoices - Create, list, and view sales invoices</li> <li>Sales Orders - Manage sales orders</li> </ul>"},{"location":"tools/#purchases-domain","title":"Purchases Domain","text":"<p>Tools for managing procurement:</p> <ul> <li>Purchase Invoices - Vendor bills and purchase invoices</li> <li>Purchase Orders - Purchase order management</li> </ul>"},{"location":"tools/#inventory-domain","title":"Inventory Domain","text":"<p>Tools for product and delivery management:</p> <ul> <li>Products - Product catalog and inventory levels</li> <li>Deliveries - Shipment tracking and pending deliveries</li> </ul>"},{"location":"tools/#finance-domain","title":"Finance Domain","text":"<p>Tools for financial reporting:</p> <ul> <li>Reports - Activity reports, sales/purchase summaries, bank balances</li> </ul>"},{"location":"tools/#crm-domain","title":"CRM Domain","text":"<p>Tools for customer relationship management:</p> <ul> <li>Contacts - Customer and vendor information</li> </ul>"},{"location":"tools/#system-domain","title":"System Domain","text":"<p>Utility tools for server management:</p> <ul> <li>Utilities - Cache management and connection testing</li> </ul>"},{"location":"tools/#tool-introspection","title":"Tool Introspection","text":"<p>The tool catalog is maintained through code introspection. To regenerate:</p> <pre><code>python scripts/extract_tools.py\n</code></pre> <p>This extracts tool metadata directly from the MCP tool definitions, ensuring documentation stays in sync with the implementation.</p>"},{"location":"tools/choosing/","title":"Choosing Between Tools","text":"<p>When multiple tools seem applicable, this page helps you pick the right one. Each section explains tool overlaps and when to use each option.</p> <p>When to Read This</p> <p>Consult this page when:</p> <ul> <li>The disambiguation matrix shows \"Context-dependent\" confidence</li> <li>You're unsure between similar-sounding tools</li> <li>You want to understand the difference between list vs. summary tools</li> </ul>"},{"location":"tools/choosing/#choosing-between-sales-tools","title":"Choosing Between Sales Tools","text":""},{"location":"tools/choosing/#invoice_list_sales-vs-financial_sales_summary","title":"invoice_list_sales vs financial_sales_summary","text":"<p>Both tools show sales data, but they serve different purposes.</p> Aspect invoice_list_sales financial_sales_summary Returns Individual invoice records Aggregated totals by customer Grouping Flat list Ranked by revenue Detail level Each invoice with status Customer totals only Use case Finding specific invoices Analyzing customer performance <p>Use <code>invoice_list_sales</code> when:</p> <ul> <li>You need to see specific invoice details (invoice number, items, status)</li> <li>You want to filter by invoice status (draft, pending, paid)</li> <li>You need to find unpaid or overdue invoices</li> <li>The user is asking about a particular invoice or date range</li> </ul> <p>Use <code>financial_sales_summary</code> when:</p> <ul> <li>You want to see top customers ranked by revenue</li> <li>You need total sales figures for a period</li> <li>You're comparing customer performance</li> <li>The user asks \"Who are my best customers?\"</li> </ul>"},{"location":"tools/choosing/#invoice_list_sales-vs-invoice_get_totals","title":"invoice_list_sales vs invoice_get_totals","text":"<p>Both provide sales invoice information, but at different aggregation levels.</p> Aspect invoice_list_sales invoice_get_totals Returns List of invoices Summary numbers only Detail Individual records Totals (count, amount, paid, outstanding) Data volume Potentially large Single summary object <p>Use <code>invoice_list_sales</code> when:</p> <ul> <li>You need to see individual invoice records</li> <li>You want to browse or search invoices</li> <li>You need invoice numbers or line items</li> </ul> <p>Use <code>invoice_get_totals</code> when:</p> <ul> <li>You only need aggregate numbers (total amount, count)</li> <li>You want to know total outstanding or overdue amounts</li> <li>You're answering \"How many invoices?\" or \"What's my total receivables?\"</li> </ul>"},{"location":"tools/choosing/#choosing-between-contact-tools","title":"Choosing Between Contact Tools","text":""},{"location":"tools/choosing/#contact_list-vs-financial_sales_summary-for-customer-questions","title":"contact_list vs financial_sales_summary (for customer questions)","text":"<p>Both can answer \"Who are my customers?\" but from different angles.</p> Aspect contact_list financial_sales_summary Returns Contact information Sales performance data Ranking Alphabetical/search order By revenue Data type Name, email, phone Sales amount, invoice count <p>Use <code>contact_list</code> when:</p> <ul> <li>You're looking up a customer by name or email</li> <li>You need contact information (address, phone)</li> <li>You want to find a specific contact ID</li> </ul> <p>Use <code>financial_sales_summary</code> when:</p> <ul> <li>You want to know top customers by revenue</li> <li>You're analyzing sales performance by customer</li> <li>The user asks \"Who are my biggest customers?\"</li> </ul>"},{"location":"tools/choosing/#contact_get_transactions-vs-invoice_list_sales-with-contact_id","title":"contact_get_transactions vs invoice_list_sales with contact_id","text":"<p>Both show a customer's transaction history, but with different scope.</p> Aspect contact_get_transactions invoice_list_sales + contact_id Scope All transaction types Only sales invoices Includes Invoices, payments, credits, adjustments Invoices only Summary Yes (total count, amount) No built-in summary <p>Use <code>contact_get_transactions</code> when:</p> <ul> <li>You want the full transaction history (invoices AND payments AND credits)</li> <li>You need to see all interactions with a customer</li> <li>The user asks \"What's the history with this customer?\"</li> </ul> <p>Use <code>invoice_list_sales</code> with <code>contact_id</code> when:</p> <ul> <li>You only want sales invoices for that customer</li> <li>You need to filter by invoice status</li> <li>The user specifically asks about invoices, not all transactions</li> </ul>"},{"location":"tools/choosing/#choosing-between-product-tools","title":"Choosing Between Product Tools","text":""},{"location":"tools/choosing/#product_list-vs-product_search_by_sku","title":"product_list vs product_search_by_sku","text":"<p>Both find products, but optimized for different lookup patterns.</p> Aspect product_list product_search_by_sku Lookup method Name, description, or browse Exact SKU match Results Multiple products Single product Inventory Optional (use include_inventory) Included <p>Use <code>product_list</code> when:</p> <ul> <li>You're browsing the product catalog</li> <li>You're searching by product name or description</li> <li>You don't have the exact SKU</li> <li>The user says \"Find products like...\"</li> </ul> <p>Use <code>product_search_by_sku</code> when:</p> <ul> <li>You have the exact SKU/product code</li> <li>You want a quick single-product lookup</li> <li>The user provides a specific product code</li> </ul>"},{"location":"tools/choosing/#choosing-between-order-and-invoice-tools","title":"Choosing Between Order and Invoice Tools","text":""},{"location":"tools/choosing/#order_list_sales-vs-invoice_list_sales","title":"order_list_sales vs invoice_list_sales","text":"<p>Orders and invoices represent different stages in the sales process.</p> Aspect order_list_sales invoice_list_sales Stage Pre-billing (quotations, confirmed orders) Post-billing (bills sent) Status Draft, Confirmed, Delivered Draft, Pending, Paid, Overdue Payment tracking No payment info Tracks payments <p>Use <code>order_list_sales</code> when:</p> <ul> <li>You're looking at confirmed orders not yet invoiced</li> <li>You want to see what's in the pipeline before billing</li> <li>The user asks about orders or quotations</li> </ul> <p>Use <code>invoice_list_sales</code> when:</p> <ul> <li>You're looking at billed transactions</li> <li>You need payment status (paid, pending, overdue)</li> <li>The user asks about invoices or receivables</li> </ul> <p>Workflow Tip</p> <p>In Kledo, the typical flow is: Order (quotation) \u2192 Invoice (bill) \u2192 Delivery (shipment) \u2192 Payment (settled)</p>"},{"location":"tools/choosing/#choosing-between-delivery-tools","title":"Choosing Between Delivery Tools","text":""},{"location":"tools/choosing/#delivery_list-vs-delivery_get_pending","title":"delivery_list vs delivery_get_pending","text":"<p>Both show deliveries, but with different filters.</p> Aspect delivery_list delivery_get_pending Scope All deliveries (filterable) Only pending/unshipped Parameters date_from, date_to, status_id None Use case Browse history Quick action list <p>Use <code>delivery_list</code> when:</p> <ul> <li>You want to see all deliveries for a date range</li> <li>You need to filter by specific status</li> <li>You're reviewing delivery history</li> </ul> <p>Use <code>delivery_get_pending</code> when:</p> <ul> <li>You want to see what needs to be shipped today</li> <li>You're answering \"What deliveries are pending?\"</li> <li>You need a quick operational checklist</li> </ul>"},{"location":"tools/choosing/#summary-decision-tree","title":"Summary Decision Tree","text":"<pre><code>Is the user asking about...\n\nRevenue/Sales totals?\n\u251c\u2500\u2500 By customer? \u2192 financial_sales_summary\n\u251c\u2500\u2500 Total amounts? \u2192 invoice_get_totals\n\u2514\u2500\u2500 Specific invoices? \u2192 invoice_list_sales\n\nCustomer information?\n\u251c\u2500\u2500 Contact details? \u2192 contact_list or contact_get_detail\n\u251c\u2500\u2500 Top customers by revenue? \u2192 financial_sales_summary\n\u2514\u2500\u2500 Transaction history? \u2192 contact_get_transactions\n\nProduct information?\n\u251c\u2500\u2500 Have exact SKU? \u2192 product_search_by_sku\n\u2514\u2500\u2500 Searching by name? \u2192 product_list\n\nInvoice vs Order?\n\u251c\u2500\u2500 Already billed? \u2192 invoice_list_sales\n\u2514\u2500\u2500 Not yet invoiced? \u2192 order_list_sales\n\nPending items?\n\u251c\u2500\u2500 Overdue invoices? \u2192 invoice_get_totals\n\u2514\u2500\u2500 Pending deliveries? \u2192 delivery_get_pending\n</code></pre>"},{"location":"tools/choosing/#see-also","title":"See Also","text":"<ul> <li>Find the Right Tool - Business question to tool matrix</li> <li>Tool Catalog - Complete tool reference</li> </ul>"},{"location":"tools/disambiguation/","title":"Find the Right Tool","text":"<p>This page helps you find the correct tool for your business question. Use the matrix below to map natural language queries to the appropriate MCP tool.</p>"},{"location":"tools/disambiguation/#how-to-read-this-matrix","title":"How to Read This Matrix","text":"Column Description Business Question Natural language query in English and Indonesian Recommended Tool Primary tool to use for this question Confidence Definitive = Only one tool makes sense; Context-dependent = May need more information Parameters Key parameters to provide Alternative Another tool that could work, with note on when to use it <p>For AI Agents</p> <ul> <li>Definitive confidence means you can call the tool directly</li> <li>Context-dependent means ask the user for clarification first</li> <li>Check the Choosing Between Tools page for detailed overlap explanations</li> </ul>"},{"location":"tools/disambiguation/#reporting-queries","title":"Reporting Queries","text":"<p>Questions about financial summaries and trends.</p> Business Question Recommended Tool Confidence Parameters Alternative What is my revenue? / Berapa pendapatan saya? <code>financial_sales_summary</code> Definitive date_from, date_to <code>invoice_get_totals</code> (if need paid vs outstanding breakdown) What are my expenses? / Berapa pengeluaran saya? <code>financial_purchase_summary</code> Definitive date_from, date_to - Show my sales trends / Tunjukkan tren penjualan <code>financial_sales_summary</code> Context-dependent date_from, date_to <code>invoice_list_sales</code> (if need individual invoice details) What's my cash balance? / Berapa saldo kas saya? <code>financial_bank_balances</code> Definitive (none) -"},{"location":"tools/disambiguation/#data-lookup-queries","title":"Data Lookup Queries","text":"<p>Questions about finding specific records.</p> Business Question Recommended Tool Confidence Parameters Alternative Show invoice #123 / Tampilkan faktur #123 <code>invoice_get_detail</code> Definitive invoice_id - Find customer X / Cari pelanggan X <code>contact_list</code> Definitive search <code>contact_get_detail</code> (if you have contact_id) What's the price of product Y? / Berapa harga produk Y? <code>product_list</code> Context-dependent search <code>product_search_by_sku</code> (if you have exact SKU) Show order details / Tampilkan detail pesanan <code>order_get_detail</code> Definitive order_id <code>invoice_get_detail</code> (if it's an invoice, not order)"},{"location":"tools/disambiguation/#analytical-queries","title":"Analytical Queries","text":"<p>Questions about rankings, comparisons, and history.</p> Business Question Recommended Tool Confidence Parameters Alternative Who are my top customers? / Siapa pelanggan terbesar saya? <code>financial_sales_summary</code> Definitive date_from, date_to - What are my best selling products? / Produk apa yang paling laris? - Context-dependent - No direct tool available. Use <code>invoice_list_sales</code> and aggregate by product How much do I owe vendor X? / Berapa hutang saya ke vendor X? <code>contact_get_detail</code> Context-dependent contact_id <code>financial_purchase_summary</code> (for total purchases from vendor) What's customer X's transaction history? / Apa riwayat transaksi pelanggan X? <code>contact_get_transactions</code> Definitive contact_id <code>invoice_list_sales</code> (if only want invoices, not all transactions)"},{"location":"tools/disambiguation/#statushealth-queries","title":"Status/Health Queries","text":"<p>Questions about outstanding items and pending tasks.</p> Business Question Recommended Tool Confidence Parameters Alternative Any overdue invoices? / Ada faktur jatuh tempo? <code>invoice_get_totals</code> Definitive (none) <code>invoice_list_sales</code> with status_id filter (to see specific invoices) Pending deliveries? / Pengiriman yang tertunda? <code>delivery_get_pending</code> Definitive (none) <code>delivery_list</code> with status filter Total outstanding receivables? / Total piutang? <code>invoice_get_totals</code> Definitive (none) -"},{"location":"tools/disambiguation/#quick-reference-by-entity","title":"Quick Reference by Entity","text":""},{"location":"tools/disambiguation/#invoices","title":"Invoices","text":"<ul> <li>List invoices: <code>invoice_list_sales</code> or <code>invoice_list_purchase</code></li> <li>Get single invoice: <code>invoice_get_detail</code></li> <li>Get totals/summary: <code>invoice_get_totals</code></li> </ul>"},{"location":"tools/disambiguation/#orders","title":"Orders","text":"<ul> <li>List orders: <code>order_list_sales</code> or <code>order_list_purchase</code></li> <li>Get single order: <code>order_get_detail</code></li> </ul>"},{"location":"tools/disambiguation/#contacts-customersvendors","title":"Contacts (Customers/Vendors)","text":"<ul> <li>Search contacts: <code>contact_list</code></li> <li>Get contact details: <code>contact_get_detail</code></li> <li>Get transaction history: <code>contact_get_transactions</code></li> </ul>"},{"location":"tools/disambiguation/#products","title":"Products","text":"<ul> <li>Search products: <code>product_list</code></li> <li>Get product by SKU: <code>product_search_by_sku</code></li> <li>Get product details: <code>product_get_detail</code></li> </ul>"},{"location":"tools/disambiguation/#deliveries","title":"Deliveries","text":"<ul> <li>List deliveries: <code>delivery_list</code></li> <li>Get pending shipments: <code>delivery_get_pending</code></li> <li>Get delivery details: <code>delivery_get_detail</code></li> </ul>"},{"location":"tools/disambiguation/#finance","title":"Finance","text":"<ul> <li>Sales summary by customer: <code>financial_sales_summary</code></li> <li>Purchase summary by vendor: <code>financial_purchase_summary</code></li> <li>Bank balances: <code>financial_bank_balances</code></li> <li>Team activity: <code>financial_activity_team_report</code></li> </ul>"},{"location":"tools/disambiguation/#see-also","title":"See Also","text":"<ul> <li>Choosing Between Tools - Detailed guidance on overlapping tools</li> <li>Tool Catalog - Complete tool reference</li> </ul>"},{"location":"tools/crm/contacts/","title":"Contact Tools","text":"<p>Tools for managing contacts in Kledo. Contacts represent customers and vendors in your business.</p>"},{"location":"tools/crm/contacts/#contact_list","title":"contact_list","text":"<p>List customers and vendors with optional search and filtering.</p>"},{"location":"tools/crm/contacts/#parameters","title":"Parameters","text":"Parameter Type Required Description search string No Search by name, email, phone, or company type_id integer No Filter by type (1=Customer, 2=Vendor, 3=Both) per_page integer No Results per page (default: 50)"},{"location":"tools/crm/contacts/#example","title":"Example","text":"<p>Request: <pre><code>{\n  \"search\": \"Acme\",\n  \"type_id\": 1,\n  \"per_page\": 20\n}\n</code></pre></p> <p>Response: Returns a list of contacts with: - Name - Company - Type (Customer/Vendor) - Email - Phone</p> <p>Related Entity: Contact</p>"},{"location":"tools/crm/contacts/#contact_get_detail","title":"contact_get_detail","text":"<p>Get detailed information about a specific contact/customer/vendor.</p>"},{"location":"tools/crm/contacts/#parameters_1","title":"Parameters","text":"Parameter Type Required Description contact_id integer Yes Contact ID"},{"location":"tools/crm/contacts/#example_1","title":"Example","text":"<p>Request: <pre><code>{\n  \"contact_id\": 123\n}\n</code></pre></p> <p>Response: Returns complete contact details including: - Name and company - Type (Customer/Vendor) - Email and phone - Address - Financial summary (receivables, payables)</p> <p>Related Entity: Contact</p>"},{"location":"tools/crm/contacts/#contact_get_transactions","title":"contact_get_transactions","text":"<p>Get transaction history for a contact (invoices, payments, etc.).</p>"},{"location":"tools/crm/contacts/#parameters_2","title":"Parameters","text":"Parameter Type Required Description contact_id integer Yes Contact ID"},{"location":"tools/crm/contacts/#example_2","title":"Example","text":"<p>Request: <pre><code>{\n  \"contact_id\": 123\n}\n</code></pre></p> <p>Response: Returns transaction history including: - Total transaction count - Total amount - Recent transactions with type, number, date, amount, and status</p> <p>Related Entity: Contact</p>"},{"location":"tools/crm/contacts/#see-also","title":"See Also","text":"<ul> <li>Sales Invoices - Customer invoices</li> <li>Purchase Invoices - Vendor bills</li> <li>Financial Reports - Sales and purchase summaries</li> <li>Contact Entity - Data model reference</li> </ul>"},{"location":"tools/finance/reports/","title":"Financial Report Tools","text":"<p>Tools for financial reporting in Kledo. These tools provide summaries and analytics for business performance.</p>"},{"location":"tools/finance/reports/#financial_activity_team_report","title":"financial_activity_team_report","text":"<p>Get team activity report for a date range. Shows what the sales/finance team has been doing.</p>"},{"location":"tools/finance/reports/#parameters","title":"Parameters","text":"Parameter Type Required Description date_from string No Start date in YYYY-MM or YYYY-MM-DD format, or use 'last_month', 'this_month', 'this_year' date_to string No End date in YYYY-MM or YYYY-MM-DD format (optional if using period shortcuts)"},{"location":"tools/finance/reports/#example","title":"Example","text":"<p>Request: <pre><code>{\n  \"date_from\": \"last_month\"\n}\n</code></pre></p> <p>Response: Returns team activity data including: - User name - Action type - Activity count</p>"},{"location":"tools/finance/reports/#financial_sales_summary","title":"financial_sales_summary","text":"<p>Get sales summary by contact for a period. Shows total sales revenue from each customer.</p>"},{"location":"tools/finance/reports/#parameters_1","title":"Parameters","text":"Parameter Type Required Description date_from string No Start date (YYYY-MM-DD or shortcuts like 'last_month') date_to string No End date (YYYY-MM-DD) contact_id integer No Filter by specific contact/customer ID (optional)"},{"location":"tools/finance/reports/#example_1","title":"Example","text":"<p>Request: <pre><code>{\n  \"date_from\": \"2024-01-01\",\n  \"date_to\": \"2024-12-31\"\n}\n</code></pre></p> <p>Response: Returns sales summary including: - Total sales amount - Number of customers - Top customers ranked by revenue with invoice counts</p>"},{"location":"tools/finance/reports/#financial_purchase_summary","title":"financial_purchase_summary","text":"<p>Get purchase summary by vendor for a period. Shows total purchase expenses from each vendor.</p>"},{"location":"tools/finance/reports/#parameters_2","title":"Parameters","text":"Parameter Type Required Description date_from string No Start date (YYYY-MM-DD or shortcuts) date_to string No End date (YYYY-MM-DD) contact_id integer No Filter by specific vendor ID (optional)"},{"location":"tools/finance/reports/#example_2","title":"Example","text":"<p>Request: <pre><code>{\n  \"date_from\": \"2024-01-01\",\n  \"date_to\": \"2024-12-31\"\n}\n</code></pre></p> <p>Response: Returns purchase summary including: - Total purchases amount - Number of vendors - Top vendors ranked by spending with invoice counts</p>"},{"location":"tools/finance/reports/#financial_bank_balances","title":"financial_bank_balances","text":"<p>Get current balances for all bank accounts. Shows available cash across all accounts.</p>"},{"location":"tools/finance/reports/#parameters_3","title":"Parameters","text":"<p>This tool takes no parameters.</p>"},{"location":"tools/finance/reports/#example_3","title":"Example","text":"<p>Request: <pre><code>{}\n</code></pre></p> <p>Response: Returns bank account balances including: - Account name - Current balance - Currency - Total balance across all accounts</p> <p>Related Entity: Account</p>"},{"location":"tools/finance/reports/#see-also","title":"See Also","text":"<ul> <li>Sales Invoices - Source of sales data</li> <li>Purchase Invoices - Source of purchase data</li> <li>Contacts - Customer and vendor information</li> </ul>"},{"location":"tools/inventory/deliveries/","title":"Delivery Tools","text":"<p>Tools for managing deliveries in Kledo. Deliveries track shipments of products to customers.</p>"},{"location":"tools/inventory/deliveries/#delivery_list","title":"delivery_list","text":"<p>List deliveries/shipments with optional filtering by date or status.</p>"},{"location":"tools/inventory/deliveries/#parameters","title":"Parameters","text":"Parameter Type Required Description search string No Search term date_from string No Start date date_to string No End date status_id integer No Filter by delivery status"},{"location":"tools/inventory/deliveries/#example","title":"Example","text":"<p>Request: <pre><code>{\n  \"date_from\": \"2024-01-01\",\n  \"date_to\": \"2024-01-31\",\n  \"status_id\": 1\n}\n</code></pre></p> <p>Response: Returns a list of deliveries with: - Delivery number - Customer name - Date - Status - Shipping company</p> <p>Related Entity: Delivery</p>"},{"location":"tools/inventory/deliveries/#delivery_get_detail","title":"delivery_get_detail","text":"<p>Get detailed information about a specific delivery including tracking status.</p>"},{"location":"tools/inventory/deliveries/#parameters_1","title":"Parameters","text":"Parameter Type Required Description delivery_id integer Yes Delivery ID"},{"location":"tools/inventory/deliveries/#example_1","title":"Example","text":"<p>Request: <pre><code>{\n  \"delivery_id\": 456\n}\n</code></pre></p> <p>Response: Returns complete delivery details including: - Delivery number and date - Customer information - Shipping company and tracking number - Shipping address - Items being delivered with quantities - Reference to related order/invoice - Delivery notes</p> <p>Related Entity: Delivery</p>"},{"location":"tools/inventory/deliveries/#delivery_get_pending","title":"delivery_get_pending","text":"<p>Get list of pending/undelivered orders that need to be shipped.</p>"},{"location":"tools/inventory/deliveries/#parameters_2","title":"Parameters","text":"<p>This tool takes no parameters.</p>"},{"location":"tools/inventory/deliveries/#example_2","title":"Example","text":"<p>Request: <pre><code>{}\n</code></pre></p> <p>Response: Returns a list of pending deliveries that need to be shipped, including: - Delivery number - Customer name - Created date</p> <p>Related Entity: Delivery</p>"},{"location":"tools/inventory/deliveries/#see-also","title":"See Also","text":"<ul> <li>Products - Products being delivered</li> <li>Sales Orders - Orders awaiting delivery</li> <li>Delivery Entity - Data model reference</li> </ul>"},{"location":"tools/inventory/products/","title":"Product Tools","text":"<p>Tools for managing products in Kledo. Products represent items in your inventory that can be sold or purchased.</p>"},{"location":"tools/inventory/products/#product_list","title":"product_list","text":"<p>List products with optional search and filtering. Shows product prices and inventory.</p>"},{"location":"tools/inventory/products/#parameters","title":"Parameters","text":"Parameter Type Required Description search string No Search by product name, code/SKU, or description include_inventory boolean No Include warehouse inventory quantities (default: false) per_page integer No Results per page (default: 50)"},{"location":"tools/inventory/products/#example","title":"Example","text":"<p>Request: <pre><code>{\n  \"search\": \"laptop\",\n  \"include_inventory\": true,\n  \"per_page\": 20\n}\n</code></pre></p> <p>Response: Returns a list of products with: - Product name - SKU/code - Sell price - Category - Stock quantity (if include_inventory is true)</p> <p>Related Entity: Product</p>"},{"location":"tools/inventory/products/#product_get_detail","title":"product_get_detail","text":"<p>Get detailed information about a specific product including pricing and inventory.</p>"},{"location":"tools/inventory/products/#parameters_1","title":"Parameters","text":"Parameter Type Required Description product_id integer Yes Product ID"},{"location":"tools/inventory/products/#example_1","title":"Example","text":"<p>Request: <pre><code>{\n  \"product_id\": 123\n}\n</code></pre></p> <p>Response: Returns complete product details including: - Name, SKU/code, category - Description - Sell price and cost price - Current stock quantity - Stock by warehouse breakdown</p> <p>Related Entity: Product</p>"},{"location":"tools/inventory/products/#product_search_by_sku","title":"product_search_by_sku","text":"<p>Search for a product by its SKU/code and get current price.</p>"},{"location":"tools/inventory/products/#parameters_2","title":"Parameters","text":"Parameter Type Required Description sku string Yes Product SKU/code"},{"location":"tools/inventory/products/#example_2","title":"Example","text":"<p>Request: <pre><code>{\n  \"sku\": \"LAPTOP-001\"\n}\n</code></pre></p> <p>Response: Returns product information: - Name - SKU - Current price - Cost - Stock quantity - Category</p> <p>Related Entity: Product</p>"},{"location":"tools/inventory/products/#see-also","title":"See Also","text":"<ul> <li>Deliveries - Product shipments</li> <li>Sales Invoices - Product sales</li> <li>Product Entity - Data model reference</li> </ul>"},{"location":"tools/purchases/invoices/","title":"Purchase Invoice Tools","text":"<p>Tools for managing purchase invoices (vendor bills) in Kledo. Purchase invoices represent bills received from vendors for goods or services.</p>"},{"location":"tools/purchases/invoices/#invoice_list_purchase","title":"invoice_list_purchase","text":"<p>List purchase invoices (bills from vendors) with optional filtering.</p>"},{"location":"tools/purchases/invoices/#parameters","title":"Parameters","text":"Parameter Type Required Description search string No Search term contact_id integer No Filter by vendor ID status_id integer No Filter by status date_from string No Start date date_to string No End date per_page integer No Results per page (default: 50)"},{"location":"tools/purchases/invoices/#example","title":"Example","text":"<p>Request: <pre><code>{\n  \"contact_id\": 456,\n  \"status_id\": 2,\n  \"date_from\": \"2024-01-01\"\n}\n</code></pre></p> <p>Response: Returns a list of purchase invoices with: - Invoice number - Vendor name - Date - Total amount - Status</p> <p>Related Entity: Invoice</p>"},{"location":"tools/purchases/invoices/#see-also","title":"See Also","text":"<ul> <li>Sales Invoices - Customer invoices</li> <li>Purchase Orders - Pre-invoice purchase orders</li> <li>Invoice Entity - Data model reference</li> </ul>"},{"location":"tools/purchases/orders/","title":"Purchase Order Tools","text":"<p>Tools for managing purchase orders in Kledo. Purchase orders represent orders placed with vendors.</p>"},{"location":"tools/purchases/orders/#order_list_purchase","title":"order_list_purchase","text":"<p>List purchase orders with optional filtering.</p>"},{"location":"tools/purchases/orders/#parameters","title":"Parameters","text":"Parameter Type Required Description search string No Search term contact_id integer No Filter by vendor ID date_from string No Start date date_to string No End date"},{"location":"tools/purchases/orders/#example","title":"Example","text":"<p>Request: <pre><code>{\n  \"contact_id\": 789,\n  \"date_from\": \"2024-01-01\"\n}\n</code></pre></p> <p>Response: Returns a list of purchase orders with: - Order number - Vendor name - Date - Total amount</p> <p>Related Entity: Order</p>"},{"location":"tools/purchases/orders/#see-also","title":"See Also","text":"<ul> <li>Sales Orders - Customer orders</li> <li>Purchase Invoices - Convert orders to bills</li> <li>Order Entity - Data model reference</li> </ul>"},{"location":"tools/sales/invoices/","title":"Sales Invoice Tools","text":"<p>Tools for managing sales invoices in Kledo. Sales invoices represent bills sent to customers for goods or services.</p>"},{"location":"tools/sales/invoices/#invoice_list_sales","title":"invoice_list_sales","text":"<p>List sales invoices with optional filtering by customer, status, date range, or search term.</p>"},{"location":"tools/sales/invoices/#parameters","title":"Parameters","text":"Parameter Type Required Description search string No Search term for invoice number or details contact_id integer No Filter by customer ID status_id integer No Filter by status (1=Draft, 2=Pending, 3=Paid, etc.) date_from string No Start date (YYYY-MM-DD or shortcuts like 'last_month') date_to string No End date (YYYY-MM-DD) per_page integer No Results per page (default: 50)"},{"location":"tools/sales/invoices/#example","title":"Example","text":"<p>Request: <pre><code>{\n  \"contact_id\": 123,\n  \"status_id\": 2,\n  \"date_from\": \"2024-01-01\",\n  \"date_to\": \"2024-01-31\"\n}\n</code></pre></p> <p>Response: Returns a list of invoices with invoice number, customer name, date, total amount, paid amount, and status.</p> <p>Related Entity: Invoice</p>"},{"location":"tools/sales/invoices/#invoice_get_detail","title":"invoice_get_detail","text":"<p>Get detailed information about a specific invoice including line items.</p>"},{"location":"tools/sales/invoices/#parameters_1","title":"Parameters","text":"Parameter Type Required Description invoice_id integer Yes Invoice ID"},{"location":"tools/sales/invoices/#example_1","title":"Example","text":"<p>Request: <pre><code>{\n  \"invoice_id\": 456\n}\n</code></pre></p> <p>Response: Returns complete invoice details including: - Invoice number, date, due date - Customer information - Line items with product, quantity, price, amount - Subtotal, tax, total - Payment status and amount paid</p> <p>Related Entity: Invoice</p>"},{"location":"tools/sales/invoices/#invoice_get_totals","title":"invoice_get_totals","text":"<p>Get summary totals for sales invoices (total outstanding, paid, overdue, etc.).</p>"},{"location":"tools/sales/invoices/#parameters_2","title":"Parameters","text":"Parameter Type Required Description date_from string No Start date filter date_to string No End date filter"},{"location":"tools/sales/invoices/#example_2","title":"Example","text":"<p>Request: <pre><code>{\n  \"date_from\": \"2024-01-01\",\n  \"date_to\": \"2024-12-31\"\n}\n</code></pre></p> <p>Response: Returns invoice totals including: - Total invoice count - Total amount invoiced - Total amount paid - Outstanding balance - Overdue amount</p> <p>Related Entity: Invoice</p>"},{"location":"tools/sales/invoices/#see-also","title":"See Also","text":"<ul> <li>Purchase Invoices - Vendor bills</li> <li>Sales Orders - Pre-invoice sales orders</li> <li>Invoice Entity - Data model reference</li> </ul>"},{"location":"tools/sales/orders/","title":"Sales Order Tools","text":"<p>Tools for managing sales orders in Kledo. Sales orders represent customer orders before they are invoiced.</p>"},{"location":"tools/sales/orders/#order_list_sales","title":"order_list_sales","text":"<p>List sales orders with optional filtering.</p>"},{"location":"tools/sales/orders/#parameters","title":"Parameters","text":"Parameter Type Required Description search string No Search term contact_id integer No Filter by customer ID status_id integer No Filter by status date_from string No Start date date_to string No End date"},{"location":"tools/sales/orders/#example","title":"Example","text":"<p>Request: <pre><code>{\n  \"contact_id\": 123,\n  \"date_from\": \"2024-01-01\"\n}\n</code></pre></p> <p>Response: Returns a list of sales orders with order number, customer name, date, total amount, and status.</p> <p>Related Entity: Order</p>"},{"location":"tools/sales/orders/#order_get_detail","title":"order_get_detail","text":"<p>Get detailed information about a specific sales order.</p>"},{"location":"tools/sales/orders/#parameters_1","title":"Parameters","text":"Parameter Type Required Description order_id integer Yes Sales order ID"},{"location":"tools/sales/orders/#example_1","title":"Example","text":"<p>Request: <pre><code>{\n  \"order_id\": 789\n}\n</code></pre></p> <p>Response: Returns complete order details including: - Order number and date - Customer information - Line items with product, quantity, price, amount - Subtotal and total - Order status</p> <p>Related Entity: Order</p>"},{"location":"tools/sales/orders/#see-also","title":"See Also","text":"<ul> <li>Sales Invoices - Convert orders to invoices</li> <li>Purchase Orders - Vendor orders</li> <li>Order Entity - Data model reference</li> </ul>"},{"location":"tools/system/utilities/","title":"System Utility Tools","text":"<p>Utility tools for managing the Kledo MCP Server. These tools help with cache management and connection testing.</p>"},{"location":"tools/system/utilities/#utility_clear_cache","title":"utility_clear_cache","text":"<p>Clear all cached data and force fresh data retrieval on next requests.</p>"},{"location":"tools/system/utilities/#parameters","title":"Parameters","text":"<p>This tool takes no parameters.</p>"},{"location":"tools/system/utilities/#example","title":"Example","text":"<p>Request: <pre><code>{}\n</code></pre></p> <p>Response: Returns confirmation message with number of cache entries cleared.</p>"},{"location":"tools/system/utilities/#utility_get_cache_stats","title":"utility_get_cache_stats","text":"<p>Get cache statistics including hit rate, size, and performance metrics.</p>"},{"location":"tools/system/utilities/#parameters_1","title":"Parameters","text":"<p>This tool takes no parameters.</p>"},{"location":"tools/system/utilities/#example_1","title":"Example","text":"<p>Request: <pre><code>{}\n</code></pre></p> <p>Response: Returns cache statistics including: - Status (enabled/disabled) - Current size vs. max size - Hit rate percentage - Total hits and misses - Total requests - Cache sets count - Evictions and expirations - Performance assessment</p>"},{"location":"tools/system/utilities/#utility_test_connection","title":"utility_test_connection","text":"<p>Test connection to Kledo API and verify authentication status.</p>"},{"location":"tools/system/utilities/#parameters_2","title":"Parameters","text":"<p>This tool takes no parameters.</p>"},{"location":"tools/system/utilities/#example_2","title":"Example","text":"<p>Request: <pre><code>{}\n</code></pre></p> <p>Response: Returns connection test results including: - Authentication status - Access token presence - Token expiry - API connection test result - Base URL</p>"},{"location":"tools/system/utilities/#see-also","title":"See Also","text":"<ul> <li>Tool Catalog - All available tools</li> </ul>"}]}